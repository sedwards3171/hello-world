!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.app=e()}}(function(){var e;return function t(e,i,s){function o(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(n)return n(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return o(i?i:t)},h,h.exports,t,e,i,s)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)o(s[r]);return o}({1:[function(e,t,i){t.exports=e("./src/index")},{"./src/index":20}],2:[function(e,t,i){function s(e){return!!e&&"object"==typeof e}function o(e,t,i,r,l){if(!d(e))return e;var h=a(t)&&(u(t)||m(t)),g=h?void 0:v(t);return c(g||t,function(a,d){if(g&&(d=a,a=t[d]),s(a))r||(r=[]),l||(l=[]),n(e,t,d,o,i,r,l);else{var c=e[d],p=i?i(c,a,d,e,t):void 0,u=void 0===p;u&&(p=a),void 0===p&&(!h||d in e)||!u&&(p===p?p===c:c!==c)||(e[d]=p)}}),e}function n(e,t,i,s,o,n,r){for(var l=n.length,d=t[i];l--;)if(n[l]==d)return void(e[i]=r[l]);var c=e[i],g=o?o(c,d,i,e,t):void 0,v=void 0===g;v&&(g=d,a(d)&&(u(d)||m(d))?g=u(c)?c:a(c)?h(c):[]:f(d)||p(d)?g=p(c)?b(c):f(c)?c:{}:v=!1),n.push(d),r.push(g),v?e[i]=s(g,d,o,n,r):(g===g?g!==c:c===c)&&(e[i]=g)}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&l(w(e))}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var h=e("lodash._arraycopy"),c=e("lodash._arrayeach"),g=e("lodash._createassigner"),p=e("lodash.isarguments"),u=e("lodash.isarray"),f=e("lodash.isplainobject"),m=e("lodash.istypedarray"),v=e("lodash.keys"),b=e("lodash.toplainobject"),y=9007199254740991,w=r("length"),x=g(o);t.exports=x},{"lodash._arraycopy":3,"lodash._arrayeach":4,"lodash._createassigner":5,"lodash.isarguments":10,"lodash.isarray":11,"lodash.isplainobject":12,"lodash.istypedarray":14,"lodash.keys":15,"lodash.toplainobject":17}],3:[function(e,t,i){function s(e,t){var i=-1,s=e.length;for(t||(t=Array(s));++i<s;)t[i]=e[i];return t}t.exports=s},{}],4:[function(e,t,i){function s(e,t){for(var i=-1,s=e.length;++i<s&&t(e[i],i,e)!==!1;);return e}t.exports=s},{}],5:[function(e,t,i){function s(e){return r(function(t,i){var s=-1,r=null==t?0:i.length,a=r>2?i[r-2]:void 0,l=r>2?i[2]:void 0,d=r>1?i[r-1]:void 0;for("function"==typeof a?(a=o(a,d,5),r-=2):(a="function"==typeof d?d:void 0,r-=a?1:0),l&&n(i[0],i[1],l)&&(a=3>r?void 0:a,r=1);++s<r;){var h=i[s];h&&e(t,h,a)}return t})}var o=e("lodash._bindcallback"),n=e("lodash._isiterateecall"),r=e("lodash.restparam");t.exports=s},{"lodash._bindcallback":6,"lodash._isiterateecall":7,"lodash.restparam":8}],6:[function(e,t,i){function s(e,t,i){if("function"!=typeof e)return o;if(void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,s,o){return e.call(t,i,s,o)};case 4:return function(i,s,o,n){return e.call(t,i,s,o,n)};case 5:return function(i,s,o,n,r){return e.call(t,i,s,o,n,r)}}return function(){return e.apply(t,arguments)}}function o(e){return e}t.exports=s},{}],7:[function(e,t,i){function s(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&a(c(e))}function n(e,t){return e="number"==typeof e||d.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&t>e}function r(e,t,i){if(!l(i))return!1;var s=typeof t;if("number"==s?o(i)&&n(t,i.length):"string"==s&&t in i){var r=i[t];return e===e?e===r:r!==r}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var d=/^\d+$/,h=9007199254740991,c=s("length");t.exports=r},{}],8:[function(e,t,i){function s(e,t){if("function"!=typeof e)throw new TypeError(o);return t=n(void 0===t?e.length-1:+t||0,0),function(){for(var i=arguments,s=-1,o=n(i.length-t,0),r=Array(o);++s<o;)r[s]=i[t+s];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,i[0],r);case 2:return e.call(this,i[0],i[1],r)}var a=Array(t+1);for(s=-1;++s<t;)a[s]=i[s];return a[t]=r,e.apply(this,a)}}var o="Expected a function",n=Math.max;t.exports=s},{}],9:[function(e,t,i){function s(e){return!!e&&"object"==typeof e}function o(e,t){var i=null==e?void 0:e[t];return a(i)?i:void 0}function n(e){return r(e)&&p.call(e)==l}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:n(e)?u.test(c.call(e)):s(e)&&d.test(e)}var l="[object Function]",d=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,g=h.hasOwnProperty,p=h.toString,u=RegExp("^"+c.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{}],10:[function(e,t,i){(function(e){function i(e){return function(t){return null==t?void 0:t[e]}}function s(e){return n(e)&&f.call(e,"callee")&&(!v.call(e,"callee")||m.call(e)==c)}function o(e){return null!=e&&!("function"==typeof e&&r(e))&&a(b(e))}function n(e){return d(e)&&o(e)}function r(e){var t=l(e)?m.call(e):"";return t==g||t==p}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function d(e){return!!e&&"object"==typeof e}var h=9007199254740991,c="[object Arguments]",g="[object Function]",p="[object GeneratorFunction]",u=e.Object.prototype,f=u.hasOwnProperty,m=u.toString,v=u.propertyIsEnumerable,b=i("length");t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,i){function s(e){return!!e&&"object"==typeof e}function o(e,t){var i=null==e?void 0:e[t];return l(i)?i:void 0}function n(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function r(e){return a(e)&&f.call(e)==h}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return null==e?!1:r(e)?m.test(p.call(e)):s(e)&&c.test(e)}var d="[object Array]",h="[object Function]",c=/^\[object .+?Constructor\]$/,g=Object.prototype,p=Function.prototype.toString,u=g.hasOwnProperty,f=g.toString,m=RegExp("^"+p.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=o(Array,"isArray"),b=9007199254740991,y=v||function(e){return s(e)&&n(e.length)&&f.call(e)==d};t.exports=y},{}],12:[function(e,t,i){function s(e){return!!e&&"object"==typeof e}function o(e,t){return r(e,t,l)}function n(e){var t;if(!s(e)||g.call(e)!=d||a(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var i;return o(e,function(e,t){i=t}),void 0===i||c.call(e,i)}var r=e("lodash._basefor"),a=e("lodash.isarguments"),l=e("lodash.keysin"),d="[object Object]",h=Object.prototype,c=h.hasOwnProperty,g=h.toString;t.exports=n},{"lodash._basefor":13,"lodash.isarguments":10,"lodash.keysin":16}],13:[function(e,t,i){function s(e){return function(t,i,s){for(var o=-1,n=Object(t),r=s(t),a=r.length;a--;){var l=r[e?a:++o];if(i(n[l],l,n)===!1)break}return t}}var o=s();t.exports=o},{}],14:[function(e,t,i){(function(e){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}function s(e){return!!e&&"object"==typeof e}function o(e){return s(e)&&i(e.length)&&!!M[A.call(e)]}var n=9007199254740991,r="[object Arguments]",a="[object Array]",l="[object Boolean]",d="[object Date]",h="[object Error]",c="[object Function]",g="[object Map]",p="[object Number]",u="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object Float32Array]",x="[object Float64Array]",$="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",P="[object Uint16Array]",j="[object Uint32Array]",M={};M[w]=M[x]=M[$]=M[k]=M[T]=M[S]=M[C]=M[P]=M[j]=!0,M[r]=M[a]=M[y]=M[l]=M[d]=M[h]=M[c]=M[g]=M[p]=M[u]=M[f]=M[m]=M[v]=M[b]=!1;var I=e.Object.prototype,A=I.toString;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,i){function s(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&r(b(e))}function n(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&t>e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function a(e){for(var t=d(e),i=t.length,s=i&&e.length,o=!!s&&r(s)&&(g(e)||c(e)),a=-1,l=[];++a<i;){var h=t[a];(o&&n(h,s)||f.call(e,h))&&l.push(h)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function d(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(g(e)||c(e))&&t||0;for(var i=e.constructor,s=-1,o="function"==typeof i&&i.prototype===e,a=Array(t),d=t>0;++s<t;)a[s]=s+"";for(var h in e)d&&n(h,t)||"constructor"==h&&(o||!f.call(e,h))||a.push(h);return a}var h=e("lodash._getnative"),c=e("lodash.isarguments"),g=e("lodash.isarray"),p=/^\d+$/,u=Object.prototype,f=u.hasOwnProperty,m=h(Object,"keys"),v=9007199254740991,b=s("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&o(e)?a(e):l(e)?m(e):[]}:a;t.exports=y},{"lodash._getnative":9,"lodash.isarguments":10,"lodash.isarray":11}],16:[function(e,t,i){function s(e,t){return e="number"==typeof e||d.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&t>e}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function r(e){if(null==e)return[];n(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(l(e)||a(e))&&t||0;for(var i=e.constructor,r=-1,d="function"==typeof i&&i.prototype===e,h=Array(t),g=t>0;++r<t;)h[r]=r+"";for(var p in e)g&&s(p,t)||"constructor"==p&&(d||!c.call(e,p))||h.push(p);return h}var a=e("lodash.isarguments"),l=e("lodash.isarray"),d=/^\d+$/,h=Object.prototype,c=h.hasOwnProperty,g=9007199254740991;t.exports=r},{"lodash.isarguments":10,"lodash.isarray":11}],17:[function(e,t,i){function s(e){return o(e,n(e))}var o=e("lodash._basecopy"),n=e("lodash.keysin");t.exports=s},{"lodash._basecopy":18,"lodash.keysin":16}],18:[function(e,t,i){function s(e,t,i){i||(i={});for(var s=-1,o=t.length;++s<o;){var n=t[s];i[n]=e[n]}return i}t.exports=s},{}],19:[function(t,i,s){(function(){function t(e){function t(t,i,s,o,n,r){for(;n>=0&&r>n;n+=e){var a=o?o[n]:n;s=i(s,t[a],a,t)}return s}return function(i,s,o,n){s=$(s,n,4);var r=!M(i)&&x.keys(i),a=(r||i).length,l=e>0?0:a-1;return arguments.length<3&&(o=i[r?r[l]:l],l+=e),t(i,s,o,r,l,a)}}function o(e){return function(t,i,s){i=k(i,s);for(var o=j(t),n=e>0?0:o-1;n>=0&&o>n;n+=e)if(i(t[n],n,t))return n;return-1}}function n(e,t,i){return function(s,o,n){var r=0,a=j(s);if("number"==typeof n)e>0?r=n>=0?n:Math.max(n+a,r):a=n>=0?Math.min(n+1,a):n+a+1;else if(i&&n&&a)return n=i(s,o),s[n]===o?n:-1;if(o!==o)return n=t(p.call(s,r,a),x.isNaN),n>=0?n+r:-1;for(n=e>0?r:a-1;n>=0&&a>n;n+=e)if(s[n]===o)return n;return-1}}function r(e,t){var i=B.length,s=e.constructor,o=x.isFunction(s)&&s.prototype||h,n="constructor";for(x.has(e,n)&&!x.contains(t,n)&&t.push(n);i--;)n=B[i],n in e&&e[n]!==o[n]&&!x.contains(t,n)&&t.push(n)}var a=this,l=a._,d=Array.prototype,h=Object.prototype,c=Function.prototype,g=d.push,p=d.slice,u=h.toString,f=h.hasOwnProperty,m=Array.isArray,v=Object.keys,b=c.bind,y=Object.create,w=function(){},x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof s?("undefined"!=typeof i&&i.exports&&(s=i.exports=x),s._=x):a._=x,x.VERSION="1.8.3";var $=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,s){return e.call(t,i,s)};case 3:return function(i,s,o){return e.call(t,i,s,o)};case 4:return function(i,s,o,n){return e.call(t,i,s,o,n)}}return function(){return e.apply(t,arguments)}},k=function(e,t,i){return null==e?x.identity:x.isFunction(e)?$(e,t,i):x.isObject(e)?x.matcher(e):x.property(e)};x.iteratee=function(e,t){return k(e,t,1/0)};var T=function(e,t){return function(i){var s=arguments.length;if(2>s||null==i)return i;for(var o=1;s>o;o++)for(var n=arguments[o],r=e(n),a=r.length,l=0;a>l;l++){var d=r[l];t&&void 0!==i[d]||(i[d]=n[d])}return i}},S=function(e){if(!x.isObject(e))return{};if(y)return y(e);w.prototype=e;var t=new w;return w.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},P=Math.pow(2,53)-1,j=C("length"),M=function(e){var t=j(e);return"number"==typeof t&&t>=0&&P>=t};x.each=x.forEach=function(e,t,i){t=$(t,i);var s,o;if(M(e))for(s=0,o=e.length;o>s;s++)t(e[s],s,e);else{var n=x.keys(e);for(s=0,o=n.length;o>s;s++)t(e[n[s]],n[s],e)}return e},x.map=x.collect=function(e,t,i){t=k(t,i);for(var s=!M(e)&&x.keys(e),o=(s||e).length,n=Array(o),r=0;o>r;r++){var a=s?s[r]:r;n[r]=t(e[a],a,e)}return n},x.reduce=x.foldl=x.inject=t(1),x.reduceRight=x.foldr=t(-1),x.find=x.detect=function(e,t,i){var s;return s=M(e)?x.findIndex(e,t,i):x.findKey(e,t,i),void 0!==s&&-1!==s?e[s]:void 0},x.filter=x.select=function(e,t,i){var s=[];return t=k(t,i),x.each(e,function(e,i,o){t(e,i,o)&&s.push(e)}),s},x.reject=function(e,t,i){return x.filter(e,x.negate(k(t)),i)},x.every=x.all=function(e,t,i){t=k(t,i);for(var s=!M(e)&&x.keys(e),o=(s||e).length,n=0;o>n;n++){var r=s?s[n]:n;if(!t(e[r],r,e))return!1}return!0},x.some=x.any=function(e,t,i){t=k(t,i);for(var s=!M(e)&&x.keys(e),o=(s||e).length,n=0;o>n;n++){var r=s?s[n]:n;if(t(e[r],r,e))return!0}return!1},x.contains=x.includes=x.include=function(e,t,i,s){return M(e)||(e=x.values(e)),("number"!=typeof i||s)&&(i=0),x.indexOf(e,t,i)>=0},x.invoke=function(e,t){var i=p.call(arguments,2),s=x.isFunction(t);return x.map(e,function(e){var o=s?t:e[t];return null==o?o:o.apply(e,i)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matcher(t))},x.findWhere=function(e,t){return x.find(e,x.matcher(t))},x.max=function(e,t,i){var s,o,n=-(1/0),r=-(1/0);if(null==t&&null!=e){e=M(e)?e:x.values(e);for(var a=0,l=e.length;l>a;a++)s=e[a],s>n&&(n=s)}else t=k(t,i),x.each(e,function(e,i,s){o=t(e,i,s),(o>r||o===-(1/0)&&n===-(1/0))&&(n=e,r=o)});return n},x.min=function(e,t,i){var s,o,n=1/0,r=1/0;if(null==t&&null!=e){e=M(e)?e:x.values(e);for(var a=0,l=e.length;l>a;a++)s=e[a],n>s&&(n=s)}else t=k(t,i),x.each(e,function(e,i,s){o=t(e,i,s),(r>o||o===1/0&&n===1/0)&&(n=e,r=o)});return n},x.shuffle=function(e){for(var t,i=M(e)?e:x.values(e),s=i.length,o=Array(s),n=0;s>n;n++)t=x.random(0,n),t!==n&&(o[n]=o[t]),o[t]=i[n];return o},x.sample=function(e,t,i){return null==t||i?(M(e)||(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))},x.sortBy=function(e,t,i){return t=k(t,i),x.pluck(x.map(e,function(e,i,s){return{value:e,index:i,criteria:t(e,i,s)}}).sort(function(e,t){var i=e.criteria,s=t.criteria;if(i!==s){if(i>s||void 0===i)return 1;if(s>i||void 0===s)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,i,s){var o={};return i=k(i,s),x.each(t,function(s,n){var r=i(s,n,t);e(o,s,r)}),o}};x.groupBy=I(function(e,t,i){x.has(e,i)?e[i].push(t):e[i]=[t]}),x.indexBy=I(function(e,t,i){e[i]=t}),x.countBy=I(function(e,t,i){x.has(e,i)?e[i]++:e[i]=1}),x.toArray=function(e){return e?x.isArray(e)?p.call(e):M(e)?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:M(e)?e.length:x.keys(e).length},x.partition=function(e,t,i){t=k(t,i);var s=[],o=[];return x.each(e,function(e,i,n){(t(e,i,n)?s:o).push(e)}),[s,o]},x.first=x.head=x.take=function(e,t,i){return null!=e?null==t||i?e[0]:x.initial(e,e.length-t):void 0},x.initial=function(e,t,i){return p.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},x.last=function(e,t,i){return null!=e?null==t||i?e[e.length-1]:x.rest(e,Math.max(0,e.length-t)):void 0},x.rest=x.tail=x.drop=function(e,t,i){return p.call(e,null==t||i?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,i,s){for(var o=[],n=0,r=s||0,a=j(e);a>r;r++){var l=e[r];if(M(l)&&(x.isArray(l)||x.isArguments(l))){t||(l=A(l,t,i));var d=0,h=l.length;for(o.length+=h;h>d;)o[n++]=l[d++]}else i||(o[n++]=l)}return o};x.flatten=function(e,t){return A(e,t,!1)},x.without=function(e){return x.difference(e,p.call(arguments,1))},x.uniq=x.unique=function(e,t,i,s){x.isBoolean(t)||(s=i,i=t,t=!1),null!=i&&(i=k(i,s));for(var o=[],n=[],r=0,a=j(e);a>r;r++){var l=e[r],d=i?i(l,r,e):l;t?(r&&n===d||o.push(l),n=d):i?x.contains(n,d)||(n.push(d),o.push(l)):x.contains(o,l)||o.push(l)}return o},x.union=function(){return x.uniq(A(arguments,!0,!0))},x.intersection=function(e){for(var t=[],i=arguments.length,s=0,o=j(e);o>s;s++){var n=e[s];if(!x.contains(t,n)){for(var r=1;i>r&&x.contains(arguments[r],n);r++);r===i&&t.push(n)}}return t},x.difference=function(e){var t=A(arguments,!0,!0,1);return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(e){for(var t=e&&x.max(e,j).length||0,i=Array(t),s=0;t>s;s++)i[s]=x.pluck(e,s);return i},x.object=function(e,t){for(var i={},s=0,o=j(e);o>s;s++)t?i[e[s]]=t[s]:i[e[s][0]]=e[s][1];return i},x.findIndex=o(1),x.findLastIndex=o(-1),x.sortedIndex=function(e,t,i,s){i=k(i,s,1);for(var o=i(t),n=0,r=j(e);r>n;){var a=Math.floor((n+r)/2);i(e[a])<o?n=a+1:r=a}return n},x.indexOf=n(1,x.findIndex,x.sortedIndex),x.lastIndexOf=n(-1,x.findLastIndex),x.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var s=Math.max(Math.ceil((t-e)/i),0),o=Array(s),n=0;s>n;n++,e+=i)o[n]=e;return o};var _=function(e,t,i,s,o){if(!(s instanceof t))return e.apply(i,o);var n=S(e.prototype),r=e.apply(n,o);return x.isObject(r)?r:n};x.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,p.call(arguments,1));if(!x.isFunction(e))throw new TypeError("Bind must be called on a function");var i=p.call(arguments,2),s=function(){return _(e,s,t,this,i.concat(p.call(arguments)))};return s},x.partial=function(e){var t=p.call(arguments,1),i=function(){for(var s=0,o=t.length,n=Array(o),r=0;o>r;r++)n[r]=t[r]===x?arguments[s++]:t[r];for(;s<arguments.length;)n.push(arguments[s++]);return _(e,i,this,this,n)};return i},x.bindAll=function(e){var t,i,s=arguments.length;if(1>=s)throw new Error("bindAll must be passed function names");for(t=1;s>t;t++)i=arguments[t],e[i]=x.bind(e[i],e);return e},x.memoize=function(e,t){var i=function(s){var o=i.cache,n=""+(t?t.apply(this,arguments):s);return x.has(o,n)||(o[n]=e.apply(this,arguments)),o[n]};return i.cache={},i},x.delay=function(e,t){var i=p.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(e,t,i){var s,o,n,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:x.now(),r=null,n=e.apply(s,o),r||(s=o=null)};return function(){var d=x.now();a||i.leading!==!1||(a=d);var h=t-(d-a);return s=this,o=arguments,0>=h||h>t?(r&&(clearTimeout(r),r=null),a=d,n=e.apply(s,o),r||(s=o=null)):r||i.trailing===!1||(r=setTimeout(l,h)),n}},x.debounce=function(e,t,i){var s,o,n,r,a,l=function(){var d=x.now()-r;t>d&&d>=0?s=setTimeout(l,t-d):(s=null,i||(a=e.apply(n,o),s||(n=o=null)))};return function(){n=this,o=arguments,r=x.now();var d=i&&!s;return s||(s=setTimeout(l,t)),d&&(a=e.apply(n,o),n=o=null),a}},x.wrap=function(e,t){return x.partial(t,e)},x.negate=function(e){return function(){return!e.apply(this,arguments)}},x.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,s=e[t].apply(this,arguments);i--;)s=e[i].call(this,s);return s}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},x.once=x.partial(x.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(e){if(!x.isObject(e))return[];if(v)return v(e);var t=[];for(var i in e)x.has(e,i)&&t.push(i);return O&&r(e,t),t},x.allKeys=function(e){if(!x.isObject(e))return[];var t=[];for(var i in e)t.push(i);return O&&r(e,t),t},x.values=function(e){for(var t=x.keys(e),i=t.length,s=Array(i),o=0;i>o;o++)s[o]=e[t[o]];return s},x.mapObject=function(e,t,i){t=k(t,i);for(var s,o=x.keys(e),n=o.length,r={},a=0;n>a;a++)s=o[a],r[s]=t(e[s],s,e);return r},x.pairs=function(e){for(var t=x.keys(e),i=t.length,s=Array(i),o=0;i>o;o++)s[o]=[t[o],e[t[o]]];return s},x.invert=function(e){for(var t={},i=x.keys(e),s=0,o=i.length;o>s;s++)t[e[i[s]]]=i[s];return t},x.functions=x.methods=function(e){var t=[];for(var i in e)x.isFunction(e[i])&&t.push(i);return t.sort()},x.extend=T(x.allKeys),x.extendOwn=x.assign=T(x.keys),x.findKey=function(e,t,i){t=k(t,i);for(var s,o=x.keys(e),n=0,r=o.length;r>n;n++)if(s=o[n],t(e[s],s,e))return s},x.pick=function(e,t,i){var s,o,n={},r=e;if(null==r)return n;x.isFunction(t)?(o=x.allKeys(r),s=$(t,i)):(o=A(arguments,!1,!1,1),s=function(e,t,i){return t in i},r=Object(r));for(var a=0,l=o.length;l>a;a++){var d=o[a],h=r[d];s(h,d,r)&&(n[d]=h)}return n},x.omit=function(e,t,i){if(x.isFunction(t))t=x.negate(t);else{var s=x.map(A(arguments,!1,!1,1),String);t=function(e,t){return!x.contains(s,t)}}return x.pick(e,t,i)},x.defaults=T(x.allKeys,!0),x.create=function(e,t){var i=S(e);return t&&x.extendOwn(i,t),i},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isMatch=function(e,t){var i=x.keys(t),s=i.length;if(null==e)return!s;for(var o=Object(e),n=0;s>n;n++){var r=i[n];if(t[r]!==o[r]||!(r in o))return!1}return!0};var z=function(e,t,i,s){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var o=u.call(e);if(o!==u.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var n="[object Array]"===o;if(!n){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,a=t.constructor;if(r!==a&&!(x.isFunction(r)&&r instanceof r&&x.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],s=s||[];for(var l=i.length;l--;)if(i[l]===e)return s[l]===t;if(i.push(e),s.push(t),n){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!z(e[l],t[l],i,s))return!1}else{var d,h=x.keys(e);if(l=h.length,x.keys(t).length!==l)return!1;for(;l--;)if(d=h[l],!x.has(t,d)||!z(e[d],t[d],i,s))return!1}return i.pop(),s.pop(),!0};x.isEqual=function(e,t){return z(e,t)},x.isEmpty=function(e){return null==e?!0:M(e)&&(x.isArray(e)||x.isString(e)||x.isArguments(e))?0===e.length:0===x.keys(e).length},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=m||function(e){return"[object Array]"===u.call(e)},x.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){x["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return x.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(e){return"function"==typeof e||!1}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!==+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return null!=e&&f.call(e,t)},x.noConflict=function(){return a._=l,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.noop=function(){},x.property=C,x.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},x.matcher=x.matches=function(e){return e=x.extendOwn({},e),function(t){return x.isMatch(t,e)}},x.times=function(e,t,i){var s=Array(Math.max(0,e));t=$(t,i,1);for(var o=0;e>o;o++)s[o]=t(o);return s},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=x.invert(R),L=function(e){var t=function(t){return e[t]},i="(?:"+x.keys(e).join("|")+")",s=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,s.test(e)?e.replace(o,t):e}};x.escape=L(R),x.unescape=L(F),x.result=function(e,t,i){var s=null==e?void 0:e[t];return void 0===s&&(s=i),x.isFunction(s)?s.call(e):s};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,N=function(e){return"\\"+V[e]};x.template=function(e,t,i){!t&&i&&(t=i),t=x.defaults({},t,x.templateSettings);var s=RegExp([(t.escape||E).source,(t.interpolate||E).source,(t.evaluate||E).source].join("|")+"|$","g"),o=0,n="__p+='";e.replace(s,function(t,i,s,r,a){return n+=e.slice(o,a).replace(U,N),o=a+t.length,i?n+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":s?n+="'+\n((__t=("+s+"))==null?'':__t)+\n'":r&&(n+="';\n"+r+"\n__p+='"),t}),n+="';\n",t.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+n+"return __p;\n";try{var r=new Function(t.variable||"obj","_",n)}catch(a){throw a.source=n,a}var l=function(e){return r.call(this,e,x)},d=t.variable||"obj";return l.source="function("+d+"){\n"+n+"}",l},x.chain=function(e){var t=x(e);return t._chain=!0,t};var W=function(e,t){return e._chain?x(t).chain():t};x.mixin=function(e){x.each(x.functions(e),function(t){var i=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return g.apply(e,arguments),W(this,i.apply(x,e))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=d[e];x.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],W(this,i)}}),x.each(["concat","join","slice"],function(e){var t=d[e];x.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof e&&e.amd&&e("underscore",[],function(){return x})}).call(this)},{}],20:[function(e,t,i){function s(e){var t={},i=c.keyPathSeparator;for(var o in e){var n=e[o];if(!n||n.constructor!==Object&&n.constructor!==Array||a.isEmpty(n))t[o]=n;else{var r=s(n);for(var l in r){var d=r[l];t[o+i+l]=d}}}return t}function o(e,t,i){for(var s=c.keyPathSeparator,o=t?t.split(s):[],n=e,r=0,l=o.length;l>r;r++){if(i&&!a.has(n,o[r]))return!1;if(n=n[o[r]],null==n&&l-1>r&&(n={}),"undefined"==typeof n)return i?!0:n}return i?!0:n}function n(e,t,i,s){s=s||{};for(var o=c.keyPathSeparator,n=t?t.split(o):[],r=e,l=0,d=n.length;d>l&&void 0!==r;l++){var h=n[l];if(l===d-1)s.unset?delete r[h]:r[h]=i;else{if("undefined"==typeof r[h]||!a.isObject(r[h])){if(s.unset)return void delete r[h];var g=n[l+1];r[h]=/^\d+$/.test(g)?[]:{}}r=r[h]}}}function r(e,t){n(e,t,null,{unset:!0})}try{var a=e("underscore")}catch(l){var a=window._}try{var d=e("backbone")}catch(l){var d=window.Backbone}var h=e("lodash.merge"),c=d.Model.extend({constructor:function(e,t){var i=e||{};this.cid=a.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),i=h({},a.result(this,"defaults"),i),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return h({},this.attributes)},get:function(e){return o(this.attributes,e)},set:function(e,t,i){var l,d,g,p,u,f,m,v;if(null==e)return this;if("object"==typeof e?(d=e,i=t||{}):(d={})[e]=t,i||(i={}),!this._validate(d,i))return!1;g=i.unset,u=i.silent,p=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=h({},this.attributes),this.changed={}),v=this.attributes,m=this._previousAttributes,this.idAttribute in d&&(this.id=d[this.idAttribute]),d=s(d);for(l in d)t=d[l],a.isEqual(o(v,l),t)||p.push(l),a.isEqual(o(m,l),t)?r(this.changed,l):n(this.changed,l,t),g?r(v,l):n(v,l,t);if(!u){p.length&&(this._pending=!0);for(var b=c.keyPathSeparator,y={},w=0,x=p.length;x>w;w++){var e=p[w];y.hasOwnProperty(e)&&y[e]||(y[e]=!0,this.trigger("change:"+e,this,o(v,e),i));for(var $=e.split(b),k=$.length-1;k>0;k--){var T=$.slice(0,k).join(b),S=T+b+"*";y.hasOwnProperty(S)&&y[S]||(y[S]=!0,this.trigger("change:"+S,this,o(v,T),i)),y.hasOwnProperty(T)&&y[T]||(y[T]=!0,this.trigger("change:"+T,this,o(v,T),i))}}}if(f)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},clear:function(e){var t={},i=s(this.attributes);for(var o in i)t[o]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):void 0!==o(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?s(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes;e=s(e),t=s(t);var i,o=!1;for(var n in e)a.isEqual(t[n],i=e[n])||((o||(o={}))[n]=i);return o},previous:function(e){return null!=e&&this._previousAttributes?o(this._previousAttributes,e):null},previousAttributes:function(){return h({},this._previousAttributes)}});c.keyPathSeparator=".",t.exports=c},{backbone:"backbone","lodash.merge":2,underscore:19}],21:[function(t,i,s){!function(i,o){if("function"==typeof e&&e.amd)e(["underscore","backbone"],function(e,t){o(e,t)});else if("undefined"!=typeof s&&"function"==typeof t){var n=t("underscore"),r=t("backbone");o(n,r)}else o(i._,i.Backbone)}(this,function(e,t){t.Model.extend=t.Collection.extend=t.Router.extend=t.View.extend=function(e,t){var i=r(this,e,t);return i.extend=this.extend,i};var i=function(e){throw"Super does not implement this method: "+e},s=/\b_super\b/,o=function(e,t,s){var o=function(){var o=this._super;this._super=e[t]||i(t);var n;try{n=s.apply(this,arguments)}finally{this._super=o}return n};for(var n in s)o[n]=s[n],delete s[n];return o},n=function(){},r=function(t,i,r){var a,l=t.prototype;if(a=i&&i.hasOwnProperty("constructor")?i.constructor:function(){return t.apply(this,arguments)},e.extend(a,t,r),n.prototype=l,a.prototype=new n,i){e.extend(a.prototype,i);for(var d in i)"function"==typeof i[d]&&s.test(i[d])&&(a.prototype[d]=o(l,d,i[d]))}return r&&e.extend(a,r),a.prototype.constructor=a,a.__super__=l,a};return r})},{backbone:"backbone",underscore:52}],22:[function(e,t,i){(function(){var t,s,o,n,r,a;a=e("./protocol"),n=a.Parser,s=a.PROTOCOL_6,o=a.PROTOCOL_7,r="2.2.2",i.Connector=t=function(){function e(e,t,i,s){this.options=e,this.WebSocket=t,this.Timer=i,this.handlers=s,this._uri="ws"+(this.options.https?"s":"")+"://"+this.options.host+":"+this.options.port+"/livereload",this._nextDelay=this.options.mindelay,this._connectionDesired=!1,this.protocol=0,this.protocolParser=new n({connected:function(e){return function(t){return e.protocol=t,e._handshakeTimeout.stop(),e._nextDelay=e.options.mindelay,e._disconnectionReason="broken",e.handlers.connected(t)}}(this),error:function(e){return function(t){return e.handlers.error(t),e._closeOnError()}}(this),message:function(e){return function(t){return e.handlers.message(t)}}(this)}),this._handshakeTimeout=new i(function(e){return function(){return e._isSocketConnected()?(e._disconnectionReason="handshake-timeout",e.socket.close()):void 0}}(this)),this._reconnectTimer=new i(function(e){return function(){return e._connectionDesired?e.connect():void 0}}(this)),this.connect()}return e.prototype._isSocketConnected=function(){return this.socket&&this.socket.readyState===this.WebSocket.OPEN},e.prototype.connect=function(){return this._connectionDesired=!0,
this._isSocketConnected()?void 0:(this._reconnectTimer.stop(),this._disconnectionReason="cannot-connect",this.protocolParser.reset(),this.handlers.connecting(),this.socket=new this.WebSocket(this._uri),this.socket.onopen=function(e){return function(t){return e._onopen(t)}}(this),this.socket.onclose=function(e){return function(t){return e._onclose(t)}}(this),this.socket.onmessage=function(e){return function(t){return e._onmessage(t)}}(this),this.socket.onerror=function(e){return function(t){return e._onerror(t)}}(this))},e.prototype.disconnect=function(){return this._connectionDesired=!1,this._reconnectTimer.stop(),this._isSocketConnected()?(this._disconnectionReason="manual",this.socket.close()):void 0},e.prototype._scheduleReconnection=function(){return this._connectionDesired?this._reconnectTimer.running?void 0:(this._reconnectTimer.start(this._nextDelay),this._nextDelay=Math.min(this.options.maxdelay,2*this._nextDelay)):void 0},e.prototype.sendCommand=function(e){return null!=this.protocol?this._sendCommand(e):void 0},e.prototype._sendCommand=function(e){return this.socket.send(JSON.stringify(e))},e.prototype._closeOnError=function(){return this._handshakeTimeout.stop(),this._disconnectionReason="error",this.socket.close()},e.prototype._onopen=function(e){var t;return this.handlers.socketConnected(),this._disconnectionReason="handshake-failed",t={command:"hello",protocols:[s,o]},t.ver=r,this.options.ext&&(t.ext=this.options.ext),this.options.extver&&(t.extver=this.options.extver),this.options.snipver&&(t.snipver=this.options.snipver),this._sendCommand(t),this._handshakeTimeout.start(this.options.handshake_timeout)},e.prototype._onclose=function(e){return this.protocol=0,this.handlers.disconnected(this._disconnectionReason,this._nextDelay),this._scheduleReconnection()},e.prototype._onerror=function(e){},e.prototype._onmessage=function(e){return this.protocolParser.process(e.data)},e}()}).call(this)},{"./protocol":27}],23:[function(e,t,i){(function(){var e;e={bind:function(e,t,i){if(e.addEventListener)return e.addEventListener(t,i,!1);if(e.attachEvent)return e[t]=1,e.attachEvent("onpropertychange",function(e){return e.propertyName===t?i():void 0});throw new Error("Attempt to attach custom event "+t+" to something which isn't a DOMElement")},fire:function(e,t){var i;if(e.addEventListener)return i=document.createEvent("HTMLEvents"),i.initEvent(t,!0,!0),document.dispatchEvent(i);if(!e.attachEvent)throw new Error("Attempt to fire custom event "+t+" on something which isn't a DOMElement");return e[t]?e[t]++:void 0}},i.bind=e.bind,i.fire=e.fire}).call(this)},{}],24:[function(e,t,i){(function(){var e;t.exports=e=function(){function e(e,t){this.window=e,this.host=t}return e.identifier="less",e.version="1.0",e.prototype.reload=function(e,t){if(this.window.less&&this.window.less.refresh){if(e.match(/\.less$/i))return this.reloadLess(e);if(t.originalPath.match(/\.less$/i))return this.reloadLess(t.originalPath)}return!1},e.prototype.reloadLess=function(e){var t,i,s,o;if(i=function(){var e,i,s,o;for(s=document.getElementsByTagName("link"),o=[],e=0,i=s.length;i>e;e++)t=s[e],(t.href&&t.rel.match(/^stylesheet\/less$/i)||t.rel.match(/stylesheet/i)&&t.type.match(/^text\/(x-)?less$/i))&&o.push(t);return o}(),0===i.length)return!1;for(s=0,o=i.length;o>s;s++)t=i[s],t.href=this.host.generateCacheBustUrl(t.href);return this.host.console.log("LiveReload is asking LESS to recompile all stylesheets"),this.window.less.refresh(!0),!0},e.prototype.analyze=function(){return{disable:!(!this.window.less||!this.window.less.refresh)}},e}()}).call(this)},{}],25:[function(e,t,i){(function(){var t,s,o,n,r,a={}.hasOwnProperty;t=e("./connector").Connector,r=e("./timer").Timer,o=e("./options").Options,n=e("./reloader").Reloader,i.LiveReload=s=function(){function e(e){var i,s,l;if(this.window=e,this.listeners={},this.plugins=[],this.pluginIdentifiers={},this.console=this.window.console&&this.window.console.log&&this.window.console.error?this.window.location.href.match(/LR-verbose/)?this.window.console:{log:function(){},error:this.window.console.error.bind(this.window.console)}:{log:function(){},error:function(){}},!(this.WebSocket=this.window.WebSocket||this.window.MozWebSocket))return void this.console.error("LiveReload disabled because the browser does not seem to support web sockets");if("LiveReloadOptions"in e){this.options=new o,l=e.LiveReloadOptions;for(i in l)a.call(l,i)&&(s=l[i],this.options.set(i,s))}else if(this.options=o.extract(this.window.document),!this.options)return void this.console.error("LiveReload disabled because it could not find its own <SCRIPT> tag");this.reloader=new n(this.window,this.console,r),this.connector=new t(this.options,this.WebSocket,r,{connecting:function(e){return function(){}}(this),socketConnected:function(e){return function(){}}(this),connected:function(e){return function(t){var i;return"function"==typeof(i=e.listeners).connect&&i.connect(),e.log("LiveReload is connected to "+e.options.host+":"+e.options.port+" (protocol v"+t+")."),e.analyze()}}(this),error:function(e){return function(e){if(e instanceof ProtocolError){if("undefined"!=typeof console&&null!==console)return console.log(""+e.message+".")}else if("undefined"!=typeof console&&null!==console)return console.log("LiveReload internal error: "+e.message)}}(this),disconnected:function(e){return function(t,i){var s;switch("function"==typeof(s=e.listeners).disconnect&&s.disconnect(),t){case"cannot-connect":return e.log("LiveReload cannot connect to "+e.options.host+":"+e.options.port+", will retry in "+i+" sec.");case"broken":return e.log("LiveReload disconnected from "+e.options.host+":"+e.options.port+", reconnecting in "+i+" sec.");case"handshake-timeout":return e.log("LiveReload cannot connect to "+e.options.host+":"+e.options.port+" (handshake timeout), will retry in "+i+" sec.");case"handshake-failed":return e.log("LiveReload cannot connect to "+e.options.host+":"+e.options.port+" (handshake failed), will retry in "+i+" sec.");case"manual":break;case"error":break;default:return e.log("LiveReload disconnected from "+e.options.host+":"+e.options.port+" ("+t+"), reconnecting in "+i+" sec.")}}}(this),message:function(e){return function(t){switch(t.command){case"reload":return e.performReload(t);case"alert":return e.performAlert(t)}}}(this)}),this.initialized=!0}return e.prototype.on=function(e,t){return this.listeners[e]=t},e.prototype.log=function(e){return this.console.log(""+e)},e.prototype.performReload=function(e){var t,i;return this.log("LiveReload received reload request: "+JSON.stringify(e,null,2)),this.reloader.reload(e.path,{liveCSS:null!=(t=e.liveCSS)?t:!0,liveImg:null!=(i=e.liveImg)?i:!0,originalPath:e.originalPath||"",overrideURL:e.overrideURL||"",serverURL:"http://"+this.options.host+":"+this.options.port})},e.prototype.performAlert=function(e){return alert(e.message)},e.prototype.shutDown=function(){var e;if(this.initialized)return this.connector.disconnect(),this.log("LiveReload disconnected."),"function"==typeof(e=this.listeners).shutdown?e.shutdown():void 0},e.prototype.hasPlugin=function(e){return!!this.pluginIdentifiers[e]},e.prototype.addPlugin=function(e){var t;this.initialized&&(this.hasPlugin(e.identifier)||(this.pluginIdentifiers[e.identifier]=!0,t=new e(this.window,{_livereload:this,_reloader:this.reloader,_connector:this.connector,console:this.console,Timer:r,generateCacheBustUrl:function(e){return function(t){return e.reloader.generateCacheBustUrl(t)}}(this)}),this.plugins.push(t),this.reloader.addPlugin(t)))},e.prototype.analyze=function(){var e,t,i,s,o,n;if(this.initialized&&this.connector.protocol>=7){for(i={},n=this.plugins,s=0,o=n.length;o>s;s++)e=n[s],i[e.constructor.identifier]=t=("function"==typeof e.analyze?e.analyze():void 0)||{},t.version=e.constructor.version;this.connector.sendCommand({command:"info",plugins:i,url:this.window.location.href})}},e}()}).call(this)},{"./connector":22,"./options":26,"./reloader":28,"./timer":30}],26:[function(e,t,i){(function(){var e;i.Options=e=function(){function e(){this.https=!1,this.host=null,this.port=35729,this.snipver=null,this.ext=null,this.extver=null,this.mindelay=1e3,this.maxdelay=6e4,this.handshake_timeout=5e3}return e.prototype.set=function(e,t){return"undefined"!=typeof t?(isNaN(+t)||(t=+t),this[e]=t):void 0},e}(),e.extract=function(t){var i,s,o,n,r,a,l,d,h,c,g,p,u;for(p=t.getElementsByTagName("script"),d=0,c=p.length;c>d;d++)if(i=p[d],(l=i.src)&&(o=l.match(/^[^:]+:\/\/(.*)\/z?livereload\.js(?:\?(.*))?$/))){if(r=new e,r.https=0===l.indexOf("https"),(n=o[1].match(/^([^\/:]+)(?::(\d+))?$/))&&(r.host=n[1],n[2]&&(r.port=parseInt(n[2],10))),o[2])for(u=o[2].split("&"),h=0,g=u.length;g>h;h++)a=u[h],(s=a.split("=")).length>1&&r.set(s[0].replace(/-/g,"_"),s.slice(1).join("="));return r}return null}}).call(this)},{}],27:[function(e,t,i){(function(){var e,t,s,o,n=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};i.PROTOCOL_6=e="http://livereload.com/protocols/official-6",i.PROTOCOL_7=t="http://livereload.com/protocols/official-7",i.ProtocolError=o=function(){function e(e,t){this.message="LiveReload protocol error ("+e+') after receiving data: "'+t+'".'}return e}(),i.Parser=s=function(){function i(e){this.handlers=e,this.reset()}return i.prototype.reset=function(){return this.protocol=null},i.prototype.process=function(i){var s,r,a,l,d;try{if(null==this.protocol){if(i.match(/^!!ver:([\d.]+)$/))this.protocol=6;else if(a=this._parseMessage(i,["hello"])){if(!a.protocols.length)throw new o("no protocols specified in handshake message");if(n.call(a.protocols,t)>=0)this.protocol=7;else{if(!(n.call(a.protocols,e)>=0))throw new o("no supported protocols found");this.protocol=6}}return this.handlers.connected(this.protocol)}if(6===this.protocol){if(a=JSON.parse(i),!a.length)throw new o("protocol 6 messages must be arrays");if(s=a[0],l=a[1],"refresh"!==s)throw new o("unknown protocol 6 command");return this.handlers.message({command:"reload",path:l.path,liveCSS:null!=(d=l.apply_css_live)?d:!0})}return a=this._parseMessage(i,["reload","alert"]),this.handlers.message(a)}catch(h){if(r=h,r instanceof o)return this.handlers.error(r);throw r}},i.prototype._parseMessage=function(e,t){var i,s,r;try{s=JSON.parse(e)}catch(a){throw i=a,new o("unparsable JSON",e)}if(!s.command)throw new o('missing "command" key',e);if(r=s.command,n.call(t,r)<0)throw new o("invalid command '"+s.command+"', only valid commands are: "+t.join(", ")+")",e);return s},i}()}).call(this)},{}],28:[function(e,t,i){(function(){var e,t,s,o,n,r,a;a=function(e){var t,i,s;return(i=e.indexOf("#"))>=0?(t=e.slice(i),e=e.slice(0,i)):t="",(i=e.indexOf("?"))>=0?(s=e.slice(i),e=e.slice(0,i)):s="",{url:e,params:s,hash:t}},o=function(e){var t;return e=a(e).url,t=0===e.indexOf("file://")?e.replace(/^file:\/\/(localhost)?/,""):e.replace(/^([^:]+:)?\/\/([^:\/]+)(:\d*)?\//,"/"),decodeURIComponent(t)},r=function(e,t,i){var o,n,r,a,l;for(o={score:0},a=0,l=t.length;l>a;a++)n=t[a],r=s(e,i(n)),r>o.score&&(o={object:n,score:r});return o.score>0?o:null},s=function(e,t){var i,s,o,n;if(e=e.replace(/^\/+/,"").toLowerCase(),t=t.replace(/^\/+/,"").toLowerCase(),e===t)return 1e4;for(i=e.split("/").reverse(),s=t.split("/").reverse(),n=Math.min(i.length,s.length),o=0;n>o&&i[o]===s[o];)++o;return o},n=function(e,t){return s(e,t)>0},e=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}],i.Reloader=t=function(){function t(e,t,i){this.window=e,this.console=t,this.Timer=i,this.document=this.window.document,this.importCacheWaitPeriod=200,this.plugins=[]}return t.prototype.addPlugin=function(e){return this.plugins.push(e)},t.prototype.analyze=function(e){return results},t.prototype.reload=function(e,t){var i,s,o,n,r;for(this.options=t,null==(s=this.options).stylesheetReloadTimeout&&(s.stylesheetReloadTimeout=15e3),r=this.plugins,o=0,n=r.length;n>o;o++)if(i=r[o],i.reload&&i.reload(e,t))return;return t.liveCSS&&e.match(/\.css$/i)&&this.reloadStylesheet(e)?void 0:t.liveImg&&e.match(/\.(jpe?g|png|gif)$/i)?void this.reloadImages(e):this.reloadPage()},t.prototype.reloadPage=function(){return this.window.document.location.reload()},t.prototype.reloadImages=function(t){var i,s,r,a,l,d,h,c,g,p,u,f,m,v,b,y,w,x;for(i=this.generateUniqueString(),v=this.document.images,d=0,p=v.length;p>d;d++)s=v[d],n(t,o(s.src))&&(s.src=this.generateCacheBustUrl(s.src,i));if(this.document.querySelectorAll)for(h=0,u=e.length;u>h;h++)for(b=e[h],r=b.selector,a=b.styleNames,y=this.document.querySelectorAll("[style*="+r+"]"),c=0,f=y.length;f>c;c++)s=y[c],this.reloadStyleImages(s.style,a,t,i);if(this.document.styleSheets){for(w=this.document.styleSheets,x=[],g=0,m=w.length;m>g;g++)l=w[g],x.push(this.reloadStylesheetImages(l,t,i));return x}},t.prototype.reloadStylesheetImages=function(t,i,s){var o,n,r,a,l,d,h,c;try{r=null!=t?t.cssRules:void 0}catch(g){o=g}if(r)for(l=0,h=r.length;h>l;l++)switch(n=r[l],n.type){case CSSRule.IMPORT_RULE:this.reloadStylesheetImages(n.styleSheet,i,s);break;case CSSRule.STYLE_RULE:for(d=0,c=e.length;c>d;d++)a=e[d].styleNames,this.reloadStyleImages(n.style,a,i,s);break;case CSSRule.MEDIA_RULE:this.reloadStylesheetImages(n,i,s)}},t.prototype.reloadStyleImages=function(e,t,i,s){var r,a,l,d,h;for(d=0,h=t.length;h>d;d++)a=t[d],l=e[a],"string"==typeof l&&(r=l.replace(/\burl\s*\(([^)]*)\)/,function(e){return function(t,r){return n(i,o(r))?"url("+e.generateCacheBustUrl(r,s)+")":t}}(this)),r!==l&&(e[a]=r))},t.prototype.reloadStylesheet=function(e){var t,i,s,n,a,l,d,h,c,g,p,u,f,m,v;for(s=function(){var e,t,s,o;for(s=this.document.getElementsByTagName("link"),o=[],e=0,t=s.length;t>e;e++)i=s[e],i.rel.match(/^stylesheet$/i)&&!i.__LiveReload_pendingRemoval&&o.push(i);return o}.call(this),t=[],m=this.document.getElementsByTagName("style"),l=0,g=m.length;g>l;l++)a=m[l],a.sheet&&this.collectImportedStylesheets(a,a.sheet,t);for(d=0,p=s.length;p>d;d++)i=s[d],this.collectImportedStylesheets(i,i.sheet,t);if(this.window.StyleFix&&this.document.querySelectorAll)for(v=this.document.querySelectorAll("style[data-href]"),h=0,u=v.length;u>h;h++)a=v[h],s.push(a);if(this.console.log("LiveReload found "+s.length+" LINKed stylesheets, "+t.length+" @imported stylesheets"),n=r(e,s.concat(t),function(e){return function(t){return o(e.linkHref(t))}}(this)))n.object.rule?(this.console.log("LiveReload is reloading imported stylesheet: "+n.object.href),this.reattachImportedRule(n.object)):(this.console.log("LiveReload is reloading stylesheet: "+this.linkHref(n.object)),this.reattachStylesheetLink(n.object));else for(this.console.log("LiveReload will reload all stylesheets because path '"+e+"' did not match any specific one"),c=0,f=s.length;f>c;c++)i=s[c],this.reattachStylesheetLink(i);return!0},t.prototype.collectImportedStylesheets=function(e,t,i){var s,o,n,r,a,l;try{r=null!=t?t.cssRules:void 0}catch(d){s=d}if(r&&r.length)for(o=a=0,l=r.length;l>a;o=++a)switch(n=r[o],n.type){case CSSRule.CHARSET_RULE:continue;case CSSRule.IMPORT_RULE:i.push({link:e,rule:n,index:o,href:n.href}),this.collectImportedStylesheets(e,n.styleSheet,i)}},t.prototype.waitUntilCssLoads=function(e,t){var i,s,o;return i=!1,s=function(e){return function(){return i?void 0:(i=!0,t())}}(this),e.onload=function(e){return function(){return e.console.log("LiveReload: the new stylesheet has finished loading"),e.knownToSupportCssOnLoad=!0,s()}}(this),this.knownToSupportCssOnLoad||(o=function(t){return function(){return e.sheet?(t.console.log("LiveReload is polling until the new CSS finishes loading..."),s()):t.Timer.start(50,o)}}(this))(),this.Timer.start(this.options.stylesheetReloadTimeout,s)},t.prototype.linkHref=function(e){return e.href||e.getAttribute("data-href")},t.prototype.reattachStylesheetLink=function(e){var t,i;if(!e.__LiveReload_pendingRemoval)return e.__LiveReload_pendingRemoval=!0,"STYLE"===e.tagName?(t=this.document.createElement("link"),t.rel="stylesheet",t.media=e.media,t.disabled=e.disabled):t=e.cloneNode(!1),t.href=this.generateCacheBustUrl(this.linkHref(e)),i=e.parentNode,i.lastChild===e?i.appendChild(t):i.insertBefore(t,e.nextSibling),this.waitUntilCssLoads(t,function(i){return function(){var s;return s=/AppleWebKit/.test(navigator.userAgent)?5:200,i.Timer.start(s,function(){var s;if(e.parentNode)return e.parentNode.removeChild(e),t.onreadystatechange=null,null!=(s=i.window.StyleFix)?s.link(t):void 0})}}(this))},t.prototype.reattachImportedRule=function(e){var t,i,s,o,n,r,a,l;return a=e.rule,i=e.index,s=e.link,r=a.parentStyleSheet,t=this.generateCacheBustUrl(a.href),o=a.media.length?[].join.call(a.media,", "):"",n='@import url("'+t+'") '+o+";",a.__LiveReload_newHref=t,l=this.document.createElement("link"),l.rel="stylesheet",l.href=t,l.__LiveReload_pendingRemoval=!0,s.parentNode&&s.parentNode.insertBefore(l,s),this.Timer.start(this.importCacheWaitPeriod,function(e){return function(){return l.parentNode&&l.parentNode.removeChild(l),a.__LiveReload_newHref===t?(r.insertRule(n,i),r.deleteRule(i+1),a=r.cssRules[i],a.__LiveReload_newHref=t,e.Timer.start(e.importCacheWaitPeriod,function(){return a.__LiveReload_newHref===t?(r.insertRule(n,i),r.deleteRule(i+1)):void 0})):void 0}}(this))},t.prototype.generateUniqueString=function(){return"livereload="+Date.now()},t.prototype.generateCacheBustUrl=function(e,t){var i,s,o,n,r;return null==t&&(t=this.generateUniqueString()),r=a(e),e=r.url,i=r.hash,s=r.params,this.options.overrideURL&&e.indexOf(this.options.serverURL)<0&&(o=e,e=this.options.serverURL+this.options.overrideURL+"?url="+encodeURIComponent(e),this.console.log("LiveReload is overriding source URL "+o+" with "+e)),n=s.replace(/(\?|&)livereload=(\d+)/,function(e,i){return""+i+t}),n===s&&(n=0===s.length?"?"+t:""+s+"&"+t),e+n+i},t}()}).call(this)},{}],29:[function(e,t,i){(function(){var t,i,s;t=e("./customevents"),i=window.LiveReload=new(e("./livereload").LiveReload)(window);for(s in window)s.match(/^LiveReloadPlugin/)&&i.addPlugin(window[s]);i.addPlugin(e("./less")),i.on("shutdown",function(){return delete window.LiveReload}),i.on("connect",function(){return t.fire(document,"LiveReloadConnect")}),i.on("disconnect",function(){return t.fire(document,"LiveReloadDisconnect")}),t.bind(document,"LiveReloadShutDown",function(){return i.shutDown()})}).call(this)},{"./customevents":23,"./less":24,"./livereload":25}],30:[function(e,t,i){(function(){var e;i.Timer=e=function(){function e(e){this.func=e,this.running=!1,this.id=null,this._handler=function(e){return function(){return e.running=!1,e.id=null,e.func()}}(this)}return e.prototype.start=function(e){return this.running&&clearTimeout(this.id),this.id=setTimeout(this._handler,e),this.running=!0},e.prototype.stop=function(){return this.running?(clearTimeout(this.id),this.running=!1,this.id=null):void 0},e}(),e.start=function(e,t){return setTimeout(t,e)}}).call(this)},{}],31:[function(e,t,i){"use strict";t.exports=e("./src/js/main")},{"./src/js/main":37}],32:[function(e,t,i){"use strict";function s(e,t){var i=e.className.split(" ");i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")}function o(e,t){var i=e.className.split(" "),s=i.indexOf(t);s>=0&&i.splice(s,1),e.className=i.join(" ")}i.add=function(e,t){e.classList?e.classList.add(t):s(e,t)},i.remove=function(e,t){e.classList?e.classList.remove(t):o(e,t)},i.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],33:[function(e,t,i){"use strict";function s(e,t){return window.getComputedStyle(e)[t]}function o(e,t,i){return"number"==typeof i&&(i=i.toString()+"px"),e.style[t]=i,e}function n(e,t){for(var i in t){var s=t[i];"number"==typeof s&&(s=s.toString()+"px"),e.style[i]=s}return e}var r={};r.e=function(e,t){var i=document.createElement(e);return i.className=t,i},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,i){return"object"==typeof t?n(e,t):"undefined"==typeof i?s(e,t):o(e,t,i)},r.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],34:[function(e,t,i){"use strict";var s=function(e){this.element=e,this.events={}};s.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},s.prototype.unbind=function(e,t){var i="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(s){return i&&s!==t?!0:(this.element.removeEventListener(e,s,!1),!1)},this)},s.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new s(e),this.eventElements.push(t)),t},o.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},o.prototype.unbind=function(e,t,i){this.eventElement(e).unbind(t,i)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,i){var s=this.eventElement(e),o=function(e){s.unbind(t,o),i(e)};s.bind(t,o)},t.exports=o},{}],35:[function(e,t,i){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],36:[function(e,t,i){"use strict";var s=e("./class"),o=e("./dom"),n=i.toInt=function(e){return parseInt(e,10)||0},r=i.clone=function(e){if(null===e)return null;if(e.constructor===Array)return e.map(r);if("object"==typeof e){var t={};for(var i in e)t[i]=r(e[i]);return t}return e};i.extend=function(e,t){var i=r(e);for(var s in t)i[s]=r(t[s]);return i},i.isEditable=function(e){return o.matches(e,"input,[contenteditable]")||o.matches(e,"select,[contenteditable]")||o.matches(e,"textarea,[contenteditable]")||o.matches(e,"button,[contenteditable]")},i.removePsClasses=function(e){for(var t=s.list(e),i=0;i<t.length;i++){var o=t[i];0===o.indexOf("ps-")&&s.remove(e,o)}},i.outerWidth=function(e){return n(o.css(e,"width"))+n(o.css(e,"paddingLeft"))+n(o.css(e,"paddingRight"))+n(o.css(e,"borderLeftWidth"))+n(o.css(e,"borderRightWidth"))},i.startScrolling=function(e,t){s.add(e,"ps-in-scrolling"),"undefined"!=typeof t?s.add(e,"ps-"+t):(s.add(e,"ps-x"),s.add(e,"ps-y"))},i.stopScrolling=function(e,t){s.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?s.remove(e,"ps-"+t):(s.remove(e,"ps-x"),s.remove(e,"ps-y"))},i.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":32,"./dom":33}],37:[function(e,t,i){"use strict";var s=e("./plugin/destroy"),o=e("./plugin/initialize"),n=e("./plugin/update");t.exports={initialize:o,update:n,destroy:s}},{"./plugin/destroy":39,"./plugin/initialize":47,"./plugin/update":51}],38:[function(e,t,i){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],39:[function(e,t,i){"use strict";var s=e("../lib/helper"),o=e("../lib/dom"),n=e("./instances");t.exports=function(e){var t=n.get(e);t&&(t.event.unbindAll(),o.remove(t.scrollbarX),o.remove(t.scrollbarY),o.remove(t.scrollbarXRail),o.remove(t.scrollbarYRail),s.removePsClasses(e),n.remove(e))}},{"../lib/dom":33,"../lib/helper":36,"./instances":48}],40:[function(e,t,i){"use strict";function s(e,t){function i(e){return e.getBoundingClientRect()}var s=function(e){e.stopPropagation()};t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",s),t.event.bind(t.scrollbarYRail,"click",function(s){var n=o.toInt(t.scrollbarYHeight/2),l=t.railYRatio*(s.pageY-window.pageYOffset-i(t.scrollbarYRail).top-n),d=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),h=l/d;0>h?h=0:h>1&&(h=1),a(e,"top",(t.contentHeight-t.containerHeight)*h),r(e),s.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",s),t.event.bind(t.scrollbarXRail,"click",function(s){var n=o.toInt(t.scrollbarXWidth/2),l=t.railXRatio*(s.pageX-window.pageXOffset-i(t.scrollbarXRail).left-n),d=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),h=l/d;0>h?h=0:h>1&&(h=1),a(e,"left",(t.contentWidth-t.containerWidth)*h-t.negativeScrollAdjustment),r(e),s.stopPropagation()})}var o=e("../../lib/helper"),n=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=n.get(e);s(e,t)}},{"../../lib/helper":36,"../instances":48,"../update-geometry":49,"../update-scroll":50}],41:[function(e,t,i){"use strict";function s(e,t){function i(i){var o=s+i*t.railXRatio,r=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);0>o?t.scrollbarXLeft=0:o>r?t.scrollbarXLeft=r:t.scrollbarXLeft=o;var a=n.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;d(e,"left",a)}var s=null,o=null,a=function(t){i(t.pageX-o),l(e),t.stopPropagation(),t.preventDefault()},h=function(){n.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarX,"mousedown",function(i){o=i.pageX,s=n.toInt(r.css(t.scrollbarX,"left"))*t.railXRatio,n.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",h),i.stopPropagation(),i.preventDefault()})}function o(e,t){function i(i){var o=s+i*t.railYRatio,r=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);0>o?t.scrollbarYTop=0:o>r?t.scrollbarYTop=r:t.scrollbarYTop=o;var a=n.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));d(e,"top",a)}var s=null,o=null,a=function(t){i(t.pageY-o),l(e),t.stopPropagation(),t.preventDefault()},h=function(){n.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarY,"mousedown",function(i){o=i.pageY,s=n.toInt(r.css(t.scrollbarY,"top"))*t.railYRatio,n.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",h),i.stopPropagation(),i.preventDefault()})}var n=e("../../lib/helper"),r=e("../../lib/dom"),a=e("../instances"),l=e("../update-geometry"),d=e("../update-scroll");t.exports=function(e){var t=a.get(e);s(e,t),o(e,t)}},{"../../lib/dom":33,"../../lib/helper":36,"../instances":48,"../update-geometry":49,"../update-scroll":50}],42:[function(e,t,i){"use strict";function s(e,t){function i(i,s){var o=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===o&&s>0||o>=t.contentHeight-t.containerHeight&&0>s)return!t.settings.wheelPropagation}var n=e.scrollLeft;if(0===s){if(!t.scrollbarXActive)return!1;if(0===n&&0>i||n>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}var s=!1;t.event.bind(e,"mouseenter",function(){s=!0}),t.event.bind(e,"mouseleave",function(){s=!1});var r=!1;t.event.bind(t.ownerDocument,"keydown",function(d){if(!d.isDefaultPrevented||!d.isDefaultPrevented()){var h=n.matches(t.scrollbarX,":focus")||n.matches(t.scrollbarY,":focus");if(s||h){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(o.isEditable(c))return}var g=0,p=0;switch(d.which){case 37:g=-30;break;case 38:p=30;break;case 39:g=30;break;case 40:p=-30;break;case 33:p=90;break;case 32:p=d.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=d.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:p=d.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-p),l(e,"left",e.scrollLeft+g),a(e),r=i(g,p),r&&d.preventDefault()}}})}var o=e("../../lib/helper"),n=e("../../lib/dom"),r=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=r.get(e);s(e,t)}},{"../../lib/dom":33,"../../lib/helper":36,"../instances":48,"../update-geometry":49,"../update-scroll":50}],43:[function(e,t,i){"use strict";function s(e,t){function i(i,s){var o=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===o&&s>0||o>=t.contentHeight-t.containerHeight&&0>s)return!t.settings.wheelPropagation}var n=e.scrollLeft;if(0===s){if(!t.scrollbarXActive)return!1;if(0===n&&0>i||n>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}function s(e){var t=e.deltaX,i=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof i||(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=e.wheelDelta),[t,i]}function o(t,i){var s=e.querySelector("textarea:hover, .ps-child:hover");if(s){if("TEXTAREA"!==s.tagName&&!window.getComputedStyle(s).overflow.match(/(scroll|auto)/))return!1;var o=s.scrollHeight-s.clientHeight;if(o>0&&!(0===s.scrollTop&&i>0||s.scrollTop===o&&0>i))return!0;var n=s.scrollLeft-s.clientWidth;if(n>0&&!(0===s.scrollLeft&&0>t||s.scrollLeft===n&&t>0))return!0}return!1}function a(a){var d=s(a),h=d[0],c=d[1];o(h,c)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?r(e,"top",e.scrollTop-c*t.settings.wheelSpeed):r(e,"top",e.scrollTop+h*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(h?r(e,"left",e.scrollLeft+h*t.settings.wheelSpeed):r(e,"left",e.scrollLeft-c*t.settings.wheelSpeed),l=!0):(r(e,"top",e.scrollTop-c*t.settings.wheelSpeed),r(e,"left",e.scrollLeft+h*t.settings.wheelSpeed)),n(e),l=l||i(h,c),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var o=e("../instances"),n=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){var t=o.get(e);s(e,t)}},{"../instances":48,"../update-geometry":49,"../update-scroll":50}],44:[function(e,t,i){"use strict";function s(e,t){t.event.bind(e,"scroll",function(){n(e)})}var o=e("../instances"),n=e("../update-geometry");t.exports=function(e){var t=o.get(e);s(e,t)}},{"../instances":48,"../update-geometry":49}],45:[function(e,t,i){"use strict";function s(e,t){function i(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function s(){d||(d=setInterval(function(){return n.get(e)?(a(e,"top",e.scrollTop+h.top),a(e,"left",e.scrollLeft+h.left),void r(e)):void clearInterval(d)},50))}function l(){d&&(clearInterval(d),d=null),o.stopScrolling(e)}var d=null,h={top:0,left:0},c=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(i())?c=!0:(c=!1,l())}),t.event.bind(window,"mouseup",function(){c&&(c=!1,l())}),t.event.bind(window,"mousemove",function(t){if(c){var i={x:t.pageX,y:t.pageY},n={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};i.x<n.left+3?(h.left=-5,o.startScrolling(e,"x")):i.x>n.right-3?(h.left=5,o.startScrolling(e,"x")):h.left=0,i.y<n.top+3?(n.top+3-i.y<5?h.top=-5:h.top=-20,o.startScrolling(e,"y")):i.y>n.bottom-3?(i.y-n.bottom+3<5?h.top=5:h.top=20,o.startScrolling(e,"y")):h.top=0,0===h.top&&0===h.left?l():s()}})}var o=e("../../lib/helper"),n=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");
t.exports=function(e){var t=n.get(e);s(e,t)}},{"../../lib/helper":36,"../instances":48,"../update-geometry":49,"../update-scroll":50}],46:[function(e,t,i){"use strict";function s(e,t,i,s){function o(i,s){var o=e.scrollTop,n=e.scrollLeft,r=Math.abs(i),a=Math.abs(s);if(a>r){if(0>s&&o===t.contentHeight-t.containerHeight||s>0&&0===o)return!t.settings.swipePropagation}else if(r>a&&(0>i&&n===t.contentWidth-t.containerWidth||i>0&&0===n))return!t.settings.swipePropagation;return!0}function l(t,i){a(e,"top",e.scrollTop-i),a(e,"left",e.scrollLeft-t),r(e)}function d(){w=!0}function h(){w=!1}function c(e){return e.targetTouches?e.targetTouches[0]:e}function g(e){return e.targetTouches&&1===e.targetTouches.length?!0:!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function p(e){if(g(e)){x=!0;var t=c(e);m.pageX=t.pageX,m.pageY=t.pageY,v=(new Date).getTime(),null!==y&&clearInterval(y),e.stopPropagation()}}function u(e){if(!x&&t.settings.swipePropagation&&p(e),!w&&x&&g(e)){var i=c(e),s={pageX:i.pageX,pageY:i.pageY},n=s.pageX-m.pageX,r=s.pageY-m.pageY;l(n,r),m=s;var a=(new Date).getTime(),d=a-v;d>0&&(b.x=n/d,b.y=r/d,v=a),o(n,r)&&(e.stopPropagation(),e.preventDefault())}}function f(){!w&&x&&(x=!1,clearInterval(y),y=setInterval(function(){return n.get(e)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(y):(l(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(y)},10))}var m={},v=0,b={},y=null,w=!1,x=!1;i&&(t.event.bind(window,"touchstart",d),t.event.bind(window,"touchend",h),t.event.bind(e,"touchstart",p),t.event.bind(e,"touchmove",u),t.event.bind(e,"touchend",f)),s&&(window.PointerEvent?(t.event.bind(window,"pointerdown",d),t.event.bind(window,"pointerup",h),t.event.bind(e,"pointerdown",p),t.event.bind(e,"pointermove",u),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",d),t.event.bind(window,"MSPointerUp",h),t.event.bind(e,"MSPointerDown",p),t.event.bind(e,"MSPointerMove",u),t.event.bind(e,"MSPointerUp",f)))}var o=e("../../lib/helper"),n=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){if(o.env.supportsTouch||o.env.supportsIePointer){var t=n.get(e);s(e,t,o.env.supportsTouch,o.env.supportsIePointer)}}},{"../../lib/helper":36,"../instances":48,"../update-geometry":49,"../update-scroll":50}],47:[function(e,t,i){"use strict";var s=e("../lib/helper"),o=e("../lib/class"),n=e("./instances"),r=e("./update-geometry"),a={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},o.add(e,"ps-container");var i=n.add(e);i.settings=s.extend(i.settings,t),o.add(e,"ps-theme-"+i.settings.theme),i.settings.handlers.forEach(function(t){a[t](e)}),l(e),r(e)}},{"../lib/class":32,"../lib/helper":36,"./handler/click-rail":40,"./handler/drag-scrollbar":41,"./handler/keyboard":42,"./handler/mouse-wheel":43,"./handler/native-scroll":44,"./handler/selection":45,"./handler/touch":46,"./instances":48,"./update-geometry":49}],48:[function(e,t,i){"use strict";function s(e){function t(){l.add(e,"ps-focus")}function i(){l.remove(e,"ps-focus")}var s=this;s.settings=a.clone(d),s.containerWidth=null,s.containerHeight=null,s.contentWidth=null,s.contentHeight=null,s.isRtl="rtl"===h.css(e,"direction"),s.isNegativeScroll=function(){var t=e.scrollLeft,i=null;return e.scrollLeft=-1,i=e.scrollLeft<0,e.scrollLeft=t,i}(),s.negativeScrollAdjustment=s.isNegativeScroll?e.scrollWidth-e.clientWidth:0,s.event=new c,s.ownerDocument=e.ownerDocument||document,s.scrollbarXRail=h.appendTo(h.e("div","ps-scrollbar-x-rail"),e),s.scrollbarX=h.appendTo(h.e("div","ps-scrollbar-x"),s.scrollbarXRail),s.scrollbarX.setAttribute("tabindex",0),s.event.bind(s.scrollbarX,"focus",t),s.event.bind(s.scrollbarX,"blur",i),s.scrollbarXActive=null,s.scrollbarXWidth=null,s.scrollbarXLeft=null,s.scrollbarXBottom=a.toInt(h.css(s.scrollbarXRail,"bottom")),s.isScrollbarXUsingBottom=s.scrollbarXBottom===s.scrollbarXBottom,s.scrollbarXTop=s.isScrollbarXUsingBottom?null:a.toInt(h.css(s.scrollbarXRail,"top")),s.railBorderXWidth=a.toInt(h.css(s.scrollbarXRail,"borderLeftWidth"))+a.toInt(h.css(s.scrollbarXRail,"borderRightWidth")),h.css(s.scrollbarXRail,"display","block"),s.railXMarginWidth=a.toInt(h.css(s.scrollbarXRail,"marginLeft"))+a.toInt(h.css(s.scrollbarXRail,"marginRight")),h.css(s.scrollbarXRail,"display",""),s.railXWidth=null,s.railXRatio=null,s.scrollbarYRail=h.appendTo(h.e("div","ps-scrollbar-y-rail"),e),s.scrollbarY=h.appendTo(h.e("div","ps-scrollbar-y"),s.scrollbarYRail),s.scrollbarY.setAttribute("tabindex",0),s.event.bind(s.scrollbarY,"focus",t),s.event.bind(s.scrollbarY,"blur",i),s.scrollbarYActive=null,s.scrollbarYHeight=null,s.scrollbarYTop=null,s.scrollbarYRight=a.toInt(h.css(s.scrollbarYRail,"right")),s.isScrollbarYUsingRight=s.scrollbarYRight===s.scrollbarYRight,s.scrollbarYLeft=s.isScrollbarYUsingRight?null:a.toInt(h.css(s.scrollbarYRail,"left")),s.scrollbarYOuterWidth=s.isRtl?a.outerWidth(s.scrollbarY):null,s.railBorderYWidth=a.toInt(h.css(s.scrollbarYRail,"borderTopWidth"))+a.toInt(h.css(s.scrollbarYRail,"borderBottomWidth")),h.css(s.scrollbarYRail,"display","block"),s.railYMarginHeight=a.toInt(h.css(s.scrollbarYRail,"marginTop"))+a.toInt(h.css(s.scrollbarYRail,"marginBottom")),h.css(s.scrollbarYRail,"display",""),s.railYHeight=null,s.railYRatio=null}function o(e){return e.getAttribute("data-ps-id")}function n(e,t){e.setAttribute("data-ps-id",t)}function r(e){e.removeAttribute("data-ps-id")}var a=e("../lib/helper"),l=e("../lib/class"),d=e("./default-setting"),h=e("../lib/dom"),c=e("../lib/event-manager"),g=e("../lib/guid"),p={};i.add=function(e){var t=g();return n(e,t),p[t]=new s(e),p[t]},i.remove=function(e){delete p[o(e)],r(e)},i.get=function(e){return p[o(e)]}},{"../lib/class":32,"../lib/dom":33,"../lib/event-manager":34,"../lib/guid":35,"../lib/helper":36,"./default-setting":38}],49:[function(e,t,i){"use strict";function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function o(e,t){var i={width:t.railXWidth};t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:i.left=e.scrollLeft,t.isScrollbarXUsingBottom?i.bottom=t.scrollbarXBottom-e.scrollTop:i.top=t.scrollbarXTop+e.scrollTop,a.css(t.scrollbarXRail,i);var s={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?s.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:s.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?s.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:s.left=t.scrollbarYLeft+e.scrollLeft,a.css(t.scrollbarYRail,s),a.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),a.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var n=e("../lib/helper"),r=e("../lib/class"),a=e("../lib/dom"),l=e("./instances"),d=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var i;e.contains(t.scrollbarXRail)||(i=a.queryChildren(e,".ps-scrollbar-x-rail"),i.length>0&&i.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(i=a.queryChildren(e,".ps-scrollbar-y-rail"),i.length>0&&i.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=s(t,n.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=n.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=s(t,n.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=n.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(e,t),t.scrollbarXActive?r.add(e,"ps-active-x"):(r.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,d(e,"left",0)),t.scrollbarYActive?r.add(e,"ps-active-y"):(r.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,d(e,"top",0))}},{"../lib/class":32,"../lib/dom":33,"../lib/helper":36,"./instances":48,"./update-scroll":50}],50:[function(e,t,i){"use strict";var s,o,n=e("./instances"),r=document.createEvent("Event"),a=document.createEvent("Event"),l=document.createEvent("Event"),d=document.createEvent("Event"),h=document.createEvent("Event"),c=document.createEvent("Event"),g=document.createEvent("Event"),p=document.createEvent("Event"),u=document.createEvent("Event"),f=document.createEvent("Event");r.initEvent("ps-scroll-up",!0,!0),a.initEvent("ps-scroll-down",!0,!0),l.initEvent("ps-scroll-left",!0,!0),d.initEvent("ps-scroll-right",!0,!0),h.initEvent("ps-scroll-y",!0,!0),c.initEvent("ps-scroll-x",!0,!0),g.initEvent("ps-x-reach-start",!0,!0),p.initEvent("ps-x-reach-end",!0,!0),u.initEvent("ps-y-reach-start",!0,!0),f.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,i){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof i)throw"You must provide a value to the update-scroll function";"top"===t&&0>=i&&(e.scrollTop=i=0,e.dispatchEvent(u)),"left"===t&&0>=i&&(e.scrollLeft=i=0,e.dispatchEvent(g));var m=n.get(e);"top"===t&&i>=m.contentHeight-m.containerHeight&&(i=m.contentHeight-m.containerHeight,i-e.scrollTop<=1?i=e.scrollTop:e.scrollTop=i,e.dispatchEvent(f)),"left"===t&&i>=m.contentWidth-m.containerWidth&&(i=m.contentWidth-m.containerWidth,i-e.scrollLeft<=1?i=e.scrollLeft:e.scrollLeft=i,e.dispatchEvent(p)),s||(s=e.scrollTop),o||(o=e.scrollLeft),"top"===t&&s>i&&e.dispatchEvent(r),"top"===t&&i>s&&e.dispatchEvent(a),"left"===t&&o>i&&e.dispatchEvent(l),"left"===t&&i>o&&e.dispatchEvent(d),"top"===t&&(e.scrollTop=s=i,e.dispatchEvent(h)),"left"===t&&(e.scrollLeft=o=i,e.dispatchEvent(c))}},{"./instances":48}],51:[function(e,t,i){"use strict";var s=e("../lib/helper"),o=e("../lib/dom"),n=e("./instances"),r=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=n.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,o.css(t.scrollbarXRail,"display","block"),o.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=s.toInt(o.css(t.scrollbarXRail,"marginLeft"))+s.toInt(o.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=s.toInt(o.css(t.scrollbarYRail,"marginTop"))+s.toInt(o.css(t.scrollbarYRail,"marginBottom")),o.css(t.scrollbarXRail,"display","none"),o.css(t.scrollbarYRail,"display","none"),r(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),o.css(t.scrollbarXRail,"display",""),o.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":33,"../lib/helper":36,"./instances":48,"./update-geometry":49,"./update-scroll":50}],52:[function(t,i,s){(function(){var t=this,o=t._,n={},r=Array.prototype,a=Object.prototype,l=Function.prototype,d=r.push,h=r.slice,c=r.concat,g=a.toString,p=a.hasOwnProperty,u=r.forEach,f=r.map,m=r.reduce,v=r.reduceRight,b=r.filter,y=r.every,w=r.some,x=r.indexOf,$=r.lastIndexOf,k=Array.isArray,T=Object.keys,S=l.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof s?("undefined"!=typeof i&&i.exports&&(s=i.exports=C),s._=C):t._=C,C.VERSION="1.6.0";var P=C.each=C.forEach=function(e,t,i){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,o=e.length;o>s;s++)if(t.call(i,e[s],s,e)===n)return}else for(var r=C.keys(e),s=0,o=r.length;o>s;s++)if(t.call(i,e[r[s]],r[s],e)===n)return;return e};C.map=C.collect=function(e,t,i){var s=[];return null==e?s:f&&e.map===f?e.map(t,i):(P(e,function(e,o,n){s.push(t.call(i,e,o,n))}),s)};var j="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,i,s){var o=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return s&&(t=C.bind(t,s)),o?e.reduce(t,i):e.reduce(t);if(P(e,function(e,n,r){o?i=t.call(s,i,e,n,r):(i=e,o=!0)}),!o)throw new TypeError(j);return i},C.reduceRight=C.foldr=function(e,t,i,s){var o=arguments.length>2;if(null==e&&(e=[]),v&&e.reduceRight===v)return s&&(t=C.bind(t,s)),o?e.reduceRight(t,i):e.reduceRight(t);var n=e.length;if(n!==+n){var r=C.keys(e);n=r.length}if(P(e,function(a,l,d){l=r?r[--n]:--n,o?i=t.call(s,i,e[l],l,d):(i=e[l],o=!0)}),!o)throw new TypeError(j);return i},C.find=C.detect=function(e,t,i){var s;return M(e,function(e,o,n){return t.call(i,e,o,n)?(s=e,!0):void 0}),s},C.filter=C.select=function(e,t,i){var s=[];return null==e?s:b&&e.filter===b?e.filter(t,i):(P(e,function(e,o,n){t.call(i,e,o,n)&&s.push(e)}),s)},C.reject=function(e,t,i){return C.filter(e,function(e,s,o){return!t.call(i,e,s,o)},i)},C.every=C.all=function(e,t,i){t||(t=C.identity);var s=!0;return null==e?s:y&&e.every===y?e.every(t,i):(P(e,function(e,o,r){return(s=s&&t.call(i,e,o,r))?void 0:n}),!!s)};var M=C.some=C.any=function(e,t,i){t||(t=C.identity);var s=!1;return null==e?s:w&&e.some===w?e.some(t,i):(P(e,function(e,o,r){return s||(s=t.call(i,e,o,r))?n:void 0}),!!s)};C.contains=C.include=function(e,t){return null==e?!1:x&&e.indexOf===x?-1!=e.indexOf(t):M(e,function(e){return e===t})},C.invoke=function(e,t){var i=h.call(arguments,2),s=C.isFunction(t);return C.map(e,function(e){return(s?t:e[t]).apply(e,i)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var s=-(1/0),o=-(1/0);return P(e,function(e,n,r){var a=t?t.call(i,e,n,r):e;a>o&&(s=e,o=a)}),s},C.min=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var s=1/0,o=1/0;return P(e,function(e,n,r){var a=t?t.call(i,e,n,r):e;o>a&&(s=e,o=a)}),s},C.shuffle=function(e){var t,i=0,s=[];return P(e,function(e){t=C.random(i++),s[i-1]=s[t],s[t]=e}),s},C.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var I=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,i){return t=I(t),C.pluck(C.map(e,function(e,s,o){return{value:e,index:s,criteria:t.call(i,e,s,o)}}).sort(function(e,t){var i=e.criteria,s=t.criteria;if(i!==s){if(i>s||void 0===i)return 1;if(s>i||void 0===s)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,i,s){var o={};return i=I(i),P(t,function(n,r){var a=i.call(s,n,r,t);e(o,a,n)}),o}};C.groupBy=A(function(e,t,i){C.has(e,t)?e[t].push(i):e[t]=[i]}),C.indexBy=A(function(e,t,i){e[t]=i}),C.countBy=A(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,i,s){i=I(i);for(var o=i.call(s,t),n=0,r=e.length;r>n;){var a=n+r>>>1;i.call(s,e[a])<o?n=a+1:r=a}return n},C.toArray=function(e){return e?C.isArray(e)?h.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,i){return null!=e?null==t||i?e[0]:0>t?[]:h.call(e,0,t):void 0},C.initial=function(e,t,i){return h.call(e,0,e.length-(null==t||i?1:t))},C.last=function(e,t,i){return null!=e?null==t||i?e[e.length-1]:h.call(e,Math.max(e.length-t,0)):void 0},C.rest=C.tail=C.drop=function(e,t,i){return h.call(e,null==t||i?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var _=function(e,t,i){return t&&C.every(e,C.isArray)?c.apply(i,e):(P(e,function(e){C.isArray(e)||C.isArguments(e)?t?d.apply(i,e):_(e,t,i):i.push(e)}),i)};C.flatten=function(e,t){return _(e,t,[])},C.without=function(e){return C.difference(e,h.call(arguments,1))},C.partition=function(e,t){var i=[],s=[];return P(e,function(e){(t(e)?i:s).push(e)}),[i,s]},C.uniq=C.unique=function(e,t,i,s){C.isFunction(t)&&(s=i,i=t,t=!1);var o=i?C.map(e,i,s):e,n=[],r=[];return P(o,function(i,s){(t?s&&r[r.length-1]===i:C.contains(r,i))||(r.push(i),n.push(e[s]))}),n},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=h.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=c.apply(r,h.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=C.pluck(arguments,""+i);return t},C.object=function(e,t){if(null==e)return{};for(var i={},s=0,o=e.length;o>s;s++)t?i[e[s]]=t[s]:i[e[s][0]]=e[s][1];return i},C.indexOf=function(e,t,i){if(null==e)return-1;var s=0,o=e.length;if(i){if("number"!=typeof i)return s=C.sortedIndex(e,t),e[s]===t?s:-1;s=0>i?Math.max(0,o+i):i}if(x&&e.indexOf===x)return e.indexOf(t,i);for(;o>s;s++)if(e[s]===t)return s;return-1},C.lastIndexOf=function(e,t,i){if(null==e)return-1;var s=null!=i;if($&&e.lastIndexOf===$)return s?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var o=s?i:e.length;o--;)if(e[o]===t)return o;return-1},C.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var s=Math.max(Math.ceil((t-e)/i),0),o=0,n=new Array(s);s>o;)n[o++]=e,e+=i;return n};var O=function(){};C.bind=function(e,t){var i,s;if(S&&e.bind===S)return S.apply(e,h.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=h.call(arguments,2),s=function(){if(!(this instanceof s))return e.apply(t,i.concat(h.call(arguments)));O.prototype=e.prototype;var o=new O;O.prototype=null;var n=e.apply(o,i.concat(h.call(arguments)));return Object(n)===n?n:o}},C.partial=function(e){var t=h.call(arguments,1);return function(){for(var i=0,s=t.slice(),o=0,n=s.length;n>o;o++)s[o]===C&&(s[o]=arguments[i++]);for(;i<arguments.length;)s.push(arguments[i++]);return e.apply(this,s)}},C.bindAll=function(e){var t=h.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return P(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var i={};return t||(t=C.identity),function(){var s=t.apply(this,arguments);return C.has(i,s)?i[s]:i[s]=e.apply(this,arguments)}},C.delay=function(e,t){var i=h.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(h.call(arguments,1)))},C.throttle=function(e,t,i){var s,o,n,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:C.now(),r=null,n=e.apply(s,o),s=o=null};return function(){var d=C.now();a||i.leading!==!1||(a=d);var h=t-(d-a);return s=this,o=arguments,0>=h?(clearTimeout(r),r=null,a=d,n=e.apply(s,o),s=o=null):r||i.trailing===!1||(r=setTimeout(l,h)),n}},C.debounce=function(e,t,i){var s,o,n,r,a,l=function(){var d=C.now()-r;t>d?s=setTimeout(l,t-d):(s=null,i||(a=e.apply(n,o),n=o=null))};return function(){n=this,o=arguments,r=C.now();var d=i&&!s;return s||(s=setTimeout(l,t)),d&&(a=e.apply(n,o),n=o=null),a}},C.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(T)return T(e);var t=[];for(var i in e)C.has(e,i)&&t.push(i);return t},C.values=function(e){for(var t=C.keys(e),i=t.length,s=new Array(i),o=0;i>o;o++)s[o]=e[t[o]];return s},C.pairs=function(e){for(var t=C.keys(e),i=t.length,s=new Array(i),o=0;i>o;o++)s[o]=[t[o],e[t[o]]];return s},C.invert=function(e){for(var t={},i=C.keys(e),s=0,o=i.length;o>s;s++)t[e[i[s]]]=i[s];return t},C.functions=C.methods=function(e){var t=[];for(var i in e)C.isFunction(e[i])&&t.push(i);return t.sort()},C.extend=function(e){return P(h.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},C.pick=function(e){var t={},i=c.apply(r,h.call(arguments,1));return P(i,function(i){i in e&&(t[i]=e[i])}),t},C.omit=function(e){var t={},i=c.apply(r,h.call(arguments,1));for(var s in e)C.contains(i,s)||(t[s]=e[s]);return t},C.defaults=function(e){return P(h.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var B=function(e,t,i,s){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var o=g.call(e);if(o!=g.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var n=i.length;n--;)if(i[n]==e)return s[n]==t;var r=e.constructor,a=t.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),s.push(t);var l=0,d=!0;if("[object Array]"==o){if(l=e.length,d=l==t.length)for(;l--&&(d=B(e[l],t[l],i,s)););}else{for(var h in e)if(C.has(e,h)&&(l++,!(d=C.has(t,h)&&B(e[h],t[h],i,s))))break;if(d){for(h in t)if(C.has(t,h)&&!l--)break;d=!l}}return i.pop(),s.pop(),d};C.isEqual=function(e,t){return B(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=k||function(e){return"[object Array]"==g.call(e)},C.isObject=function(e){return e===Object(e)},P(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return g.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==g.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return p.call(e,t)},C.noConflict=function(){return t._=o,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},C.times=function(e,t,i){for(var s=Array(Math.max(0,e)),o=0;e>o;o++)s[o]=t.call(i,o);return s},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var z={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};z.unescape=C.invert(z.escape);var R={escape:new RegExp("["+C.keys(z.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(z.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(R[e],function(t){return z[e][t]})}}),C.result=function(e,t){if(null!=e){var i=e[t];return C.isFunction(i)?i.call(e):i}},C.mixin=function(e){P(C.functions(e),function(t){var i=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),V.call(this,i.apply(C,e))}})};var F=0;C.uniqueId=function(e){var t=++F+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},E=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,i){var s;i=C.defaults({},i,C.templateSettings);var o=new RegExp([(i.escape||L).source,(i.interpolate||L).source,(i.evaluate||L).source].join("|")+"|$","g"),n=0,r="__p+='";e.replace(o,function(t,i,s,o,a){return r+=e.slice(n,a).replace(E,function(e){return"\\"+D[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),s&&(r+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),n=a+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{s=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(t)return s(t,C);var l=function(e){return s.call(this,e,C)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},C.chain=function(e){return C(e).chain()};var V=function(e){return this._chain?C(e).chain():e};C.mixin(C),P(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];C.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],V.call(this,i)}}),P(["concat","join","slice"],function(e){var t=r[e];C.prototype[e]=function(){return V.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof e&&e.amd&&e("underscore",[],function(){return C})}).call(this)},{}],53:[function(e,t,i){e("backbone-super");var s=e("backbone"),o=e("underscore"),n=e("./modules/slide/slideCollectionView.js"),r=e("./modules/slide/slideCollection.js"),a=e("./modules/appSettingsModel.js"),l=e("./modules/player/controlsView.js"),d=e("./modules/player/blockControlsView.js"),h=e("./modules/slide/slideView.js"),c=e("./modules/slide/slideThumbnailsView.js"),g=e("./modules/player/contentView.js"),p=e("./modules/player/linkView.js"),u=e("./modules/player/slideTransitionMixin.js"),f=e("./modules/player/slideTimelineMixin.js"),m=e("./modules/popup/loadingOverlayView.js"),v=e("./helpers/iframeMessageEvents.js"),b=e("./modules/mixin/view/blockSlideMixin.js");s.$=$;var y={};y.views={},y.models={},y.collections={},y.views.objects={text:e("./modules/objects/types/text/textView.js"),table:e("./modules/objects/types/table/tableView.js"),svg:e("./modules/objects/types/svg/svgView.js"),image:e("./modules/objects/types/image/imageView.js"),pdf:e("./modules/objects/types/pdf/pdfView.js"),audio:e("./modules/objects/types/audio/audioView.js"),video:e("./modules/objects/types/video/videoView.js"),iframe:e("./modules/objects/types/iframe/iframeView.js"),array:e("./modules/objects/types/array/arrayView.js"),clock:e("./modules/objects/types/clock/clockView.js"),countdown:e("./modules/objects/types/countdown/countdownView.js"),thermometer:e("./modules/objects/types/thermometer/thermoView.js"),radials:e("./modules/objects/types/radial/radialView.js"),progressbar:e("./modules/objects/types/progressbar/progressbarView.js"),chart:e("./modules/objects/types/charts/chartView.js"),map:e("./modules/objects/types/map/mapView.js"),infogrWidget:e("./modules/objects/types/infogr_widgets/widgetView.js")},y.models.objects={text:e("./modules/objects/types/text/textModel.js"),table:e("./modules/objects/types/table/tableModel.js"),svg:e("./modules/objects/types/svg/svgModel.js"),image:e("./modules/objects/types/image/imageModel.js"),pdf:e("./modules/objects/types/pdf/pdfModel.js"),audio:e("./modules/objects/types/audio/audioModel.js"),video:e("./modules/objects/types/video/videoModel.js"),chart:e("./modules/objects/types/charts/chartModel.js"),map:e("./modules/objects/types/map/mapModel.js"),iframe:e("./modules/objects/types/iframe/iframeModel.js"),array:e("./modules/objects/types/array/arrayModel.js"),clock:e("./modules/objects/types/clock/clockModel.js"),countdown:e("./modules/objects/types/countdown/countdownModel.js"),thermometer:e("./modules/objects/types/thermometer/thermoModel.js"),radials:e("./modules/objects/types/radial/radialModel.js"),progressbar:e("./modules/objects/types/progressbar/progressbarModel.js"),infogrWidget:e("./modules/objects/types/infogr_widgets/widgetModel.js")},y.init=function(){this.settings=new a(this.bootstrapData),1===this.settings.get("is_preview")&&this.settings.set("mode","preview"),this.settings.get("livereload")&&(window.LiveReloadOptions={host:"localhost"},e("livereload-js")),"embed"===y.settings.get("mode")&&parent.postMessage({title:y.settings.get("project_name"),event:"title",projectid:y.settings.get("project_url")},"*"),"blockinfographic"===this.bootstrapData.project_type?(this.views.blockControlsView=new d({}),o.extend(h.prototype,b.methods),h.prototype.initHooks.push(b.initHook)):(this.views.controlsView=new l({}),o.extend(h.prototype,u.methods),h.prototype.initHooks.push(u.initHook),o.extend(h.prototype,f.methods),h.prototype.initHooks.push(f.initHook),o.extend(n.prototype,e("./modules/player/slidesNavigationMixin.js"))),this.views.loadingOverlayView=new m({}),this.collections.slides=new r(this.settings.get("slidesData")),this.views.slidesView=new n({collection:this.collections.slides}),"Download"!==this.settings.get("project_type")&&"blockinfographic"!==this.settings.get("project_type")&&(this.views.slideThumbnailsView=new c({collection:this.collections.slides,slideWidth:this.settings.get("slideWidth"),slideHeight:this.settings.get("slideHeight")})),this.views.contentView=new g({}),this.views.linkView=new p({});var t=Number(window.location.hash.replace("#s",""));t=Math.max(t-1,0),o.isUndefined(this.views.slidesView.collection.filter(function(e){return"Layout"!==e.get("type")})[t])&&(t=0),this.trigger("addToJobQueue",function(){y.trigger("slide:change",t)}.bind(this),"loaded"),this.views.slidesView.currentSlideIndex=t,o.contains(this.settings.get("permissions"),"player:watermarkRemoveBranding")||("blockinfographic"===y.settings.get("project_type")?$(".stage.infoblock").last().append($(".presentation_water")):$("section").append($(".presentation_water"))),v()},y.bootstrap=function(e,t){this.bootstrapData=this.bootstrapData||{},this.bootstrapData[e]=t},o.extend(y,s.Events),y.bind("error",function(e){y.settings.get("debug")&&console.log("Internal error",e)}),t.exports=y;var w=s.DeepModel.prototype.set;s.DeepModel.prototype.set=function(e,t,i){return w.call(this,e,t,o.extend({validate:!0},i))},s.View.prototype.addEvents=function(e){this.delegateEvents(o.extend(o.clone(this.events),e))},String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)}},{"./helpers/iframeMessageEvents.js":60,"./modules/appSettingsModel.js":66,"./modules/mixin/view/blockSlideMixin.js":71,"./modules/objects/types/array/arrayModel.js":81,"./modules/objects/types/array/arrayView.js":82,"./modules/objects/types/audio/audioModel.js":83,"./modules/objects/types/audio/audioView.js":84,"./modules/objects/types/charts/chartModel.js":87,"./modules/objects/types/charts/chartView.js":88,"./modules/objects/types/clock/clockModel.js":89,"./modules/objects/types/clock/clockView.js":90,"./modules/objects/types/countdown/countdownModel.js":91,"./modules/objects/types/countdown/countdownView.js":92,"./modules/objects/types/iframe/iframeModel.js":93,"./modules/objects/types/iframe/iframeView.js":94,"./modules/objects/types/image/imageModel.js":95,
"./modules/objects/types/image/imageView.js":96,"./modules/objects/types/infogr_widgets/widgetModel.js":110,"./modules/objects/types/infogr_widgets/widgetView.js":111,"./modules/objects/types/map/mapModel.js":112,"./modules/objects/types/map/mapView.js":113,"./modules/objects/types/pdf/pdfModel.js":114,"./modules/objects/types/pdf/pdfView.js":115,"./modules/objects/types/progressbar/progressbarModel.js":116,"./modules/objects/types/progressbar/progressbarView.js":117,"./modules/objects/types/radial/radialModel.js":118,"./modules/objects/types/radial/radialView.js":119,"./modules/objects/types/svg/svgModel.js":120,"./modules/objects/types/svg/svgView.js":121,"./modules/objects/types/table/tableModel.js":122,"./modules/objects/types/table/tableView.js":123,"./modules/objects/types/text/textModel.js":124,"./modules/objects/types/text/textView.js":125,"./modules/objects/types/thermometer/thermoModel.js":126,"./modules/objects/types/thermometer/thermoView.js":127,"./modules/objects/types/video/videoModel.js":128,"./modules/objects/types/video/videoView.js":129,"./modules/player/blockControlsView.js":134,"./modules/player/contentView.js":135,"./modules/player/controlsView.js":136,"./modules/player/linkView.js":138,"./modules/player/slideTimelineMixin.js":140,"./modules/player/slideTransitionMixin.js":141,"./modules/player/slidesNavigationMixin.js":142,"./modules/popup/loadingOverlayView.js":143,"./modules/slide/slideCollection.js":145,"./modules/slide/slideCollectionView.js":146,"./modules/slide/slideThumbnailsView.js":148,"./modules/slide/slideView.js":149,backbone:"backbone","backbone-super":21,"livereload-js":29,underscore:52}],54:[function(e,t,i){t.exports=function(){var e=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):!1},t=function(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1},i=function(){return-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")},s=function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):!1},o=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};return{isIE:e,isFirefox:t,isSafari:i,getChromeVersion:s,isMobileDevice:o}}()},{}],55:[function(e,t,i){var s=e("underscore");t.exports=function(){var e=function(e){return"string"!=typeof e?!1:0===e.indexOf("rgb")},t=function(e){return"string"!=typeof e?!1:0===e.indexOf("#")},i=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},o=function(e,t,s){return"#"+i(e)+i(t)+i(s)},n=function(e){return e=e.replace("rgb(","").replace("a","").replace("(","").replace(")","").replace(" ",""),e=e.split(","),o(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]))},r=function(e){return e.replace("#","")},a=function(i){return e(i)&&(i=n(i)),t(i)?(i=r(i),"#"+i.toLowerCase()):!1},l=function(e,t,i){if(s.isUndefined(i)&&(i=3),!(a(e)===!1||a(t)===!1||2>=i)){e=a(e).substring(1,7),t=a(t).substring(1,7);for(var o=function(e){return e=e.toString(16),1===e.length?"0"+e:e},n=function(i){var s=Math.ceil(parseInt(t.substring(0,2),16)*i+parseInt(e.substring(0,2),16)*(1-i)),n=Math.ceil(parseInt(t.substring(2,4),16)*i+parseInt(e.substring(2,4),16)*(1-i)),r=Math.ceil(parseInt(t.substring(4,6),16)*i+parseInt(e.substring(4,6),16)*(1-i));return"#"+o(s)+o(n)+o(r)},r=[],l=1/(i-1),d=0;i>d;d++)r[d]=n(d*l);return r}},d=function(t,i){if("transparent"===t.toLowerCase())return"transparent";var s;s=e(t)?n(t):t;var o=parseInt(s.slice(1),16),r=0>i?0:255,a=0>i?-1*i:i,l=o>>16,d=o>>8&255,h=255&o;return"#"+(16777216+65536*(Math.round((r-l)*a)+l)+256*(Math.round((r-d)*a)+d)+(Math.round((r-h)*a)+h)).toString(16).slice(1)};return{isRGB:e,isHex:t,standard:a,colorBlender:l,shadeColor:d}}()},{underscore:52}],56:[function(e,t,i){t.exports=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,s,o="#";for(s=0;3>s;s++)i=parseInt(e.substr(2*s,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),o+=("00"+i).substr(i.length);return o}},{}],57:[function(e,t,i){var s=e("underscore");t.exports=function(){var e=s.template('<style>@font-face {font-family: "<%= fontName %>";src: local("<%= fontLocal %>"),url("<%= url.replace(".ttf",".eot").replace(".otf",".eot") %>") format("embedded-opentype"),url("<%= url %>") format("woff");font-weight: <%= fontWeight %>;font-style: <%= fontSubfamily %>;}#<%= className %> {font-family: "<%= fontName %>";font-weight: "<%= fontWeight %>";font-style: <%= fontSubfamily %>;}#<%= className %> span{font-family: "<%= fontName %>";font-weight: "<%= fontWeight %>";font-style: <%= fontSubfamily %>;}</style>'),t=[],i=[],o=function(e){t.push(e),$("head").append($("<link />",{rel:"stylesheet",type:"text/css",href:app.settings.get("assetsStorage")+"fonts/css/"+e+".css"}))},n=function(s){t.push(s.fontName),i.push(s.fontPostscriptName);var o="Italic"===s.fontSubfamily?"italic":"normal",n=s.url.indexOf("http")>-1?s.url:app.settings.get("usersDataStorage")+s.url,r=e({className:s.fontPostscriptName,fontLocal:s.fontPostscriptName,fontName:s.fontName,fontSubfamily:o,fontWeight:s.fontWeight,url:n});$("head").append($(r))};return{add:function(e){e&&!s.contains(t,e)&&o(e)},addBrand:function(e){"object"==typeof e&&(s.contains(i,e.fontPostscriptName)||n(e))}}}()},{underscore:52}],58:[function(e,t,i){t.exports=function(e,t,i,s){var o,n=e.getContext("2d"),r=s.split(",");"h"===r[0]?o=n.createLinearGradient(0,0,t,0):"v"===r[0]?o=n.createLinearGradient(0,0,0,i):"r"===r[0]&&(o=n.createRadialGradient(t/2,i/2,t/4,t/2,i/2,t/2));for(var a=1;a<r.length;a++)if("string"==typeof r[a]){var l=r[a].split(" ");o.addColorStop(parseInt(l[0])/100,String(l[1]).substring(0,7))}n.fillStyle=o,n.fillRect(0,0,t,i)}},{}],59:[function(e,t,i){t.exports=function(e){var t="",i="0%",o="100%",n="left bottom",r="top";if(e=e.split(","),"h"==e[0])var a="horizontal";if("r"==e[0])var a="radial";e.shift();var l=e;"horizontal"==a&&(i="100%",o="0%",n="right top",r="left");var d="<svg xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='gradient' x1='0%' y1='0%' x2='"+i+"' y2='"+o+"'>",h="-webkit-gradient(linear, left top, "+n,c="";return $.each(l,function(e,t){l[e]=l[e].split(" ")}),$.each(l,function(e,t){h+=", color-stop("+t[0]+", "+t[1]+")",c+=","+t[1]+" "+t[0],d+="<stop offset='"+t[0]+"' style='stop-color:"+t[1]+";' />"}),h+=")",c=c.substr(1),"radial"==a&&(r="center"),d+="</linearGradient></defs><rect fill='url(#gradient)' height='100%' width='100%' /></svg>",d=s(d),t+="url(data:image/svg+xml;base64,"+d+");\n",t+=h+";\n",t+="-moz-linear-gradient("+r+","+c+");\n",t+="-webkit-linear-gradient("+r+","+c+");\n",t+="-o-linear-gradient("+r+","+c+");\n",t+="-ms-linear-gradient("+r+","+c+");\n",t+="linear-gradient("+r+","+c+");","radial"==a&&(t=t.replace("linear","radial")),t};var s=function(e){for(var t,i,s,o,n,r,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",h=0;h<e.length;)t=e.charCodeAt(h++),i=e.charCodeAt(h++),s=e.charCodeAt(h++),o=t>>2,n=(3&t)<<4|i>>4,r=(15&i)<<2|s>>6,a=63&s,isNaN(i)?r=a=64:isNaN(s)&&(a=64),d+=l.charAt(o)+l.charAt(n)+l.charAt(r)+l.charAt(a);return d}},{}],60:[function(e,t,i){t.exports=function(){var e=function(){$.ajax({type:"GET",url:"/api/getuserplan",success:function(t){if("success"===t.status){console.log(t.data.plan);var i=t.data.plan;"free"!==i.toLowerCase()?window.location.reload():setTimeout(function(){e()},500)}},error:function(e){}})},t=function(t){if("undefined"!=typeof t.data)try{var i=JSON.parse(t.data);"undefined"!=typeof i.type&&("dashboard"===i.type&&"upgrade"===i.action?e():"gotoSlide"===i.type?app.trigger("slide:change",i.index):app.trigger("iframe-message",i))}catch(s){}},i=function(e){if("navigateSlide"===e.type){var t=e.data;app.trigger("slide:change",t.index)}};return window.crossWindowOperation=i,window.addEventListener("message",t,!1),!1}},{}],61:[function(e,t,i){var s=e("underscore");t.exports=function(e){return app.settings.get("Html5Download")&&(app.settings.preloadedBundles[e]=!0),s.has(app.settings.preloadedBundles,e)||(app.settings.preloadedBundles[e]=!1,$.getScript("/js/"+e+".js",function(){app.settings.preloadedBundles[e]=!0,app.trigger("loadscript:"+e)})),app.settings.preloadedBundles[e]}},{underscore:52}],62:[function(e,t,i){var s=e("underscore");t.exports={add:function(e,t,i){if(""!==location.hostname&&!s.isUndefined(window.localStorage)&&s.isUndefined(window.disableLocalStorage))if(!s.isUndefined(window.localStorage.getItem(e))&&window.localStorage.getItem(e)){var o=JSON.parse(window.localStorage.getItem(e));o[t]=i,window.localStorage.setItem(e,JSON.stringify(o))}else window.localStorage.setItem(e,'{"'+t+'":"'+i+'"}')},get:function(e,t){if(""===location.hostname||s.isUndefined(window.localStorage)||!s.isUndefined(window.disableLocalStorage))return null;if(!s.isUndefined(window.localStorage.getItem(e))&&window.localStorage.getItem(e)){var i=JSON.parse(window.localStorage.getItem(e));return s.isUndefined(i[t])?null:JSON.parse(window.localStorage.getItem(e))[t]}return null},copyClipboard:function(e,t){if(!s.isUndefined(window.localStorage)&&s.isUndefined(window.disableLocalStorage)){var i={};i[e]=t,window.localStorage.setItem("visme_clipboard",JSON.stringify(i))}},pasteClipboard:function(e){if(s.isUndefined(window.localStorage)||!s.isUndefined(window.disableLocalStorage))return null;if(window.localStorage.getItem("visme_clipboard")){var t=JSON.parse(window.localStorage.getItem("visme_clipboard"));return t[e]?t[e]:null}return null},isFeatureVisited:function(e){if(""===location.hostname||s.isUndefined(window.localStorage)||!s.isUndefined(window.disableLocalStorage))return!0;var t=window.localStorage.getItem("newFeatures");return t?(t=t.split(","),t.indexOf(e)>=0):!1},addVisitedNewFeature:function(e){if(!s.isUndefined(window.localStorage)&&s.isUndefined(window.disableLocalStorage)){var t=window.localStorage.getItem("newFeatures");s.isUndefined(t)||!t?window.localStorage.setItem("newFeatures",e):window.localStorage.setItem("newFeatures",t+","+e)}},addGlobal:function(e,t){!s.isUndefined(window.localStorage)&&s.isUndefined(window.disableLocalStorage)&&window.localStorage.setItem(e,t)},getGlobal:function(e){return s.isUndefined(window.localStorage)||!s.isUndefined(window.disableLocalStorage)?null:window.localStorage.getItem(e)?window.localStorage.getItem(e):null}}},{underscore:52}],63:[function(e,t,i){var s=e("underscore");t.exports={add:function(e,t){var i={type:"POST",data:t,success:function(e){"error"===e.status},error:function(e,t,i){console.log("status code: "+e.status+"\nerrorThrown: "+i+"\njqXHR.responseText:"+e.responseText)}},s="/actions/addasset/"+e;this.ajaxRequest(s,i)},"delete":function(e,t,i){var s={type:"DELETE",success:function(e){"error"===e.status},error:function(e,t,i){console.log("status code: "+e.status+"\nerrorThrown: "+i+"\njqXHR.responseText:"+e.responseText)}},o="";o=0===i?"/actions/deleteasset/"+e+"/"+t:"/actions/deleteallasset/"+e+"/"+t,this.ajaxRequest(o,s)},ajaxRequest:function(e,t){return t=$.extend(t||{},{url:e}),$.ajax(t)},manageAsset:function(e,t){var i,o=app.settings.get("project_id");s.isFunction(e.get)&&("regular"===e.get("type")?"add"===t?(s.isUndefined(e.get("background"))||s.isUndefined(e.get("background.id"))||"image"!==e.get("background.type")||(i={asset_id:e.get("background.id"),type:"swatch",project_id:o},this.add(o,i)),s.each(e.get("objects"),function(e){s.isUndefined(e.assetid)||(i={asset_id:e.assetid,type:e.type,project_id:o},this.add(o,i))},this)):"delete"===t&&(s.isUndefined(e.get("background"))||s.isUndefined(e.get("background.id"))||"image"!==e.get("background.type")||this["delete"](o,e.get("background.id"),0),s.each(e.get("objects"),function(e){s.isUndefined(e.assetid)||this["delete"](o,e.assetid,0)},this)):s.isUndefined(e.get("assetid"))||("add"===t&&(i={asset_id:e.get("assetid"),type:e.get("type"),project_id:o},this.add(o,i)),"delete"===t&&this["delete"](o,e.get("assetid"),0)))}}},{underscore:52}],64:[function(e,t,i){var s=e("underscore");t.exports=function(){var e={},t=function(t,i){var o;return s.isUndefined(e[i])&&(e[i]=0),o=++e[i]+"",t?t+o:o},i=function(t,i){s.isUndefined(e[i])&&(e[i]=0),t=parseInt(t.match(/\d+/)[0],10),t>e[i]&&(e[i]=t)},o=function(e){return e+Math.floor(1e6*Math.random()+1)};return{uniqueId:t,notifyIdCounter:i,randomId:o}}()},{underscore:52}],65:[function(e,t,i){t.exports=function(){var e=function(e){var t=window.location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?t[1]:t},t=function(e){var t=/^(https):\/\/[^ "]+$/;return t.test(e)};return{get:e,validate:t}}()},{}],66:[function(e,t,i){var s=e("underscore"),o=e("../helpers/url.js"),n=e("../helpers/browserChecker.js"),r=e("./objects/objectModel.js"),a=e("./../helpers/localStorage.js"),l=r.extend(s.extend({},n,{defaults:{editMode:1,state:"loading",grid:{visible:!1,gridHorizontalGap:40,gridVerticalGap:40,gridOpacity:.1,gridSnap:!0,objectSnap:!0,gridColor:"black"},debug:0,zoom:1,fonts:e("./fonts/list.js"),slideHeight:800,slideWidth:1e3},preloadedBundles:[],validators:{zoom:{type:"number",params:{min:0,max:10}}},get:function(e){var t=r.prototype.get.call(this,e);return"1"!==t&&"0"!==t||(t=Number(t)),t},initialize:function(e){s.bindAll(this,"addToJobQueue","checkUrlForDimensions","isMobileDevice","isIE","validateBrowser");var t=JSON.parse(e.project_data);if(e.template){var i=JSON.parse(e.template);null!==i?this.attributes.template=i.slides:this.attributes.template=null}s.extend(this.attributes,{templatePalette:s.isUndefined(t.templatePalette)?"none":t.templatePalette,slidesData:this.cleanupProjectData(t.slides),templateId:t.template,colorPallete:t.colorPallete,project_id:e.project_id,project_version:e.project_version,usersDataStorage:e.usersDataStorage,audioStorage:e.audioStorage,project_name:e.project_name,type:e.project_type,slideWidth:t.width,slideHeight:t.height,layout:t.layout}),this.listenTo(this,"change",this.settingsChange),app.bind("addToJobQueue",this.addToJobQueue),this.loadLocalSettings(),"editor"===this.get("editMode")&&(app.trigger("addToJobQueue",this.validateBrowser,"loaded"),"blockinfographic"===this.get("project_type")&&(this.listenTo(app,"slides:loaded",function(){this.set("state","loaded")}),app.trigger("addToJobQueue",function(){this.adjustProjectHeight()}.bind(this),"loaded")),this.get("disableSlidePanel")&&app.trigger("addToJobQueue",function(){app.trigger("slide:new-selected",app.collections.slides.at(0))}.bind(this),"loaded")),"publish"===this.get("editMode")&&1===this.get("presentation_mode")&&app.trigger("addToJobQueue",function(){this.set("mute",!0)}.bind(this),"loaded")},loadLocalSettings:function(){var e=this;s.each(["grid.gridOpacity","grid.gridHorizontalGap","grid.gridVerticalGap","grid.gridSnap","grid.visible"],function(t){var i=a.get(e.get("project_id"),t);i&&this.set(t,i)},this)},checkUrlForDimensions:function(){var e=o.get("size");if(!s.isNull(e)){e=e.split("x");var t=parseInt(e[0]),i=parseInt(e[1]);app.settings.set("slideWidth",t),app.settings.set("slideHeight",i)}},validateBrowser:function(){(this.isMobileDevice()||this.isIE()&&this.isIE()<9)&&alert("This browser/device is not supported by the Visme Editor. To create and edit projects please use a browser such as Google Chrome, Firefox, Safari, or Internet Explorer 10+ on your desktop or laptop")},cleanupProjectData:function(e){if(e)for(var t=0;t<e.length;++t){var i=e[t].objects;if(i)for(var s=i.length-1;s>=0;s--)"audio"===i[s].type?e[t].objects[s].state="stop":"collection"===i[s].type&&i[s].temp&&e[t].objects.splice(s,1)}return e},settingsChange:function(){var e=this;s.each(this.changed,function(t,i,o){switch(i){case"zoom":app.trigger("zoom:change-init");break;case"grid":s.each(["visible","gridSnap","gridVerticalGap","gridHorizontalGap","gridOpacity"],function(i){s.has(t,i)&&a.add(e.get("project_id"),"grid."+i,t[i])});break;case"state":this.runActiveJobs(t)}delete this.changed[i]},this)},runActiveJobs:function(e){if(this.jobQueue[e])for(;this.jobQueue[e].length;){var t=this.jobQueue[e].shift();t()}},jobQueue:{},addToJobQueue:function(e,t){this.get("state")===t?e():(this.jobQueue[t]||(this.jobQueue[t]=[]),this.jobQueue[t].push(e))},adjustProjectHeight:function(){var e=0;s.each(app.collections.slides.models,function(t){e+=t.get("height")}),this.get("slideHeight")!==e&&this.set("slideHeight",e)}}));s.defaults(l.prototype.validators,r.prototype.validators),t.exports=l},{"../helpers/browserChecker.js":54,"../helpers/url.js":65,"./../helpers/localStorage.js":62,"./fonts/list.js":67,"./objects/objectModel.js":79,underscore:52}],67:[function(e,t,i){var s=["3Dumb","Arch Rival","Archistico","Azoft Sans","Desyrel","Journal","Exo","Slapstick Comic","ST Marie","Tenderness","Trump Town Pro","Kingthings Petrock","Pacifico","Bilbo","Caviar Dreams","Acknowledgement","Economica","Matchbook","Flux","Belligerent Madness","Quickly Wiggle","Amaranth","Greyscale Basic","Linux Biolinum","Lobster Two","Marvel","Open Sans Condensed","Overlock","Quantico","Resagnicto","Titillium","Ubuntu","Web Serveroff","Qarmic Sans","Yew Basturd","Alex Brush","Black Jack","Dancing Script","Grand Hotel","Great Vibes","Italliano","Learning Curve Pro","Rechtman","Tangerine","Rawengulk","Trocchi","Zantroke","BlokLetters","Colaborate","Disco","Enigmatic","Fjord","Garton","Gothic Ultra OT","Hattori Hanzo","Jacques Francois","Junction","Kingthings Calligraphica","Kontrapunkt","Metamorphous","Myndraine","Okolaks","Otama EP","Panefresco","ProFontWindows","Rawengulk Sans","Samba","Daniel","Redressed","Wagnasty","Yellowtail","Silkscreen","Distant Galaxy","Liquidism","Flavors","Headhunter","Forque","Lintsec","Top Secret","Deutch Gothic","New Rocker","1942 Report","Cabinsketch","Arial","Courier New","Georgia","Helvetica","Impact","Times New Roman","Trebuchet MS","Verdana","Josefin Sans","Abril Fatface","Old Standard TT","Vollkorn","Lato","PT Mono","Source Sans Pro","Oswald","Rokkitt","Montserrat"];s=s.sort(),t.exports=s},{}],68:[function(e,t,i){var s=e("backbone"),o=e("../../../helpers/manageMediaAssets.js"),n=e("underscore");t.exports={moveTo:function(e,t){var i=this.indexOf(e);t>=0&&i!==t&&(this.remove([e],{noreindex:!0}),this.add([e],{at:t}),this.updateModelOrdinals())},moveDown:function(e){var t=this.indexOf(e);t>0&&this.swapModels(t-1,t)},moveUp:function(e){var t=this.indexOf(e);t<this.models.length&&this.swapModels(t,t+1)},moveTop:function(e){var t=this.indexOf(e);t<this.models.length&&(this.models.push(this.models.splice(t,1)[0]),this.updateModelOrdinals())},moveBottom:function(e){var t=this.indexOf(e);t>0&&(this.models.unshift(this.models.splice(t,1)[0]),this.updateModelOrdinals())},swapModels:function(e,t){n.isUndefined(this.models[e])||n.isUndefined(this.models[t])||e===t||(this.models[e]=this.models.splice(t,1,this.models[e])[0],this.updateModelOrdinals())},comparator:function(e,t){return e=e.get(this.sortKey),t=t.get(this.sortKey),e>t?1:t>e?-1:0},add:function(e,t){if(n.isUndefined(t)||n.isUndefined(t.at)){var i=this.models.filter(function(e){return e.get("noordinals")!==!0}).length;n.isNull(e)||n.isUndefined(e)||$.isArray(e)||(e=[e]),n.each(e,function(e){e.noordinals!==!0&&(n.isNull(e)||n.isUndefined(e)?app.trigger("error","Can't set order for the model"+e):e.order=i++)})}var r=[];return r=s.Collection.prototype.add.call(this,e,t),(n.isUndefined(t)||n.isUndefined(t.noreindex)||!t.noreindex)&&this.updateModelOrdinals(),$.isArray(r)||(r=[r]),n.each(r,function(e){n.isNull(e)||e===!1||t&&t.silent||(o.manageAsset(e,"add"),app.trigger(this.eventType+":add:model-view",e,this),app.trigger(this.eventType+":change:model-view",this))},this),r},remove:function(e,t){if($.isArray(e)&&1===e.length){var i=this.get(e[0]);n.isUndefined(i)||"collection"!==i.get("type")||n.each(i.get("group"),function(e){this.remove([e])},this)}var r=s.Collection.prototype.remove.call(this,e,{silent:!0});return(n.isUndefined(t)||n.isUndefined(t.noreindex)||!t.noreindex)&&this.updateModelOrdinals(),t&&t.silent||(r&&n.isUndefined(r.length)&&(r=[r]),n.each(r,function(e){n.isUndefined(e)||(o.manageAsset(e,"delete"),app.trigger(this.eventType+":remove:model-view",e,this),app.trigger(this.eventType+":change:model-view",this))},this)),r},duplicate:function(e,t){"undefined"==typeof t&&(t={});var i=this.get(e),s=i.toJSON();return delete s.id,s.name.indexOf("copy")<0&&(s.name+=" copy"),n.defaults(t,s)},updateModelOrdinals:function(){this.filter(function(e){return e.get("noordinals")!==!0}).forEach(function(e,t){e.set(this.sortKey,t)},this)},setOrder:function(e,t){if(e!==t){var i=this.models.splice(e,1);this.models.splice(t,0,i[0]),this.updateModelOrdinals()}}}},{"../../../helpers/manageMediaAssets.js":63,backbone:"backbone",underscore:52}],69:[function(e,t,i){var s=e("underscore");t.exports=function(){var e={string:function(e){return"string"!=typeof e.data?e.name+" is not a string":!e.params.notblank||e.data&&!/^\s*$/.test(e.data)?e.params.maxlength&&e.data.length>e.params.maxlength?e.name+" should be no more than "+e.params.maxlength:"":e.name+" can not be blank"},number:function(e){return"number"!=typeof e.data||isNaN(e.data)?e.name+" "+e.data+" is not a number":this._range(e)},integer:function(e){return parseInt(e.data,10)!==e.data||isNaN(e.data)?e.name+" is not an integer":this._range(e)},"boolean":function(e){return"boolean"!=typeof e.data?e.name+" is not a boolean":""},_range:function(e){return e.hasOwnProperty("params")&&e.params?e.params.max&&e.data>e.params.max?e.name+" is out of range: "+e.data:s.has(e.params,"min")&&e.data<e.params.min?e.name+" is out of range: "+e.data:"":""}},t=function(t){var i=Object.keys(t).every(function(i){if(this.validators.hasOwnProperty(i)){var s=e[this.validators[i].type]({name:i,params:this.validators[i].params,data:t[i]});return!(s.length>0)}return!0},this);return i===!1?"validation failed":""};return{validateAttributes:function(e){return"object"==typeof e?t.call(this,e):void 0}}}()},{underscore:52}],70:[function(e,t,i){var s=e("underscore"),o=e("../../../helpers/color.js");t.exports={whitelist:["#2b2b2b","#3d3d3b","#5a5a5e","#fffffb"],updateColorsByPalette:function(e){function t(e,t){var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>n?1>n?0:n:255)+(255>r?1>r?0:r:255)).toString(16).slice(1)}var i=s.clone(this.toJSON()),n=[],r=this;if(!s.isUndefined(i.paletteIndexes)){if(s.each(i.paletteIndexes,function(e,t){null===e&&(i.paletteIndexes[t]=0)}),s.isUndefined(i.defaultColor)&&this.set("defaultColor",{}),s.isUndefined(i.colors)||(s.each(i.paletteIndexes,function(t,o){3>=o&&!s.isUndefined(i.colors[o])&&(n[o]=0!==t?e[t-1]:i.colors[o])}),s.isUndefined(this.get("defaultColor.colors"))&&this.set({"defaultColor.colors":this.get("colors")},{silent:!0}),this.set("colors",n),n=[]),!s.isUndefined(i.textColor)&&i.paletteIndexes[3]>0&&(s.isUndefined(this.get("defaultColor.textColor"))&&this.set({"defaultColor.textColor":this.get("textColor")},{silent:!0}),this.set("textColor",e[i.paletteIndexes[3]-1])),"svg"===i.type&&"none"!==i.borderStyle&&i.paletteIndexes[4]>0&&(s.isUndefined(this.get("defaultColor.borderColor"))&&this.set({"defaultColor.borderColor":this.get("borderColor")},{silent:!0}),this.set("borderColor",e[i.paletteIndexes[4]-1])),"map"===i.type&&(i.paletteIndexes[0]>0&&(s.each(i.data,function(t){t.fillColor=e[i.paletteIndexes[0]-1]}),s.each(i.states,function(t){t.color=e[i.paletteIndexes[0]-1]}),i.legend.activeData&&(this.unset("legend"),this.set("legend",i.legend)),this.unset("data"),this.set("data",i.data),this.unset("states"),this.set("states",i.states),s.isUndefined(this.get("defaultColor.defaultFill"))&&this.set({"defaultColor.defaultFill":this.get("defaultFill")},{silent:!0}),this.set({defaultFill:e[i.paletteIndexes[0]-1]},{silent:!0})),i.paletteIndexes[1]>0&&(s.isUndefined(this.get("defaultColor.borderColor"))&&this.set({"defaultColor.borderColor":this.get("borderColor")},{silent:!0}),this.set("borderColor",e[i.paletteIndexes[1]-1]))),"table"===i.type){var a=$("<div>"+s.clone(this.get("text"))+"</div>");s.isEmpty(s.without(i.paletteIndexes,0))||(s.isUndefined(i.defaultColor)&&(i.defaultColor={}),"none"===i.theme&&(s.isUndefined(i.defaultColor.headerBg)&&""!==a.find("tr:first-child td").css("background-color")&&this.set("defaultColor.headerBg",a.find("tr:first-child td").css("background-color")),s.isUndefined(i.defaultColor.bodyBg)&&a.find("tr:nth-child(2) td").css("background-color")&&this.set("defaultColor.bodyBg",a.find("tr:nth-child(2) td").css("background-color")),s.isUndefined(i.defaultColor.headerText)&&a.find("tr:first-child td").css("color")&&this.set("defaultColor.headerText",a.find("tr:first-child td").css("color")),s.isUndefined(i.defaultColor.bodyText)&&a.find("tr:nth-child(2) td").css("color")&&this.set("defaultColor.bodyText",a.find("tr:nth-child(2) td").css("color")),s.isUndefined(i.defaultColor.tableBorder)&&a.find("tr:first-child td").css("border-color")&&this.set("defaultColor.tableBorder",a.find("tr:first-child td").css("border-color"))),s.isUndefined(i.defaultColor.theme)&&this.set("defaultColor.theme",i.theme),this.set("theme","custom"),a=$("<div>"+s.clone(this.get("text"))+"</div>"),a.find("style").remove(),a.find("table").attr("data-theme","custom"),i.paletteIndexes[1]>0&&a.find("tr td").css("background",e[i.paletteIndexes[1]-1]),i.paletteIndexes[3]>0&&a.find("tr td").css("color",e[i.paletteIndexes[3]-1]),i.paletteIndexes[4]>0&&a.find("tr td").css("border","border: 1px solid "+e[i.paletteIndexes[4]-1]),i.paletteIndexes[0]>0&&a.find("tr:first-child td").css("background",e[i.paletteIndexes[0]-1]),i.paletteIndexes[2]>0&&a.find("tr:first-child td").css("color",e[i.paletteIndexes[1]-1]),this.set("text",a.html()),$("#"+i.id).find(".vm-tables").html(a.html()))}if("text"===i.type){var l,d=$("<div>"+i.text+"</div>"),h=!1;d.find("*").each(function(e,t){return h?!1:void($(t).css("color")&&(l=o.standard($(t).css("color")),s.contains(r.whitelist,l)||(h=!0)))}),d.find("*").each(function(t,n){if(i.paletteIndexes[3]>0&&(""!==$(n).css("color")||""!==$(n).attr("color"))&&!s.contains(r.whitelist,o.standard($(n).css("color")))&&!$(n).hasClass("customli")){var a=e[i.paletteIndexes[3]-1];if(""!==$(n).css("color")&&d.find(n).css("color",a),void 0!==$(n).attr("color")&&d.find(n).attr("color",a),d.find(n).attr("class")){var l=d.find(n).attr("class").split(" ");$.each(l,function(e,t){0===t.indexOf("color-")&&(d.find(n).removeClass(t),d.find(n).addClass("color-"+a))})}}if(i.paletteIndexes[2]>0&&$(n).hasClass("customli")&&(d.find(n).css("color",e[i.paletteIndexes[2]-1]),$.get(d.find(n).attr("data-id"),function(t){t=t.replace(/(\r\n|\n|\r)/gm,"");var a="#666";d.find(n).css("color")?a=d.find(n).css("color"):d.find(n).find("[class*=color]").length&&(a=d.find(n).find("[class*=color]").css("color"));var l=$(t).appendTo($("body"));l.find('[id^="Color1"]').attr("fill",e[i.paletteIndexes[2]-1]);var h,c=(new XMLSerializer).serializeToString(l.get(2)),g=window.btoa(c);if(s.isUndefined(r.get("defaultColor.bullet"))){var p=window.atob(g);r.set({"defaultColor.bullet":o.standard($(p).find('[id="Color1"]').attr("fill"))},{silent:!0})}h="data:image/svg+xml;base64,"+g,d.find(n).css("background-image","url('"+h+"')"),r.set("text",d.html())}.bind(this),"text")),i.paletteIndexes[1]>0&&""!==$(n).css("background-color")&&!s.contains(r.whitelist,o.standard($(n).css("background-color")))&&!$(n).hasClass("customli")&&(s.isUndefined(r.get("defaultColor.textBg"))&&r.set({"defaultColor.textBg":o.standard($(n).css("background-color"))},{silent:!0}),d.find(n).css("background-color",e[i.paletteIndexes[1]-1]),d.find(n).attr("class"))){var h=d.find(n).attr("class").split(" ");$.each(h,function(t,s){0===s.indexOf("backgroundColor-")&&(d.find(n).removeClass(s),d.find(n).addClass("backgroundColor-"+e[i.paletteIndexes[1]-1]))})}}),s.isUndefined(r.get("defaultColor.text"))&&l&&r.set({"defaultColor.text":l},{silent:!0}),this.get("text")!==d.html()&&this.set("text",d.html()),i.paletteIndexes[0]>0&&!s.contains(this.whitelist,o.standard(this.get("backgroundColor")))&&(s.isUndefined(this.get("defaultColor.backgroundColor"))&&this.set({"defaultColor.backgroundColor":this.get("backgroundColor")},{silent:!0}),this.set("backgroundColor",e[i.paletteIndexes[0]-1])),i.paletteIndexes[4]>0&&(s.isUndefined(this.get("defaultColor.borderColor"))&&this.set({"defaultColor.borderColor":this.get("borderColor")},{silent:!0}),this.set("borderColor",e[i.paletteIndexes[4]-1]))}s.isUndefined(i.seriesColors)||"chart"!==i.type||(n=i.seriesColors,s.isUndefined(this.get("defaultColor.seriesColors"))&&this.set({"defaultColor.seriesColors":this.get("seriesColors")},{silent:!0}),i.paletteIndexes[0]>0&&1===s.uniq(i.paletteIndexes).length?(s.each(i.seriesColors,function(t,s){n[s]=e[i.paletteIndexes[0]-1]}),this.set("seriesColors",n),this.trigger("resize-end")):i.paletteIndexes[0]>0&&1===s.uniq(s.rest(i.paletteIndexes)).length&&0===i.paletteIndexes[1]?(s.each(i.seriesColors,function(s,o){n[o]=0===o?e[i.paletteIndexes[0]-1]:t(e[i.paletteIndexes[0]-1],0-10*o)}),this.set("seriesColors",n),this.trigger("resize-end")):(s.each(i.seriesColors,function(s,o){5>o?n[o]=0!==i.paletteIndexes[o]?e[i.paletteIndexes[o]-1]:s:0!==i.paletteIndexes[4]?n[o]=t(e[i.paletteIndexes[4]-1],0-10*(o-4)):n[o]=s}),this.set("seriesColors",n),this.trigger("resize-end")),n=[],s.isUndefined(this.get("defaultColor.titleColor"))&&this.set("defaultColor.titleColor",this.get("titleColor")),i.paletteIndexes[5]>0&&(this.set("titleColor",e[i.paletteIndexes[5]-1]),this.trigger("resize-end")),s.isUndefined(this.get("defaultColor.subtitleColor"))&&this.set("defaultColor.subtitleColor",this.get("subtitleColor")),i.paletteIndexes[6]>0&&(this.set("subtitleColor",e[i.paletteIndexes[6]-1]),this.trigger("resize-end")),s.isUndefined(this.get("defaultColor.valuesColor"))&&this.set("defaultColor.valuesColor",this.get("options.valuesColor")),
i.paletteIndexes[7]>0&&(this.set("options.valuesColor",e[i.paletteIndexes[7]-1]),this.trigger("resize-end")))}},undoPaletteColor:function(){var e=this,t=this.get("defaultColor");if(!s.isUndefined(t)){if(t.colors&&this.set("colors",t.colors),t.textColor&&this.set("textColor",t.textColor),t.borderColor&&this.set("borderColor",t.borderColor),t.defaultFill){var i=s.clone(this.get("states")),n=s.clone(this.get("data"));s.each(n,function(e){e.fillColor=t.defaultFill}),s.each(i,function(e){e.color=t.defaultFill}),this.unset("data",{silent:!0}),this.set("data",n),this.unset("states",{silent:!0}),this.set("states",i),this.set({defaultFill:t.defaultFill},{silent:!0})}if(t.backgroundColor&&this.set("backgroundColor",t.backgroundColor),t.seriesColors&&(this.set("seriesColors",t.seriesColors),this.trigger("resize-end")),t.titleColor&&(this.set("titleColor",t.titleColor),this.trigger("resize-end")),t.subtitleColor&&(this.set("subtitleColor",t.subtitleColor),this.trigger("resize-end")),t.valuesColor&&(this.set("options.valuesColor",t.valuesColor),this.trigger("resize-end")),t.text||t.bullet||t.textBg){var r=s.clone(this.toJSON()),a=$("<div>"+r.text+"</div>");a.find("*").each(function(i,n){if(t.text&&($(n).hasClass("color-")||""!==$(n).css("color")||""!==$(n).attr("color"))&&!s.contains(e.whitelist,o.standard($(n).css("color")))&&!$(n).hasClass("customli")&&(""!==$(n).css("color")&&a.find(n).css("color",t.text),void 0!==$(n).attr("color")&&a.find(n).attr("color",t.text),a.find(n).attr("class"))){var r=a.find(n).attr("class").split(" ");$.each(r,function(e,i){0===i.indexOf("color-")&&(a.find(n).removeClass(i),a.find(n).addClass("color-"+t.text))})}if(t.bullet&&$(n).hasClass("customli")&&(a.find(n).css("color",t.bullet),$.get(a.find(n).attr("data-id"),function(i){i=i.replace(/(\r\n|\n|\r)/gm,"");var s="#666";a.find(n).css("color")?s=a.find(n).css("color"):a.find(n).find("[class*=color]").length&&(s=a.find(n).find("[class*=color]").css("color"));var o=$(i).appendTo($("body"));o.find('[id^="Color1"]').attr("fill",t.bullet);var r,l=(new XMLSerializer).serializeToString(o.get(2)),d=window.btoa(l);r="data:image/svg+xml;base64,"+d,a.find(n).css("background-image","url('"+r+"')"),e.set("text",a.html())}.bind(this),"text")),t.textBg&&""!==$(n).css("background-color")&&!s.contains(e.whitelist,o.standard($(n).css("background-color")))&&!$(n).hasClass("customli")&&(a.find(n).css("background-color",t.textBg),a.find(n).attr("class"))){var l=a.find(n).attr("class").split(" ");$.each(l,function(e,i){0===i.indexOf("backgroundColor-")&&(a.find(n).removeClass(i),a.find(n).addClass("backgroundColor-"+t.textBg))})}}),this.set("text",a.html())}if("table"===this.get("type")){var l=$("<div>"+this.get("text")+"</div>");t.theme&&(this.set("theme",t.theme),l.find("table").attr("data-theme",t.theme),l.find("tr td").css({background:" ",border:" ",color:" ","text-shadow":" ","box-shadow":" "})),t.bodyBg?l.find("tr td").css("background",t.bodyBg):l.find("tr td").css("background",""),t.bodyText?l.find("tr td").css("color",t.bodyText):l.find("tr td").css("color",""),t.tableBorder?l.find("tr td").css("border","border: 1px solid "+t.tableBorder):l.find("tr td").css("border",""),t.headerBg?l.find("tr:first-child td").css("background",t.headerBg):l.find("tr:first-child td").css("background",""),t.headerText?l.find("tr:first-child td").css("color",t.headerText):l.find("tr:first-child td").css("color",""),this.get("text")!==l.html()&&(this.set("text",l.html()),$("#"+this.get("id")).find(".vm-tables").html(l.html()))}}},clearDefaultColor:function(){s.isUndefined(this.get("defaultColor"))||this.unset("defaultColor",{silent:!0})},searchAndReplaceColor:function(e,t){if(e=o.standard(e),t=o.standard(t),e&&t){var i=this,n=s.clone(this.toJSON());if("map"===n.type){var r=s.clone(n.data),a=s.clone(n.states),l=s.clone(n.legend);if(o.standard(n.borderColor)===e&&i.set("borderColor",t),l.activeData){var d=[];d[0]=o.standard(l.colors[0])===e?t:l.colors[0],d[4]=o.standard(l.colors[4])===e?t:l.colors[4],d=o.colorBlender(d[0],d[4],5),s.each(r,function(e,t){s.each(l.colors,function(t,i){o.standard(e.fillColor)===o.standard(t)&&(e.fillColor=d[i])})}),s.each(a,function(e,t){s.each(l.colors,function(t,i){o.standard(e.color)===o.standard(t)&&(e.color=d[i])})}),l.colors=d,i.unset("states"),i.set("states",a),i.unset("legend"),i.set("legend",l),i.unset("data"),i.set("data",r)}else o.standard(n.defaultFill)===e&&i.set({defaultFill:t},{silent:!0}),s.each(r,function(i,s){o.standard(i.fillColor)===e&&(r[s].fillColor=t)}),s.each(a,function(i,s){o.standard(i.color)===e&&(a[s].color=t)}),i.unset("data"),i.set("data",r),i.unset("states"),i.set("states",a)}else s.find(n,function(n,r){if("string"==typeof n&&o.standard(n)===e&&"id"!==r&&i.set(r,t),"text"===r){var a=$("<div>"+n+"</div>");a.find("*").each(function(s,n){if(o.standard($(n).css("color"))!==e||$(n).hasClass("customli")||$(n).css("color",t),o.standard($(n).css("background-color"))!==e||$(n).hasClass("customli")||$(n).css("background-color",t),o.standard($(n).css("fill"))!==e||$(n).hasClass("customli")||$(n).css("fill",t),o.standard($(n).attr("fill"))!==e||$(n).hasClass("customli")||$(n).attr("fill",t),a.find(n).attr("class")&&!$(n).hasClass("customli")){var r=a.find(n).attr("class").split(" ");$.each(r,function(i,s){if(0===s.indexOf("color-")){var r=s.replace("color-","");o.standard(r)===e&&(a.find(n).removeClass(s),a.find(n).addClass("color-"+t))}})}if($(n).hasClass("customli")){o.standard($(n).css("color"))===e&&a.find(n).css("color",t);var l=a.find(n).css("background-image").replace('url("data:image/svg+xml;base64,',"").replace('")',"").replace("url(data:image/svg+xml;base64,","").replace(")",""),d=window.atob(l);o.standard($(d).find('[id="Color1"]').attr("fill"))===e&&$.get(a.find(n).attr("data-id"),function(e){e=e.replace(/(\r\n|\n|\r)/gm,"");var s=$(e).appendTo($("body"));s.find('[id="Color1"]').attr("fill",t);var o,r=(new XMLSerializer).serializeToString(s.get(2)),l=window.btoa(r);o="data:image/svg+xml;base64,"+l,a.find(n).css("background-image","url('"+o+"')"),i.set("text",a.html())}.bind(this),"text")}}),i.set("text",a.html())}if("backgroundColor"===r&&e===o.standard(n)&&i.set("backgroundColor",t),"borderColor"===r&&e===o.standard(n)&&i.set("borderColor",t),"border"===r&&o.standard(n.color)===e&&i.set("border.color",t),"colors"===r&&s.each(n,function(a,l){if(o.standard(a)===e){var d=s.clone(n);d[l]=t,i.set(r,d)}}),"seriesColors"===r&&Array.isArray(n)){var l=s.clone(n),d=s.filter(l,function(e){return o.standard(e)}),h=s.indexOf(d,e);-1!==h&&(Array.isArray(h)?s.each(h,function(e){l[e]=t}):l[h]=t,i.set("seriesColors",l),i.trigger("resize-end"))}})}}}},{"../../../helpers/color.js":55,underscore:52}],71:[function(e,t,i){var s=e("underscore"),o=window.TweenMax;t.exports={initHook:function(){s.bindAll(this,"setSlidePos","setBlockZIndex","setSlideWidth"),app.settings.bind("change:slideHeight",this.setSlidePos),app.settings.bind("change:slideWidth",this.setSlideWidth),this.model.bind("info-block:set-position",this.setSlidePos),"editor"===app.settings.get("editMode")&&(app.trigger("addToJobQueue",function(){this.displayBlocks()}.bind(this),"loaded"),this.model.bind("change:height",function(){this.$el.css("height",this.model.get("height")+"px")}.bind(this)))},methods:{setUpBlock:function(){"editor"===app.settings.get("editMode")?(this.$stage=this.$el.find(".stage"),o.set(this.$el,{scaleY:app.settings.get("zoom")}),o.set(this.$stage,{scaleX:app.settings.get("zoom")})):(this.$stage=this.$el,o.set(this.$el,{scale:app.settings.get("zoom")})),"loading"===app.settings.get("state")&&"editor"===app.settings.get("editMode")||this.$stage.css({display:"block",visibility:"visible",opacity:1}),this.$stage.addClass("infoblock"),this.setSlidePos()},setBlockZIndex:function(){this.$el.css("z-index",app.collections.slides.length-this.model.get("order")-1)},setSlidePos:function(){var e=app.settings.get("slideHeight"),t=this.model.get("order"),i=0;if(t>0){var n=s.filter(app.collections.slides.models,function(e){return e.get("order")<t});s.each(n,function(e){i+=e.get("height")})}var r="center "+(e/2-i)+"px";setTimeout(function(){o.set(this.$el,{transformOrigin:r,y:0,top:"50%","margin-top":-(e/2-i)}),this.$stage.css({"margin-left":-(this.model.get("width")/2)})}.bind(this),0)},setSlideWidth:function(){this.model.set("width",app.settings.get("slideWidth")),this.$stage.css({left:"50%","margin-left":-(this.model.get("width")/2)})},displayBlocks:function(){setTimeout(function(){o.to(this.$stage,.5,{autoAlpha:1,display:"block"})}.bind(this),0)}}}},{underscore:52}],72:[function(e,t,i){var s=e("underscore"),o=e("../../../helpers/color.js");t.exports={whitelist:["#2b2b2b","#3d3d3b","#5a5a5e","#fffffb"],updateColorsByPalette:function(e){function t(e,t){var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>n?1>n?0:n:255)+(255>r?1>r?0:r:255)).toString(16).slice(1)}var i=s.clone(this.model.toJSON()),n=[],r=this;if(!s.isUndefined(i.paletteIndexes)){if(s.each(i.paletteIndexes,function(e,t){null===e&&(i.paletteIndexes[t]=0)}),s.isUndefined(i.defaultColor)&&this.model.set("defaultColor",{}),s.isUndefined(i.colors)||(s.each(i.paletteIndexes,function(t,o){3>=o&&!s.isUndefined(i.colors[o])&&(n[o]=0!==t?e[t-1]:i.colors[o])}),s.isUndefined(this.model.get("defaultColor.colors"))&&this.model.set("defaultColor.colors",this.model.get("colors")),this.model.set("colors",n),n=[]),!s.isUndefined(i.textColor)&&i.paletteIndexes[3]>0&&(s.isUndefined(this.model.get("defaultColor.textColor"))&&this.model.set("defaultColor.textColor",this.model.get("textColor")),this.model.set("textColor",e[i.paletteIndexes[3]-1])),"svg"===i.type&&"none"!==i.borderStyle&&i.paletteIndexes[4]>0&&(s.isUndefined(this.model.get("defaultColor.borderColor"))&&this.model.set("defaultColor.borderColor",this.model.get("borderColor")),this.model.set("borderColor",e[i.paletteIndexes[4]-1])),"map"===i.type&&(i.paletteIndexes[0]>0&&(s.each(i.data,function(t){t.fillColor=e[i.paletteIndexes[0]-1]}),s.each(i.states,function(t){t.color=e[i.paletteIndexes[0]-1]}),i.legend.activeData&&(this.model.unset("legend"),this.model.set("legend",i.legend)),this.model.unset("data"),this.model.set("data",i.data),this.model.unset("states"),this.model.set("states",i.states),s.isUndefined(this.model.get("defaultColor.defaultFill"))&&this.model.set("defaultColor.defaultFill",this.model.get("defaultFill")),this.model.set("defaultFill",e[i.paletteIndexes[0]-1])),i.paletteIndexes[1]>0&&(s.isUndefined(this.model.get("defaultColor.borderColor"))&&this.model.set("defaultColor.borderColor",this.model.get("borderColor")),this.model.set("borderColor",e[i.paletteIndexes[1]-1]))),"text"===i.type||"table"===i.type){var a,l=$("<div>"+i.text+"</div>"),d=!1;l.find("*").each(function(e,t){return d?!1:void($(t).css("color")&&(a=o.standard($(t).css("color")),s.contains(r.whitelist,a)||(d=!0)))}),l.find("*").each(function(t,n){if(i.paletteIndexes[3]>0&&(""!==$(n).css("color")||""!==$(n).attr("color"))&&!s.contains(r.whitelist,o.standard($(n).css("color")))&&!$(n).hasClass("customli")&&(""!==$(n).css("color")&&l.find(n).css("color",e[i.paletteIndexes[3]-1]),void 0!==$(n).attr("color")&&l.find(n).attr("color",e[i.paletteIndexes[3]-1]),l.find(n).attr("class"))){var a=l.find(n).attr("class").split(" ");$.each(a,function(t,s){0===s.indexOf("color-")&&(l.find(n).removeClass(s),l.find(n).addClass("color-"+e[i.paletteIndexes[3]-1]))})}if(i.paletteIndexes[2]>0&&$(n).hasClass("customli")&&(l.find(n).css("color",e[i.paletteIndexes[2]-1]),$.get(l.find(n).attr("data-id"),function(t){t=t.replace(/(\r\n|\n|\r)/gm,"");var a="#666";l.find(n).css("color")?a=l.find(n).css("color"):l.find(n).find("[class*=color]").length&&(a=l.find(n).find("[class*=color]").css("color"));var d=$(t).appendTo($("body"));d.find('[id^="Color1"]').attr("fill",e[i.paletteIndexes[2]-1]);var h,c=(new XMLSerializer).serializeToString(d.get(2)),g=window.btoa(c);if(s.isUndefined(r.model.get("defaultColor.bullet"))){var p=window.atob(g);r.model.set("defaultColor.bullet",o.standard($(p).find('[id="Color1"]').attr("fill")))}h="data:image/svg+xml;base64,"+g,l.find(n).css("background-image","url('"+h+"')"),r.model.set("text",l.html())}.bind(this),"text")),i.paletteIndexes[1]>0&&""!==$(n).css("background-color")&&!s.contains(r.whitelist,o.standard($(n).css("background-color")))&&!$(n).hasClass("customli")&&(s.isUndefined(r.model.get("defaultColor.textBg"))&&r.model.set("defaultColor.textBg",o.standard($(n).css("background-color"))),l.find(n).css("background-color",e[i.paletteIndexes[1]-1]),l.find(n).attr("class"))){var d=l.find(n).attr("class").split(" ");$.each(d,function(t,s){0===s.indexOf("backgroundColor-")&&(l.find(n).removeClass(s),l.find(n).addClass("backgroundColor-"+e[i.paletteIndexes[1]-1]))})}}),s.isUndefined(r.model.get("defaultColor.text"))&&a&&r.model.set("defaultColor.text",a),this.model.set("text",l.html()),i.paletteIndexes[0]>0&&!s.contains(this.whitelist,o.standard(this.model.get("backgroundColor")))&&(s.isUndefined(this.model.get("defaultColor.backgroundColor"))&&this.model.set("defaultColor.backgroundColor",this.model.get("backgroundColor")),this.model.set("backgroundColor",e[i.paletteIndexes[0]-1])),i.paletteIndexes[4]>0&&(s.isUndefined(this.model.get("defaultColor.borderColor"))&&this.model.set("defaultColor.borderColor",this.model.get("backgroundColor")),this.model.set("borderColor",e[i.paletteIndexes[4]-1]))}s.isUndefined(i.seriesColors)||"chart"!==i.type||(n=i.seriesColors,s.isUndefined(this.model.get("defaultColor.seriesColors"))&&this.model.set("defaultColor.seriesColors",this.model.get("seriesColors")),i.paletteIndexes[0]>0&&1===s.uniq(i.paletteIndexes).length?(s.each(i.seriesColors,function(t,s){n[s]=e[i.paletteIndexes[0]-1]}),this.model.set("seriesColors",n),this.model.trigger("resize-end")):i.paletteIndexes[0]>0&&1===s.uniq(s.rest(i.paletteIndexes)).length&&0===i.paletteIndexes[1]?(s.each(i.seriesColors,function(s,o){n[o]=0===o?e[i.paletteIndexes[0]-1]:t(e[i.paletteIndexes[0]-1],0-10*o)}),this.model.set("seriesColors",n),this.model.trigger("resize-end")):(s.each(i.seriesColors,function(s,o){5>o?n[o]=0!==i.paletteIndexes[o]?e[i.paletteIndexes[o]-1]:s:0!==i.paletteIndexes[4]?n[o]=t(e[i.paletteIndexes[4]-1],0-10*(o-4)):n[o]=s}),this.model.set("seriesColors",n),this.model.trigger("resize-end")),n=[],s.isUndefined(this.model.get("defaultColor.titleColor"))&&this.model.set("defaultColor.titleColor",this.model.get("titleColor")),i.paletteIndexes[5]>0&&(this.model.set("titleColor",e[i.paletteIndexes[5]-1]),this.model.trigger("resize-end")),s.isUndefined(this.model.get("defaultColor.subtitleColor"))&&this.model.set("defaultColor.subtitleColor",this.model.get("subtitleColor")),i.paletteIndexes[6]>0&&(this.model.set("subtitleColor",e[i.paletteIndexes[6]-1]),this.model.trigger("resize-end")),s.isUndefined(this.model.get("defaultColor.valuesColor"))&&this.model.set("defaultColor.valuesColor",this.model.get("options.valuesColor")),i.paletteIndexes[7]>0&&(this.model.set("options.valuesColor",e[i.paletteIndexes[7]-1]),this.model.trigger("resize-end")))}},undoPaletteColor:function(){var e=this,t=this.model.get("defaultColor");if(!s.isUndefined(t)){if(t.colors&&this.model.set("colors",t.colors),t.textColor&&this.model.set("textColor",t.textColor),t.borderColor&&this.model.set("borderColor",t.borderColor),t.defaultFill){var i=s.clone(this.model.get("states")),n=s.clone(this.model.get("data"));s.each(n,function(e){e.fillColor=t.defaultFill}),s.each(i,function(e){e.color=t.defaultFill}),this.model.unset("data"),this.model.set("data",n),this.model.unset("states"),this.model.set("states",i),this.model.set("defaultFill",t.defaultFill)}if(t.backgroundColor&&this.model.set("backgroundColor",t.backgroundColor),t.seriesColors&&this.model.set("seriesColors",t.seriesColors),t.titleColor&&this.model.set("titleColor",t.titleColor),t.subtitleColor&&this.model.set("subtitleColor",t.subtitleColor),t.valuesColor&&this.model.set("options.valuesColor",t.valuesColor),t.text||t.bullet||t.textBg){var r=s.clone(this.model.toJSON()),a=$("<div>"+r.text+"</div>");a.find("*").each(function(i,n){if(t.text&&($(n).hasClass("color-")||""!==$(n).css("color")||""!==$(n).attr("color"))&&!s.contains(e.whitelist,o.standard($(n).css("color")))&&!$(n).hasClass("customli")&&(""!==$(n).css("color")&&a.find(n).css("color",t.text),void 0!==$(n).attr("color")&&a.find(n).attr("color",t.text),a.find(n).attr("class"))){var r=a.find(n).attr("class").split(" ");$.each(r,function(e,i){0===i.indexOf("color-")&&(a.find(n).removeClass(i),a.find(n).addClass("color-"+t.text))})}if(t.bullet&&$(n).hasClass("customli")&&(a.find(n).css("color",t.bullet),$.get(a.find(n).attr("data-id"),function(i){i=i.replace(/(\r\n|\n|\r)/gm,"");var s="#666";a.find(n).css("color")?s=a.find(n).css("color"):a.find(n).find("[class*=color]").length&&(s=a.find(n).find("[class*=color]").css("color"));var o=$(i).appendTo($("body"));o.find('[id^="Color1"]').attr("fill",t.bullet);var r,l=(new XMLSerializer).serializeToString(o.get(2)),d=window.btoa(l);r="data:image/svg+xml;base64,"+d,a.find(n).css("background-image","url('"+r+"')"),e.model.set("text",a.html())}.bind(this),"text")),t.textBg&&""!==$(n).css("background-color")&&!s.contains(e.whitelist,o.standard($(n).css("background-color")))&&!$(n).hasClass("customli")&&(a.find(n).css("background-color",t.textBg),a.find(n).attr("class"))){var l=a.find(n).attr("class").split(" ");$.each(l,function(e,i){0===i.indexOf("backgroundColor-")&&(a.find(n).removeClass(i),a.find(n).addClass("backgroundColor-"+t.textBg))})}}),this.model.set("text",a.html())}}},clearDefaultColor:function(){s.isUndefined(this.model.get("defaultColor"))||this.model.unset("defaultColor")}}},{"../../../helpers/color.js":55,underscore:52}],73:[function(e,t,i){var s=e("Draggable"),o=e("underscore"),n=window.TweenMax,r=e("./snapObjectMixin.js");t.exports={guideLines:{},treeReference:{},updateGuidelines:function(e){this.guideLines=e[0],this.treeReference=e[1]},initDragging:function(){o.bindAll(this,"deSelectObject","selectObject","updateGuidelines"),app.bind("canvas:click",this.deSelectObject),app.bind("object:new-selected",this.selectObject),app.bind("setup-guidelines",this.updateGuidelines),this.$dragTrigger=this.$el.find(".drag-helper"),this.$dragTriggerInner=this.$dragTrigger.find("div");var e=this;return this.$el.parents(".noneditable").length||this.model.get("static")?!1:(this.dragDelayTimer=0,this.draggable=s.create(this.$el,{viewReference:this,snapDistance:4,snapRadius:300,trigger:this.$dragTrigger,minimumMovement:3,zIndexBoost:!1,onDrag:function(t){e.model.set({x:this.x,y:this.y},{noCssUpdate:!0}),e.dragDelayTimer=(new Date).getTime()},onDragStart:function(){app.trigger("object:new-selected",e.model),app.trigger("object:drag-start",e.model),"blockinfographic"===app.settings.get("project_type")&&e.blockOnDragStart()},onDragEnd:function(t){app.trigger("object:drag-end",e.model),"blockinfographic"===app.settings.get("project_type")&&e.blockOnDragEnd(t,this.y)},onClick:function(t){if($(".stage .hiddenGroup").length){var i=$(".stage .hiddenGroup").attr("id"),s=app.collections.slides.get($(".stage .hiddenGroup").parents(".stage").attr("id"));return s.objectCollection.get(i).trigger("group:recalculate-size",{pureUpdate:!0}),$(".hiddenGroup").removeClass("hiddenGroup"),void app.trigger("object:deselect-object")}if("collection"===e.model.get("type")&&1===t.which){$(this.target).addClass("hiddenGroup");var o=$(document.elementFromPoint(this.pointerX,this.pointerY)).parent().parent();if($(o).hasClass("el")&&(o.find(".vm-text").length||o.find("svg").length||o.find("canvas").length)){var n=e.model.collection.find({id:o.attr("id")}),r=!1;if(e.model.get("group").forEach(function(e,t){e.get("id")===n.get("id")&&(app.trigger("object:new-selected",n),app.trigger("object:onclick",n),r=!0)}),r)return}else $(this.target).removeClass("hiddenGroup")}app.trigger("object:new-selected",e.model),app.trigger("object:onclick",e.model)},liveSnap:r,isInVicinity:function(e){var t=this.viewReference.draggable[0].x,i=this.viewReference.draggable[0].y;return this.snapRadius>this.xyDistance({x:t,y:i,id:this.viewReference.model.get("id")},e)},xyDistance:function(e,t){return e.id===t.id?Number.MAX_SAFE_INTEGER:Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},isPartOf:function(e,t){var i=e===t.get("id");if("collection"===t.get("type")){var s=t.get("group");if(o.isUndefined(s))return!1;for(var n=s.length,r=0;n>r&&!i;++r)i=s[r].get("id")===e}return i},searchForSnapPoints:function(e,t,i){e+=i;var s=this.viewReference.guideLines[t+"Tree"];if(s){var o=this.viewReference.model,n={id:o.get("id")};n[t]=e;var r=s.nearest(n,4,this.snapDistance);"x"===t?this.snapRadius=500+o.get("width"):"y"===t?this.snapRadius=500+o.get("height"):this.snapRadius=500;for(var a=r.length,l=0;a>l;++l){var d=r[l][0];if(!this.isPartOf(d.id,o)&&this.isInVicinity(d))return{coordinate:d[t],model:o,delta:i,id:d.id}}if(e<this.snapDistance&&e>-this.snapDistance)return{coordinate:0,model:o,delta:i};if("x"===t){var h=app.settings.get("slideWidth");if(h-e<this.snapDistance&&h-e>-this.snapDistance)return{coordinate:h,model:o,delta:i};if(h/2-e<this.snapDistance&&h/2-e>-this.snapDistance)return{coordinate:h/2,model:o,delta:i}}else if("y"===t){var c=app.settings.get("slideHeight");if(c-e<this.snapDistance&&c-e>-this.snapDistance)return{coordinate:c,model:o,delta:i};if(c/2-e<this.snapDistance&&c/2-e>-this.snapDistance)return{coordinate:c/2,model:o,delta:i}}}return!1}}),this.model.draggable=this.draggable,void((this.model.get("x")||this.model.get("y"))&&n.set(this.$el,{x:parseInt(this.model.get("x")),y:parseInt(this.model.get("y"))})))},blockOnDragStart:function(){app.trigger("object:history-start-ignore");var e=app.collections.slides.get($("#"+this.model.get("id")).parents(".stage.infoblock").attr("id"));app.trigger("object:history-save-status",this.model,e)},blockOnDragEnd:function(e,t){this.relocateObject(e,t),app.trigger("object:history-stop-ignore");var i=app.collections.slides.get($("#"+this.model.get("id")).parents(".stage.infoblock").attr("id"));app.trigger("object:history-retrieve-status",i)},relocateObject:function(e,t){var i=Math.abs(this.model.get("width")*Math.sin(this.model.get("rotation")*(Math.PI/180)))+Math.abs(this.model.get("height")*Math.cos(this.model.get("rotation")*(Math.PI/180))),s=app.collections.slides.get($("#"+this.model.get("id")).parents(".stage.infoblock").attr("id")),n=$("#"+this.model.get("id")).parents(".stage.infoblock").offset().top,r=n+s.get("height")*app.settings.get("zoom");if(0===s.get("order")){if(e.y<=n)return void(0>=t+i&&this.model.set("y",10-i))}else if(s.get("order")===app.collections.slides.length-1){if(e.y>=r)return void(t>=s.get("height")&&this.model.set("y",s.get("height")-10))}else if(e.y>=n&&e.y<=r)return;var a=$("#"+this.model.get("id")).offset().top;o.each(app.collections.slides.models,function(t){var n=$("#"+t.get("id")).offset(),r=n.top+t.get("height")*app.settings.get("zoom");if(n.top<=e.y&&r>=e.y&&s.get("id")!==t.get("id")){var l,d,h=[];if("collection"===this.model.get("type"))this.model=s.objectCollection.get(this.model.get("id")),this.getModelInGroup(this.model.get("group"),h),h.push(o.extend({},JSON.parse(JSON.stringify(this.model.attributes)))),d=this.model.get("y"),l=this.model.get("id"),h.sort(function(e,t){return e.order-t.order}),o.each(h,function(e,t){e.order=t});else{var c=$.extend(!0,{},this.model.toJSON());c.order=0,h.push(c)}s.objectCollection.remove([this.model]),app.trigger("textEditor:hideAfterRemove");var g=function(){var e;e=h.length>1?t.objectCollection.get(l):t.objectCollection.get(h[0].id),setTimeout(function(){app.trigger("object:new-selected",e)},0)};app.trigger("slide:new-selected",t);var p=t.objectCollection.length;return void o.each(h,function(e,s){var n=o.clone(e);delete n.link,n.order+=p,h.length>1?s===h.length-1?app.trigger("drop-object",o.extend({},n,{y:(a-$("#"+t.get("id")).offset().top)/app.settings.get("zoom")+n.y-d}),{callBack:g}):app.trigger("drop-object",o.extend({},n,{y:(a-$("#"+t.get("id")).offset().top)/app.settings.get("zoom")+n.y-d})):app.trigger("drop-object",o.extend({},n,{y:(a-$("#"+t.get("id")).offset().top)/app.settings.get("zoom")+(i-this.model.get("height"))/2}),{callBack:g})},this)}},this)},getModelInGroup:function(e,t){o.each(e,function(e){"collection"===e.get("type")?(this.getModelInGroup(e.get("group"),t),t.push($.extend(!0,{},JSON.parse(JSON.stringify(e.attributes))))):t.push($.extend(!0,{},e.toJSON()))},this)}}},{"./snapObjectMixin.js":75,Draggable:"Draggable",underscore:52}],74:[function(e,t,i){var s=window.TweenMax,o=e("underscore"),n=e("perfect-scrollbar");t.exports={initScroll:function(e,t,i){this.resizeId=-1,this.$resizeElement=e,this.heightCallback=t,this.widthCallback=i,this.setDimensions(),this.hovered=!1,this.useKeyboard=!0,n.initialize(this.$resizeElement[0],{wheelSpeed:.5,useKeyboard:!1,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),this.events||(this.events={}),this.delegateEvents(o.extend(this.events,{mouseenter:"mouseenter",mouseleave:"mouseleave"})),this.listenTo(app,"key-press",this.keyboard),o.bindAll(this,"resize","keyboard","mouseenter","mouseleave"),app.on();var s=this;$(window).on("resize",function(){clearTimeout(s.resizeId),s.resizeId=setTimeout(s.resize,500)}),this.$resizeElement.mouseenter(function(t){this.updateScroll(e[0])}.bind(this))},mouseleave:function(){this.hovered=!1},mouseenter:function(){this.hovered=!0},disableKeyboardScrolling:function(){this.stopListening(app,"key-press",this.keyboard),this.useKeyboard=!1},enableKeyboardScrolling:function(){this.listenTo(app,"key-press",this.keyboard),this.useKeyboard=!0},resize:function(){this.setDimensions(),n.update(this.$resizeElement[0])},setDimensions:function(){"undefined"!=typeof this.heightCallback&&s.set(this.$resizeElement,{css:{height:this.heightCallback()}}),"undefined"!=typeof this.widthCallback&&s.set(this.$resizeElement,{css:{width:this.widthCallback()}})},keyboard:function(e){if(!this.hovered||!this.useKeyboard)return!1;switch(e){case 38:this.$resizeElement[0].scrollTop-=30,n.update(this.$resizeElement[0]);break;case 40:this.$resizeElement[0].scrollTop+=30,n.update(this.$resizeElement[0]);break;case 37:this.$resizeElement[0].scrollLeft-=30,n.update(this.$resizeElement[0]);break;case 39:this.$resizeElement[0].scrollLeft+=30,n.update(this.$resizeElement[0])}},updateScroll:function(e){n.update(e)}}},{"perfect-scrollbar":31,underscore:52}],75:[function(e,t,i){t.exports={x:function(e,t){if(!this.isDragging)return e;if(app.settings.get("grid.visible")&&app.settings.get("grid.gridSnap")){var i=app.settings.get("grid.gridHorizontalGap");return e-Math.round(e/i)*i<this.vars.snapDistance?Math.round(e/i)*i-2:i+Math.round(e/i)*i-e<this.vars.snapDistance?Math.round(e/i)*i-2:Math.round(e)}if(app.settings.get("grid.objectSnap")){var s=!1,o=this.vars.viewReference.model,n=this.vars.searchForSnapPoints(e,"x",0);if(n||(n=this.vars.searchForSnapPoints(e,"x",o.get("width"))),n||(n=this.vars.searchForSnapPoints(e,"x",o.get("width")/2)),n&&(app.trigger("object:snapped-x",n),s=n.coordinate-n.delta,n.id&&$("#"+n.id).addClass("highlightedel")),s!==!1)return s;app.trigger("object:hide-guide-x")}return Math.round(e)},y:function(e){if(!this.isDragging)return e;if(app.settings.get("grid.visible")&&app.settings.get("grid.gridSnap")){var t=app.settings.get("grid.gridVerticalGap");return e-Math.round(e/t)*t<this.vars.snapDistance?Math.round(e/t)*t-2:t+Math.round(e/t)*t-e<this.vars.snapDistance?Math.round(e/t)*t-2:Math.round(e)}if(app.settings.get("grid.objectSnap")){var i=!1,s=this.vars.viewReference.model,o=this.vars.searchForSnapPoints(e,"y",0);if(o||(o=this.vars.searchForSnapPoints(e,"y",s.get("height"))),o||(o=this.vars.searchForSnapPoints(e,"y",s.get("height")/2)),o&&(app.trigger("object:snapped-y",o),i=o.coordinate-o.delta,o.id&&$("#"+o.id).addClass("highlightedel")),i!==!1)return Math.round(i);app.trigger("object:hide-guide-y")}return Math.round(e)}}},{}],76:[function(e,t,i){t.exports={isTextObjectBeingEdited:function(e){return $(".visme-edit-focus").length>0}}},{}],77:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("./objectModel.js"),r=e("../mixin/collection/ordinalMixin.js"),a=s.Collection.extend(o.extend({},r,{model:function(e,t){return o.has(e,"type")&&o.has(app.models.objects,e.type)?new app.models.objects[e.type](e,t):(app.trigger("error","Type wasn't specified"),new n(e,t))},initialize:function(){o.bindAll(this,"remove","callbackRemovePendingItems"),this.eventType="objectCollection",this.groups={},this.sortKey="order",this.listenTo(app,"objectCollection:remove:view-model",this.remove),this.listenTo(app,"object:ajax-loaded",this.callbackRemovePendingItems)},getPromises:function(){for(var e=[],t=this.models.length,i=0;t>i;++i)e=e.concat(this.models[i].getPromises());return e},pendingRenderedItems:0,parseGroup:function(e,t){this.pendingRenderedItems=0;var i,s,n=e.Objects,r=app.settings.get("zoom");"blockinfographic"===app.settings.get("project_type")?(i=o.isUndefined(e.x)?$(".stage.infoblock.active").width()/2:e.x,s=o.isUndefined(e.y)?$(".stage.infoblock.active").height()/2:e.y):(i=o.isUndefined(e.x)?($(window).width()/2-$(".stage:visible:eq(0)").offset().left)/r:e.x,s=o.isUndefined(e.y)?($(window).height()/2-$(".stage:visible:eq(0)").offset().top)/r:e.y),this.groupObjectCount=n.length,n=o.sortBy(n,function(e){return e.order}),o.each(n,function(e){"svg"===e.type&&this.pendingRenderedItems++,e.x=(o.isUndefined(e.x)?0:e.x)+i,e.y=(o.isUndefined(e.y)?0:e.y)+s,app.trigger("drop-object",e)},this),0===this.pendingRenderedItems?app.trigger("group-object:copy",this.groupObjectCount):setTimeout(function(){app.trigger("group-object:copy",this.groupObjectCount)}.bind(this),100)},callbackRemovePendingItems:function(){0===--this.pendingRenderedItems&&this.updateModelOrdinals()},groupParsers:{}}));t.exports=a},{"../mixin/collection/ordinalMixin.js":68,"./objectModel.js":79,backbone:"backbone",underscore:52}],78:[function(e,t,i){var s=e("backbone"),o=e("underscore");t.exports=s.View.extend({resetIds:!1,initialize:function(e){this.$slideEl=e.slideEl,this.slideType=e.slideType,this.$slideEl||(this.$slideEl=$("#sl1 article")),e.resetIds&&(this.resetIds=!0),e.idPrefix&&(this.idPrefix=e.idPrefix),this.listenTo(this.collection,"add",this.renderOne),this.listenTo(this.collection,"reset",this.renderAll),this.listenTo(app,"objectCollection:remove:model-view",this.remove),this.listenTo(this.collection,"reset",this.reset),o.bindAll(this,"renderOne"),this.subViews={},this.render()},render:function(){return this.renderAll(),this},renderOne:function(e){if("collection"!==e.get("type")||"publish"!==app.settings.get("editMode")){if(!app.views.objects[e.get("type")])return void console.log("Type not found",e.get("type"),e.get("id"));if(this.resetIds&&(e.setupId(!0),e.set("static",!0)),!o.isUndefined(this.idPrefix)&&(e=$.extend(!0,{},e),e.attributes.id=this.idPrefix+e.attributes.id,"image"===e.get("type"))){var t=e.attributes.src;e.attributes.src=t.substring(0,t.lastIndexOf("."))+"_t"+t.substring(t.lastIndexOf("."))}var i=new(app.views.objects[e.get("type")])({model:e});return"temp"!==this.slideType&&"Layout"!==this.slideType||(i.backendRendered=!1),this.subViews[e.get("id")]=i,this.$slideEl.find(this.subViews[e.get("id")].$el).length||this.$slideEl.append(this.subViews[e.get("id")].$el),this.hasSlideBeenRendered()&&e.trigger("object:render:after",this.$slideEl.hasClass("layout")),this}},hasSlideBeenRendered:function(){return 0!==this.$slideEl.parent().parent().length||this.$slideEl.hasClass("layout")},renderAll:function(){this.collection.each(this.renderOne,this)},remove:function(e){o.has(this.subViews,e.get("id"))&&(this.subViews[e.get("id")].unbind(),this.subViews[e.get("id")].model.unbind("change",this.subViews[e.get("id")].update),this.subViews[e.get("id")].off(),this.subViews[e.get("id")].remove(),delete this.subViews[e.get("id")])},reset:function(){o.each(this.subViews,function(e,t){
e.remove()},this)}})},{backbone:"backbone",underscore:52}],79:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("../mixin/model/attributeValidatorMixin.js"),r=e("../mixin/model/modelColorChangingMixin.js"),a=e("../../helpers/uniqueId.js");s.DeepModel=e("backbone-deep-model");var l=s.DeepModel.extend(o.extend({},n,r,{idAttribute:"id",activeMenuItem:".icon_color",tempAttributes:["selected","tempProportionLock"],propertyMenuItems:[".btn-animate",".btn-delete",".btn-duplicate",".btn-link",".btn-arrange",".btn-effects"],premium:!1,idPrefix:"el",idCounterType:"object",subMenu:{options:{},effect:["opacityPopup","dropshadowPopup"],animate:["animatePopup"],link:["linkPopup"],color:["colorPopup"],arrange:["layersPopup"]},nonTweenable:["name","link","id","type","proportionLock","lock","options","border","patterns","groupType","parseText","colors","param1","animParam1","render","icon","inarow","anim_en","anim_ex","tempProportionLock","text","preserveAspectRatio","playerid","startTime","premium","isGrouped","orid","onLibSlide","static","previousId","defaultColor","paletteIndexes","noAnimation"],removeNonTweenableChanges:function(){o.each(this.changed,function(e,t){o.contains(this.nonTweenable,t)&&delete this.changed[t]},this)},toJSON:function(e){return o.omit(this.attributes,this.tempAttributes)},defineReadyPromise:function(){var e=$.Deferred(),t=this;this.bind("object:render:after",e.resolve),e.done(function(){t.trigger("ready")}).fail(function(){console.log("failed: "+app)}),this.promise=e.promise()},getPromises:function(){return[this.promise]},initialize:function(e){return o.bindAll(this,"updateColorsByPalette","searchAndReplaceColor","clearDefaultColor","undoPaletteColor"),this.validationError?!1:(this.setupId(!1),o.isUndefined(this.get("position"))||this.overridePosition(),this.defineReadyPromise(),this.bind("object:update:palette",this.updateColorsByPalette),app.on("object:update:palette",this.updateColorsByPalette),app.on("object:color:replace",this.searchAndReplaceColor),app.on("object:undo:palette",this.undoPaletteColor),void app.on("object:clearDefault:palette",this.clearDefaultColor))},setupId:function(e){if(o.isNull(this.get("id"))||e){var t=o.isUndefined(this.get("onLibSlide"))?!1:this.get("onLibSlide");t?this.set("id",a.randomId(this.idPrefix)):this.set("id",a.uniqueId(this.idPrefix,this.idCounterType))}else a.notifyIdCounter(this.get("id"),this.idCounterType);o.isNull(this.id)&&(this.id=this.get("id"))},overridePosition:function(){var e=app.settings.get("zoom");if("blockinfographic"===app.settings.get("project_type"))switch(this.get("position")){case"center:content":this.set("x",($(".stage.infoblock.active").width()-this.get("width"))/2),this.set("y",($(".stage.infoblock.active").height()-this.get("height"))/2);break;default:this.set("x",0),this.set("y",0)}else switch(this.get("position")){case"center:content":this.set("x",(($(window).width()-this.get("width")*e)/2-$(".stage:visible:eq(0)").offset().left)/e),this.set("y",(($(window).height()-this.get("height")*e)/2-$(".stage:visible:eq(0)").offset().top)/e);break;case"left:bottom":this.set("x",0),this.set("y",app.settings.get("slideHeight")-this.get("height"));break;default:this.set("x",0),this.set("y",0)}this.unset("position")},validate:function(e){return this.validateAttributes(e)},rotate:function(e,t,i,s,o){var n=Math.cos,r=Math.sin;o=o*Math.PI/180;var a=(e-i)*n(o)-(t-s)*r(o)+i,l=(e-i)*r(o)+(t-s)*n(o)+s;return[a,l]},getBoundingClientRect:function(){var e=this.get("x"),t=this.get("y"),i=this.get("height"),s=this.get("width"),n=e+s/2,r=t+i/2,a=this.get("rotation"),l=Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,h=[[e,t],[e+s,t],[e,t+i],[e+s,t+i]];return o.each(h,function(e){var t=e[0],i=e[1],s=this.rotate(t,i,n,r,a),o=s[0],h=s[1];d>o&&(d=o),l>h&&(l=h)},this),{left:d,top:l,width:s,height:i}},isUserModel:function(){var e=this.get("type");return"audio"!==e&&"collection"!==e},validators:{type:{type:"string",params:{maxlength:32,notblank:!0}},name:{type:"string",params:{maxlength:64,notblank:!0}},x:{type:"number",params:{min:-5e3,max:15e3}},y:{type:"number",params:{min:-5e3,max:15e3}},lock:{type:"boolean"},opacity:{type:"number",params:{min:0,max:100}},width:{type:"number",params:{min:0,max:5e3}},height:{type:"number",params:{min:0,max:1e4}}},defaults:{id:null,type:null,x:0,y:0,width:0,height:0,name:"",lock:!1,rotation:0,opacity:100,animation:{enter:{delay:0,name:"None"},exit:{delay:0,name:"None"}},proportionLock:!0},contains:function(e){var t=this.get("group");if(t&&t.length)for(var i=0;i<t.length;++i){var s=t[i],o=s.id?s.id:s.get("id");if(e.get("id")===o)return!0}return!1}}));t.exports=l},{"../../helpers/uniqueId.js":64,"../mixin/model/attributeValidatorMixin.js":69,"../mixin/model/modelColorChangingMixin.js":70,backbone:"backbone","backbone-deep-model":1,underscore:52}],80:[function(e,t,i){var s=e("Draggable"),o=e("backbone"),n=e("underscore"),r=e("../mixin/view/dragObjectMixin.js"),a=e("../mixin/view/textEditorMixin.js"),l=e("../mixin/view/colorChangingMixin.js"),d=window.TweenMax;t.exports=o.View.extend(n.extend({},r,a,l,{wrapperTemplate:"#object",asyncProperties:[],backendRenderedProperties:["width","height","text","backgroundColor","opacity","borderWidth","animation","repeat","borderRadius","borderStyle","borderColor"],template:"",draggableRef:!1,events:function(){var e={};return"publish"===app.settings.get("editMode")?n.extend(e,{mouseenter:"mouseEnter",mouseleave:"mouseLeave"}):n.extend(e,{dblclick:"dblclick"}),e},initialize:function(){if(!this.model)throw new Error("model is required to create an object");n.bindAll(this,"update","render","afterRender","bindMousedownEvent","mousedownEvent","updateColorsByPalette","undoPaletteColor","clearDefaultColor"),this.model.bind("change",this.update),this.model.bind("object:render:after",this.afterRender),this.selected=!1,this.render(),this.bindMousedownEvent()},bindMousedownEvent:function(){app.settings.isIE()||app.settings.getChromeVersion()>=55?(this.$el.off("pointerdown"),this.$el.on("pointerdown",this.mousedownEvent)):(this.$el.off("mousedown"),this.$el.on("mousedown",this.mousedownEvent))},dblclick:function(){if(!this.model.get("lock")&&this.model.subMenu.settings&&"text"!==this.model.get("type")&&"table"!==this.model.get("type")){var e=200;"infogrWidget"===this.model.get("type")&&"semicircles"===this.model.get("render")&&(e=350),app.trigger("propertiesSubMenu:show","settings",this.model,{left:$(".btn-settings").offset().left-$("#submenu").offset().left+$(".btn-settings").width()/2-30,right:"auto"},e),$(".btn-property").removeClass("activated"),$(".btn-settings").addClass("activated")}},mouseEnter:function(){app.trigger("object:mouseenter",this.model)},mouseLeave:function(){app.trigger("object:mouseleave",this.model)},mousedownEvent:function(e){"blockinfographic"===app.settings.get("project_type")&&"editor"===app.settings.get("editMode")&&this.activateBlock();var t=3,i=1;switch(e.which){case i:this.leftClick(e);break;case t:this.rightClick(e)}},activateBlock:function(){if($("#"+this.model.get("id")).parents(".stage.infoblock").length>0&&!$("#"+this.model.get("id")).parents(".stage.infoblock").hasClass("active")){var e=$("#"+this.model.get("id")).parents(".stage.infoblock").attr("id"),t=app.collections.slides.get(e);app.trigger("slide:new-selected",t)}},leftClick:function(e){"text"===this.model.get("type")&&$("#"+this.model.get("id")).find(".vm-texteditor-rich").length||window.getSelection().removeAllRanges(),app.trigger("object:click",this.model,e),"editor"===app.settings.get("editMode")&&(this.model.get("lock")?app.trigger("objectLockedView:show",this.model):app.trigger("objectLockedView:hide"),this.model.get("isGrouped")&&(this.draggableRef=s.get("#"+this.$el[0].id),this.draggableRef||(this.initDragging(),this.draggableRef=s.get("#"+this.$el[0].id)),this.draggableRef.disable()))},rightClick:function(e){return"editor"!==app.settings.get("editMode")||this.isTextObjectBeingEdited(e)?void 0:(this.model.get("isGrouped")!==!0&&app.trigger("contextMenuPopup:show",this.model,e),e.stopPropagation(),e.preventDefault(),!1)},isRendered:function(){return 0!==this.$el.closest(".stage").length},getSlideId:function(){return this.$el.closest(".stage")[0].id},hasAsyncProperty:function(e){for(var t=0;t<this.asyncProperties.length;++t)if(n.has(e,this.asyncProperties[t]))return!0;return!1},update:function(e,t){var i=this;this.hasAsyncProperty(this.model.changed)||"loaded"!==app.settings.get("state")||app.trigger("project:change"),(n.has(this.model.changed,"lock")||n.has(this.model.changed,"order")||!this.draggableRef||n.has(this.model.changed,"isGrouped"))&&"editor"===app.settings.get("editMode")&&(this.draggableRef=s.get("#"+i.$el[0].id),this.draggableRef||(this.initDragging(),this.draggableRef=s.get("#"+i.$el[0].id)),n.isUndefined(this.draggableRef)||((this.model.changed.lock||this.model.changed.isGrouped)&&this.draggableRef.enabled()?this.draggableRef.disable():!this.draggableRef||this.draggableRef.enabled()||this.model.get("lock")||this.draggableRef.enable())),this.model.removeNonTweenableChanges(),n.has(this.model.changed,"visibility")&&"hidden"===this.model.changed.visibility&&app.trigger("object:deselect-object",this.model),n.has(this.model.changed,"opacity")&&(d.set(this.$el,{css:{opacity:this.model.get("opacity")/100}}),delete this.model.changed.opacity),n.has(this.model.changed,"order")&&(d.set(this.$el,{css:{"z-index":this.model.get("order")}}),delete this.model.changed.order),this.model.get("lock")===!0&&(n.has(this.model.changed,"x")&&(this.model.changed.x=this.model.previous("x")),n.has(this.model.changed,"y")&&(this.model.changed.y=this.model.previous("y"))),n.has(this.model.changed,"text-shadow")&&this.$el.css("text-shadow",this.model.get("text-shadow")),n.has(this.model.changed,"box-shadow")&&this.$el.css("box-shadow",this.model.get("box-shadow"));var o=this;"editor"!==app.settings.get("editMode")&&(0!==this.model.changed.rotation?(n.isUndefined(this.model.changed.x)||n.isUndefined(this.model.changed.y))&&(this.model.changed.x=this.model.get("x"),this.model.changed.y=this.model.get("y")):delete this.model.changed.rotation),this.model.changed&&"editor"===app.settings.get("editMode")&&(t&&t.noAnimation||"loaded"!==app.settings.attributes.state)?d.set(this.$el,n.extend({onComplete:function(){o.isRendered()&&app.trigger(o.getSlideId()+":change",o.model)}},this.model.changed)):!this.model.changed||n.isEmpty(this.model.changed)||!n.isUndefined(t)&&t.noCssUpdate?n.isEmpty(this.model.changed)&&this.isRendered()&&app.trigger(this.getSlideId()+":change",this.model):d.to(this.$el,.1,n.extend({onComplete:function(){o.isRendered()&&app.trigger(o.getSlideId()+":change",o.model)}},this.model.changed)),"editor"===app.settings.get("editMode")&&this.addObjectDragBuffer()},addObjectDragBuffer:function(e){if((n.has(this.model.changed,"width")||n.has(this.model.changed,"height"))&&this.$dragTrigger){var t=n.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");this.model.get("fixedWidth")&&d.set(this.$vmText,{width:this.model.get("width")-2*this.model.get("padding.horizontal")-2*t}),this.model.get("tableObject")&&d.set(this.$vmTable,{width:this.model.get("width")-2*this.model.get("padding.horizontal")-2*t,height:this.model.get("height")-2*this.model.get("padding.vertical")-2*t}),d.set(this.$dragTrigger,{width:this.model.get("width"),height:this.model.get("height")}),d.set(this.$dragTriggerInner,{width:this.model.get("width"),height:this.model.get("height")})}if((n.has(this.model.changed,"borderStyle")||n.has(this.model.changed,"borderWidth"))&&this.$dragTrigger){var i=n.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");d.set(this.$dragTrigger,{"margin-left":-i,"margin-top":-i})}},render:function(){if($("#content #"+this.model.get("id")).length)this.setElement($("#"+this.model.get("id")));else{var e=n.template($(this.wrapperTemplate).html()),t=e({object:n.extend({},this.model.toJSON(),app.settings.toJSON()),template:n.template($(this.template).html())});this.setElement(t)}return Boolean(this.model.get("premium"))!==!0||n.contains(app.settings.get("permissions"),"asset:premiumInfographics")||this.$el.append('<div class="premium-sample"><div></div></div>'),this},afterRender:function(e){!n.isUndefined(this.backendRendered)&&!this.backendRendered||$("#"+this.model.get("id")).closest(".layout").length||e?this.model.changed=this.model.toJSON():this.model.changed=n.omit(this.model.toJSON(),this.backendRenderedProperties),this.model.trigger("change",this.model)},deSelectObject:function(e){if(this.selected){if(this.$el.removeClass("selected"),this.selected=!1,$(".stage .hiddenGroup").length&&!this.$el.hasClass("el-group")){var t=$(".stage .hiddenGroup").attr("id"),i=app.collections.slides.get($(".stage .hiddenGroup").parents(".stage").attr("id"));i.objectCollection.get(t).trigger("group:recalculate-size",{pureUpdate:!0}),$(".hiddenGroup").removeClass("hiddenGroup")}e&&e.silent?"text"!==this.model.get("type")&&"table"!==this.model.get("type")||app.trigger("texteditor:hide"):app.trigger("object:deselect-object",this.model)}},selectObject:function(e){this.model.get("id")!==e.get("id")||this.selected?this.selected&&this.model.get("id")!==e.get("id")&&this.deSelectObject({silent:!0}):(this.selected=!0,this.$el.addClass("selected"),"collection"===this.model.get("type")&&n.each(this.model.get("group"),function(e){e.get("lock")&&!this.model.get("lock")&&this.model.set("lock",!0)},this))},getCenter:function(){var e=this.model.getBoundingClientRect();return{x:e.width/2+e.left,y:e.height/2+e.top}}}))},{"../mixin/view/colorChangingMixin.js":72,"../mixin/view/dragObjectMixin.js":73,"../mixin/view/textEditorMixin.js":76,Draggable:"Draggable",backbone:"backbone",underscore:52}],81:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["values","itemPerRow","icons","spot","showIcon3","iSettings1"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{itemPerRow:{type:"number",params:{min:1,max:100}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"array",itemPerRow:5,showIcon3:!1,iSettings1:!1,values:[4,3,9],icons:[{width:47,height:125,src:"svgicons/InfographicsReal/inf1.svg",svgHtml:'<div class="array-spot"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="47.5px" height="125px" viewBox="0 0 47.5 125" style="enable-background:new 0 0 47.5 125;" xml:space="preserve"><style type="text/css">	.st0{fill:#6CB5B8;}</style><path id="Color1" class="st0" d="M47.5,33.7c0-6.2-5-11.3-11.1-11.3c0,0-0.1,0-0.1,0v0H11.3v0c-0.1,0-0.2,0-0.3,0  C5,22.4,0,27.5,0,33.7c0,0.1,0,0.2,0,0.2h0v34.8h0c0.1,2.2,1.9,4,4.2,4c2.3,0,4.1-1.8,4.2-4h0V40.3h3v80.2h0  c0.1,2.5,2.5,4.5,5.6,4.5s5.5-2,5.6-4.5h0V71h2.6v49.6h0c0.1,2.5,2.5,4.5,5.6,4.5s5.5-2,5.6-4.5h0V40.3h2.9v28.4h0  c0.1,2.2,1.9,4,4.2,4c2.3,0,4.1-1.8,4.2-4h0V33.9h0C47.5,33.9,47.5,33.8,47.5,33.7z"></path><circle id="Color1_1_" class="st0" cx="23.8" cy="10.2" r="10.2"></circle></svg></div>'},{width:59,height:125,src:"svgicons/InfographicsReal/inf2.svg",svgHtml:'<div class="array-spot"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="59.9px" height="125px" viewBox="0 0 59.9 125" style="enable-background:new 0 0 59.9 125;" xml:space="preserve"><style type="text/css">	.st0{fill:#D65642;}</style><circle id="Color1" class="st0" cx="30" cy="10.5" r="10.5"></circle><path id="Color1_1_" class="st0" d="M40.6,125V88.3h14.9l-14-44.4v-5.4c0.1,0,0.5,0.2,1.5,2.4c1.1,2.5,7.4,24.7,9.3,27.5  c1.9,2.8,4.8,2.4,6.8,0.6c1.5-1.3,0.7-5.2,0-8.2c-0.8-2.8-7.7-27.3-8.6-29c-0.9-1.7-2.2-3.3-3.5-4.6c-1.4-1.3-5.4-3.2-5.4-3.2H18.4  c0,0-4,1.9-5.4,3.2c-1.4,1.3-2.6,2.8-3.5,4.6c-0.9,1.7-7.8,26.2-8.6,29c-0.7,3.1-1.5,6.9,0,8.2c1.9,1.7,4.9,2.1,6.8-0.6  c1.9-2.8,8.2-25,9.3-27.5c1-2.2,1.4-2.4,1.5-2.4v5.4l-14,44.4h14V125"></path></svg></div>'},{width:67,height:74,src:"svgicons/Animals/01_Animal.svg",svgHtml:'<div class="array-spot"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="67.443px" height="74.154px" viewBox="0 0 67.443 74.154" enable-background="new 0 0 67.443 74.154" xml:space="preserve"><path id="Color1" style="fill:#A060C6;" d="M63.208,7.938c-2.269-0.142-7.796-0.992-8.931-3.544C53.144,1.842,51.16,0,47.474,0c-3.686,0-5.812,0-5.812,0  c-2.692,0-6.095,2.126-6.095,5.102c0,2.979,0,4.252,0,4.252c-0.991,0.992-2.552,2.126-2.409,6.946  c0.142,4.82-0.851,12.616-6.238,17.718C21.534,39.122,6.652,50.462,8.21,67.896c-1.842,0.427-3.826-1.134-5.67-3.26  c-1.452-1.676-3.402-0.708-2.126,1.842c2.552,3.12,12.758,11.34,23.529,5.813c-0.424,0.426-0.708,1.56,1.418,1.56h18.427  c2.836-0.142,2.128-4.678,0.142-4.678c-1.984,0-7.228-0.284-9.78,0.426c0.851-0.992,6.236-4.962,6.236-8.364  c0-3.401-3.26-5.102-6.236-4.96c2.269-0.852,9.214-4.819,9.78-6.945c0.71,2.268,3.544,7.086,6.096,9.496  c2.553,2.409,2.269,6.804,4.11,9.214c1.844,2.41,2.978,1.702,4.112,2.126c0.424,0.142,4.536,0,4.536,0  c1.416-2.41,0-5.103-1.986-5.387c-1.984-0.283-2.692,0.427-3.544-1.983c-0.851-2.41-1.559-6.662-2.408-8.788  c-0.852-2.128-1.56-5.67-2.268-6.946c0.708-1.844,2.407-13.466-2.553-18.002c1.135-1.275,4.252-1.418,5.244-2.694  c0.992-1.275,1.702-3.684-1.275-5.386c0,0-0.566-3.401,0.852-3.686c1.416-0.282,2.834,1.134,5.528,1.134  c2.691,0,5.403-2.912,6.235-5.244C67.32,11.198,69.162,8.08,63.208,7.938z"></path></svg></div>'}]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],82:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js");t.exports=o.extend({template:"#array",margin:2,settings:{widgets:["newArrayPopup"]},initialize:function(){s.bindAll(this,"calculateArraySize","setSpotSize","importIcons","updateSpot","updatePremium"),this.model.bind("change:width",this.updateSpot),this.model.bind("change:icons change:showIcon3",this.updatePremium),this._super()},update:function(e,t){if(this.model.subMenu.settings=s.extend({},this.settings.widgets),s.has(this.model.changed,"spot")&&this.setSpotSize(),s.has(this.model.changed,"icons")&&!s.isEmpty(this.model.get("icons"))){var i=this.model.get("icons");s.isEmpty(i)||(i[0].svgHtml&&i[1].svgHtml&&i[2].svgHtml?this.calculateArraySize():this.getSvgXml())}(s.has(this.model.changed,"itemPerRow")||s.has(this.model.changed,"values")||s.has(this.model.changed,"showIcon3"))&&this.calculateArraySize(),s.has(this.model.changed,"premium")&&(!this.model.get("premium")||s.isElement(this.$el.find(".premium-sample")[0])||s.contains(app.settings.get("permissions"),"asset:premiumInfographics")?!this.model.get("premium")&&s.isElement(this.$el.find(".premium-sample")[0])&&this.$el.find(".premium-sample").remove():this.$el.append('<div class="premium-sample"><div></div></div>')),s.has(this.model.changed,"colors")&&this.setColors(),s.has(this.model.changed,"iSettings1")&&this.importIcons(),this._super(e,t)},updateSpot:function(){var e={};e.width=this.model.get("width")/this.model.get("itemPerRow"),e.height=e.width/(this.model.get("spot.width")/this.model.get("spot.height")),this.model.set("spot",e)},updatePremium:function(){var e=this.model.get("icons");s.isEmpty(e)||(e[0].premium||e[1].premium||e[2].premium&&this.model.get("showIcon3")?this.model.set("premium",!0):this.model.set("premium",!1))},render:function(){this._super()},getSvgXml:function(){var e=s.clone(this.model.get("icons")),t=this;s.each(e,function(i,s){var o=i.src,n=app.settings.get("assetsStorage"),r=o.indexOf(n)>-1?o:n+o;if(i.svgHtml){var a=$(i.svgHtml);t.$el.find("img").hide();var l=$('<div class="array-spot">').append($("<div>"+a+"</div>").find("svg").eq(0));l=$("<a>").append(l);var d=l.html();i.xml=$(d),e[0].svgHtml&&e[1].svgHtml&&e[2].svgHtml&&(t.model.unset("icons",{silent:!0}),t.model.set("icons",e))}else $.ajax({url:r,dataType:"xml",context:t,cache:!1,tryCount:0,retryLimit:10,success:function(s){var o=$('<div class="array-spot">').append($(s).find("svg").eq(0));o=$("<a>").append(o);var n=o.html();i.xml=$(n),i.svgHtml=n,i.width=t.parseSize(n,"width"),i.height=t.parseSize(n,"height"),e[0].svgHtml&&e[1].svgHtml&&e[2].svgHtml&&(t.model.unset("icons",{silent:!0}),t.model.set("icons",e))},error:function(e,t,i){return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0}})})},parseSize:function(e,t){return parseInt($(e).find("svg").attr(t).replace("px",""))},calculateArraySize:function(){var e=this.model.get("values")[0]+this.model.get("values")[1]+(this.model.get("showIcon3")?this.model.get("values")[2]:0),t=Math.ceil(e/this.model.get("itemPerRow")),i=[],o=0;i[0]=this.model.get("icons")[0].width/this.model.get("icons")[0].height,i[1]=this.model.get("icons")[1].width/this.model.get("icons")[1].height,this.model.get("showIcon3")?(i[2]=this.model.get("icons")[2].width/this.model.get("icons")[2].height,o=s.min([{value:Math.abs(1-i[0]),index:0},{value:Math.abs(1-i[1]),index:1},{value:Math.abs(1-i[2]),index:2}],function(e){return e.value}).index):o=s.min([{value:Math.abs(1-i[0]),index:0},{value:Math.abs(1-i[1]),index:1}],function(e){return e.value}).index;var n={};n.width=this.model.get("width")/this.model.get("itemPerRow"),n.height=n.width/i[o];var r=s.extend({},this.model.changed);this.model.set({height:n.height*t,spot:n}),this.model.changed=s.extend(r,this.model.changed),this.importIcons()},setSpotSize:function(){this.$el.find(".array-spot").css({width:Math.floor(this.model.get("spot.width")),height:Math.floor(this.model.get("spot.height"))});var e=100-200*this.margin/this.model.get("spot.width");this.$el.find(".array-spot svg").css({width:e+"%",height:e+"%"})},importIcon:function(e){var t=s.clone(this.model.get("icons")),i=$(t[e-1].svgHtml);i.addClass("icon-"+e).find("style").remove(),i.find("svg").find('[id^="Color1"]').attr({"class":"",style:"",fill:"",stroke:""}),this.$el.find(".array-wrapper").append(i)},importIcons:function(){this.$el.find(".array-wrapper").html("");var e=s.clone(this.model.get("icons")),t=s.clone(this.model.get("values"));this.model.get("showIcon3")||(e=[e[0],e[1]],t[2]=0);var i=this;if(this.model.get("iSettings1"))for(var o=0;o<t[0]+t[1]+t[2];o++)o<t[0]&&this.importIcon(1),o<t[1]&&this.importIcon(2),o<t[2]&&this.importIcon(3);else s.each(e,function(e,s){for(var o=0;o<t[s];o++)i.importIcon(s+1)});this.setSpotSize(),this.setColors()},setColors:function(){var e=s.clone(this.model.get("icons")),t=s.clone(this.model.get("colors")),i=this;s.each(e,function(e,s){i.$el.find(".icon-"+(s+1)+" svg").find('[id^="Color1"]').css({fill:t[s]})})}})},{"../../objectView.js":80,underscore:52}],83:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["enter","exit","volume","hash","fadinDuration","fadeoutDuration","delete_key","loop","size","audioStorage","audioType","tempVolume"]),this.activeMenuItem=null},validators:{},defineReadyPromise:function(){var e=$.Deferred(),t=this,i=app.settings.get("editMode");"editor"===i?this.bind("object:render:after",e.resolve):app.settings.get("is_mobile")===!0||"Download"===app.settings.get("project_type")?e.resolve():this.bind("oncanplay",e.resolve),e.done(function(e){t.trigger("ready")}),this.promise=e.promise()},defaults:{state:"stop",visibility:!1,opacity:100,type:"audio",name:"audio_name",loop:!1,animation:{enter:{delay:0,name:"Audio Enter",fadeDuration:3},exit:{delay:0,name:"Audio Exit",fadeDuration:3}},volume:100},play:function(){$("#"+this.get("id")+" audio")[0].play()},pause:function(){$("#"+this.get("id")+" audio")[0].pause()}}));s.defaults(n.prototype.defaults,o.prototype.defaults),t.exports=n},{"./../../objectModel.js":79,underscore:52}],84:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js");t.exports=o.extend({template:"#audio",initialize:function(){this._super(),s.bindAll(this,"timeUpdate","forceStop","timelineSeek","slideComplete","initPlayer"),this.player.addEventListener("timeupdate",this.timeUpdate),app.bind("audio:stop:all",this.forceStop),app.bind("slide:complete-animations",this.slideComplete),this.isFirstBegin=!0,"player"===app.settings.get("mode")&&app.settings.get("is_mobile")===!0&&app.settings.set("is_autoplay_animation","0")},timelineSeek:function(e){var t=Math.max(0,e-this.model.get("animation.enter.delay"));this.player.readyState>0&&(this.player.currentTime=t),this.model.set("state","pause")},forceStop:function(){this.model.set("state","stop")},slideComplete:function(){"Background Music"!==this.model.get("name")&&this.model.set("state","stop")},initPlayer:function(){var e=this.model.get("animation.enter.fadeDuration");0!==e&&(this.player.volume=0),this.player.loop=this.model.get("loop")},setVolume:function(e){this.player.volume=Math.min(Math.max(0,e),100)/100},manageAudioState:function(e){if(!this.player.readyState)return!1;switch(this.model.changed.state){case"stop":this.player.currentTime=0,this.player.pause();break;case"play":this.isFirstBegin&&(this.initPlayer(),this.isFirstBegin=!1),this.player.play();break;case"pause":this.player.pause()}},timeUpdate:function(){this.isStart()?this.fadeIn():this.isEnding()?this.fadeOut():this.player.volume!==this.model.get("volume")/100&&(this.player.volume=this.model.get("volume")/100),console.log("t,v:",this.player.currentTime+","+this.player.volume);var e=$(".clip_progressbar");if(e.length>0){var t=this.player.currentTime/this.player.duration*100;t>99&&this.model.trigger("audio:finished"),e.css("width",t+"%")}},isStart:function(){return this.player.currentTime<this.model.get("animation.enter.fadeDuration")},isEnding:function(){return this.player.currentTime>this.player.duration-this.model.get("animation.exit.fadeDuration")},fadeIn:function(){var e=this.model.get("animation.enter.fadeDuration");if(0!==e){var t=this.player.currentTime/e*this.model.get("volume");this.setVolume(t)}},fadeOut:function(){var e=this.model.get("animation.exit.fadeDuration");if(0!==e){var t=this.player.duration-this.player.currentTime,i=t/e*this.model.get("volume");this.setVolume(i)}},update:function(e,t){s.has(this.model.changed,"state")&&(this.manageAudioState(this.model.changed.state),delete this.model.changed.state),s.has(this.model.changed,"volume")&&(this.setVolume(this.model.get("volume")),delete this.model.changed.volume),s.has(this.model.changed,"loop")&&(this.player.loop=this.model.changed.loop,delete this.model.changed.loop),s.has(this.model.changed,"src")&&this.$el.find("audio source").attr("src",this.model.changed.src),this._super(e,t)},render:function(){if($("#"+this.model.el).length)return this;var e=s.template($(this.wrapperTemplate).html()),t=this.model.toJSON(),i="";return i=e(s.isUndefined(t.audioStorage)||""===t.audioStorage?{object:s.extend({},t,{audioStorage:t.hash&&t.hash.indexOf("audio")>-1?app.settings.get("assetsStorage"):app.settings.get("audioStorage")}),template:s.template($(this.template).html())}:{object:s.extend({},t),template:s.template($(this.template).html())}),this.setElement(i),this.model.get("is_bmusic")&&$("body").append(i),this.setPlayerEvents(),this},setPlayerEvents:function(){this.player=this.$el.find("audio")[0],this.player.loadstart=function(){this.model.trigger("onloadstart")}.bind(this),this.player.oncanplaythrough=function(){this.model.trigger("oncanplay")}.bind(this)}})},{"../../objectView.js":80,underscore:52}],85:[function(e,t,i){var s=e("underscore"),o=e("../../types/image/imageModel.js"),n=o.extend(s.extend({},{idPrefix:"bg",idCounterType:"background",defaults:{type:"background",name:"slideBackground",src:"",backgrounds:"",flipX:!1,flipY:!1,blur:0,contrast:0,brightness:0,saturate:0,hue:0,colorOverlay:0,filter:"no-filter",x:-5,y:-5,opacity:100,scale:100},initialize:function(){switch(this.nonTweenable=this.nonTweenable.concat(["bgtype","backgrounds","scale"]),this.subMenu.tile=["tilePopup"],this._super(),this.get("bgtype")){case"solid":case"gradient":this.propertyMenuItems=[".btn-color",".btn-background-image"];break;case"image":this.propertyMenuItems=[".btn-color",".btn-color-cover",".btn-background-image",".btn-flip",".btn-filters",".btn-tile",".btn-background-remove"];break;case"tile":this.propertyMenuItems=[".btn-color",".btn-color-cover",".btn-background-image",".btn-tile",".btn-background-remove"]}this.subMenu.background=["backgroundSection"]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"../../types/image/imageModel.js":95,underscore:52}],86:[function(e,t,i){var s=e("underscore"),o=e("../../types/image/imageView.js"),n=window.TweenMax,r=e("Draggable"),a=o.extend({template:"#background",wrapperTemplate:"#backgroundWrapper",events:{click:"selectBackground"},currentNav:!1,initialize:function(){s.bindAll(this,"resetImageSize"),"editor"===app.settings.get("editMode")&&"blockinfographic"!==app.settings.get("project_type")&&app.settings.on("change:slideWidth change:slideHeight",this.resetImageSize),this._super()},imageDbclick:function(){n.fromTo($("#submenu"),.3,{autoAlpha:1},{autoAlpha:0,repeat:3,yoyo:!0},.3)},deselect:function(){return this.$el.hasClass("selected")?(this.stopListening(app,"background:deselect object:new-selected canvas:click slide:new-selected",this.deselect),this.$el.removeClass("selected"),this.draggableBg&&this.draggableBg.disable(),"shapes"===this.currentNav?void $("#iconsShapes").click():(-1===this.currentNav&&(this.currentNav=1),this.currentNav>=0&&1!==this.currentNav&&$(".nav_item").eq(this.currentNav).click(),void(this.currentNav=!1))):!0},selectObject:function(e){return!1},dragging:!1,setupDraggableBg:function(){if("editor"!==app.settings.get("editMode"))return!0;var e=this.model.get("scale")/100,t={minX:app.settings.get("slideWidth")-this.model.get("width")*e+this.BLEED_PADDING,maxX:-this.BLEED_PADDING,minY:("blockinfographic"===app.settings.get("project_type")?this.$el.parents(".infoblock.stage").height():app.settings.get("slideHeight"))-this.model.get("height")*e+this.BLEED_PADDING,maxY:-this.BLEED_PADDING};if(this.draggableBg)this.draggableBg.applyBounds(t),this.draggableBg.enable();else{var i=this;r.create(this.$el.find(".crop_wrapper"),{bounds:t,minimumMovement:3,zIndexBoost:!1,onDrag:function(){i.model.set({x:this.x,y:this.y})},onDragStart:function(){i.dragging=!0},onDragEnd:function(){i.dragging=!1},onClick:function(){}}),this.draggableBg=r.get(this.$el.find(".crop_wrapper"))}},adjustImageSize:function(){if("image"===this.model.get("bgtype")){var e=this.model.get("scale")/100,t=parseInt(this.model.get("width")),i=parseInt(this.model.get("height"));if(this.$el.find("svg").css("height",i*e).css("width",t*e),this.$el.find("image").attr("height",i*e).attr("width",t*e),this.draggableBg){var s={minX:app.settings.get("slideWidth")-this.model.get("width")*e+this.BLEED_PADDING,maxX:-this.BLEED_PADDING,minY:("blockinfographic"===app.settings.get("project_type")?this.$el.parents(".infoblock.stage").height():app.settings.get("slideHeight"))-this.model.get("height")*e+this.BLEED_PADDING,maxY:-this.BLEED_PADDING};this.draggableBg.applyBounds(s)}}},resetImageSize:function(){if("image"===this.model.get("bgtype")){var e=this.model.get("width"),t=this.model.get("height"),i=app.settings.get("slideWidth"),s="blockinfographic"===app.settings.get("project_type")?this.$el.parents(".stage").height():app.settings.get("slideHeight"),o=this.scaleImage(e,t,i+2*this.BLEED_PADDING,s+2*this.BLEED_PADDING);this.model.set({width:o.width,height:o.height,x:-5,y:-5}),this.model.set({scale:100},{silent:!0}),n.set(this.$el.find(".crop_wrapper"),{x:-5,
y:-5}),this.$el.find("svg").css("height",o.height).css("width",o.width),this.$el.find("image").attr("height",o.height).attr("width",o.width),this.setupDraggableBg()}},selectBackground:function(){return"editor"!==app.settings.get("editMode")||$(".el.selected").length||this.$el.hasClass("selected")?!0:(this.listenTo(app,"background:deselect object:new-selected canvas:click slide:new-selected",this.deselect),app.trigger("propertiesPopup:show",this.model),this.currentNav=$(".p_selected").index(),$("#graphicsNavigation.nav_item").hasClass("p_selected")&&"iconsShapes"===$("#graphicsTabs").attr("active-tab")&&(this.currentNav="shapes"),app.trigger("contentPanel:open",{id:"graphicsNavigation"}),$("#photos").click(),"image"===this.model.get("bgtype")&&this.setupDraggableBg(),this.$el.addClass("selected"),!1)},rightClick:function(){return!1},leftClick:function(e){return!1},update:function(){switch((this.model.changed.x||this.model.changed.y)&&(this.dragging||n.set(this.$el.find(".crop_wrapper"),{x:this.model.changed.x,y:this.model.changed.y})),s.has(this.model.changed,"colors")&&"gradient"===this.model.get("bgtype")&&this.model.set({bgtype:"solid",src:"",colors:this.model.get("colors")}),s.has(this.model.changed,"opacity")&&n.set(this.$el.find(".crop_wrapper svg"),{opacity:this.model.get("opacity")/100}),s.has(this.model.changed,"flipX")&&(n.set(this.$el.find(".crop_wrapper svg"),{rotationY:this.model.get("flipX")?180:0,delay:0}),delete this.model.changed.flipX),s.has(this.model.changed,"flipY")&&(n.set(this.$el.find(".crop_wrapper svg"),{rotationX:this.model.get("flipY")?180:0,delay:0}),delete this.model.changed.flipY),this.updateFilters(),this.model.get("bgtype")){case"solid":this.model.propertyMenuItems=[".btn-color",".btn-background-image"];var e=this.model.get("colors");this.$el.find(".background-wrapper").attr("style",""),-1!==e[0].indexOf("transparent")?"editor"===app.settings.get("editMode")?this.$el.find(".background-wrapper").css("background","url(/images/transparent.gif)"):(this.$el.find(".background-wrapper").css("background","none"),this.$el.find(".background-wrapper").parents("arcticle").css("background","none")):this.$el.find(".background-wrapper").css("background",e[0]),this.$el.find(".crop_wrapper").hide(),this.$el.find("image").attr("xlink:href","");break;case"gradient":this.$el.find(".background-wrapper").attr("style",this.model.get("backgrounds")),this.$el.find(".crop_wrapper").hide(),this.$el.find("image").attr("xlink:href","");break;case"tile":this.$el.find(".background-wrapper").attr("style",this.model.get("backgrounds")),this.$el.find(".crop_wrapper").hide(),this.$el.find("image").attr("xlink:href",""),this.model.propertyMenuItems=[".btn-color",".btn-color-cover",".btn-background-image",".btn-flip[disabled]",".btn-filters[disabled]",".btn-tile",".btn-background-remove"];break;case"image":var t=app.settings.get("usersDataStorage")+this.model.get("src");if(s.has(this.model.changed,"scale")&&this.adjustImageSize(),this.$el.find("image").attr("xlink:href")!==t){this.model.propertyMenuItems=[".btn-color",".btn-color-cover",".btn-background-image",".btn-flip",".btn-filters",".btn-tile",".btn-background-remove"];var i=new Image;i.src=t;var o=this;i.onload=function(){var e=this.width,i=this.height,s=app.settings.get("slideWidth"),r="blockinfographic"===app.settings.get("project_type")?o.$el.parents(".stage").height():app.settings.get("slideHeight"),a=o.scaleImage(e,i,s+2*o.BLEED_PADDING,r+2*o.BLEED_PADDING);o.model.set({width:a.width,height:a.height,x:o.model.get("x"),y:o.model.get("y")}),n.set(o.$el.find(".crop_wrapper"),{x:o.model.get("x"),y:o.model.get("y")}),o.$el.find("svg").css("height",a.height).css("width",a.width),o.$el.find("image").attr("height",a.height).attr("width",a.width).attr("xlink:href",t),o.$el.find(".background-wrapper").css("background",""),o.setupDraggableBg(),o.$el.find(".loader_code").hide(),o.$el.find(".crop_wrapper").fadeIn("fast")}}break;case"loading":this.$el.find(".crop_wrapper").hide(),this.$el.find("image").attr("xlink:href",""),this.$el.find(".loader_code").fadeIn("fast"),this.$el.find("background-wrapper").css("background","white")}this.model.changed.bgtype&&app.trigger("menu:filter-property")},BLEED_PADDING:5,scaleImage:function(e,t,i,s,o){var n={width:0,height:0,fScaleToTargetWidth:!0};if(0>=e||0>=t||0>=i||0>=s)return n;var r=i,a=t*i/e,l=e*s/t,d=s,h=l>i;return h=h?o:!o,h?(n.width=Math.floor(r),n.height=Math.floor(a),n.fScaleToTargetWidth=!0):(n.width=Math.floor(l),n.height=Math.floor(d),n.fScaleToTargetWidth=!1),n.targetleft=Math.floor((i-n.width)/2),n.targettop=Math.floor((s-n.height)/2),n}});s.defaults(a.prototype.events,o.prototype.events),s.defaults(a.prototype.render,o.prototype.render),t.exports=a},{"../../types/image/imageView.js":96,Draggable:"Draggable",underscore:52}],87:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["data","subtitle","title","dynamicDataLink"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},getFormatData:function(){var e=this.get("chartData");if(s.isNull(e)||s.isUndefined(e))return e;var t=this.get("chartType");e=s.map(e,s.clone);var i={labels:this.getLabels(e)};return i.series=this.getSeries(e),0===i.series.length||0===i.series[0].data.length?null:("Pie"!==t&&"Funnel"!==t&&"Cylinder"!==t&&"Gauge"!==t||(i.series=i.series[0].data),this.validataData(i,t))},validataData:function(e,t){var i=this.getMaxLength(e,t);if(e.labels.length<i)for(var s=i-e.labels.length;s>0;)e.labels.push(""),s--;return e},getMaxLength:function(e,t){if("Pie"===t||"Funnel"===t||"Cylinder"===t||"Gauge"===t)return e.labels.length>e.series.length?e.labels.length:e.series.length;for(var i=0,s=0;s<e.series.length;s++){var o=e.series[s].data.length;o>i&&(i=o)}return e.labels.length>i?e.labels.length:i},getLabels:function(e){var t=s.clone(e[0]);return t=this.removeEmptyCells(t)},getSeries:function(e){var t=s.clone(e);t.shift(),t=this.removeEmptyRows(t);for(var i=0;i<t.length;++i){var o=t[i];t[i]={name:o[0],data:this.validateRow(this.removeEmptyCells(o))}}return t},removeEmptyRows:function(e){var t=0;return s.each(e,function(e,i){s.without(e,"",null).length>0&&i>t&&(t=i)}),e.slice(0,t+1)},removeEmptyCells:function(e){var t=0;return s.each(e,function(e,i){null===e||""===e||s.isUndefined(e)||i>t&&(t=i)}),e=e.slice(0,t+1),e.shift(),e},validateRow:function(e){for(var t=0;t<e.length;++t)"string"==typeof e[t]&&(e[t]=e[t].replace(/[^\d.-]/g,""));return e},defineReadyPromise:function(){var e=$.Deferred(),t=this;this.bind("chart:draw-done",e.resolve),e.done(function(){t.trigger("ready")}),this.promise=e.promise(),"Download"!==app.settings.get("project_type")&&setTimeout(function(){"pending"===this.promise.state()&&e.resolve()}.bind(this),1e4)},validators:{width:{type:"number",params:{min:10,max:1e4}},height:{type:"number",params:{min:10,max:1e4}}},defaults:{type:"chart",height:200,width:200,chartType:"Bar",proportionLock:!1,paletteIndexes:[4,0,0,0,0],options:{labelAngle:0,neckHeight:"30",valueRotation:0,pieStartAngle:0}}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],88:[function(e,t,i){var s=e("underscore"),o=e("../../../../helpers/fontLoader.js"),n=e("../../objectView.js"),r=e("../../../../helpers/loadScript.js");t.exports=n.extend({template:"#chart",initialize:function(){this._super(),s.bindAll(this,"forceDraw","drawnEvent","updateSlideThumb"),this.fontProperties=["titleFontFamily","subtitleFontFamily","legendFontFamily","xAxisFontFamily","yAxisFontFamily","valueFontFamily"];var e=this.model.get("labelsColor");s.isUndefined(e)||("Pie"===this.model.get("chartType")&&s.isUndefined(this.model.get("options.legendColor"))?(this.model.set("options.autoFillLegendColor",!1),this.model.set("options.legendColor",e)):s.isUndefined(this.model.get("options.xAxisColor"))&&s.isUndefined(this.model.get("options.yAxisColor"))&&(this.model.set("options.xAxisColor",e),this.model.set("options.yAxisColor",e)),this.model.unset("labelsColor")),"editor"===app.settings.get("editMode")?("blockinfographic"===app.settings.get("project_type")&&app.trigger("addToJobQueue",function(){this.forceDraw()}.bind(this),"loaded"),this.listenTo(app,"slide:new-selected",this.drawOnSelectedSlide)):"None"===this.model.get("animation.enter.name")&&("blockinfographic"===app.settings.get("project_type")?this.model.bind("timeline:play",this.forceDraw):(this.listenTo(app,"slide:transitionTo",this.delayChartDraw),this.listenTo(app,"timeline:set-play",this.delayChartDraw))),this.model.bind("resize-end",this.forceDraw),r("amcharts-lib"),this.syncDynamicData()},syncDynamicData:function(){var e=this.model.get("dynamicDataLink");!s.isUndefined(e)&&e.length>0&&this.setDynamicData(e)},setDynamicData:function(e){var t=e.match(/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);if(null!==t){var i=t[1],o="https://spreadsheets.google.com/feeds/worksheets/"+i+"/public/basic?alt=json",n=[[""]],r=this;$.getJSON(o).done(function(e){var t=e.feed.entry,a=t[0].id.$t.match(/public\/basic\/([a-zA-Z0-9-_]+)/)[1];o="https://spreadsheets.google.com/feeds/cells/"+i+"/"+a+"/public/values?alt=json",$.getJSON(o).done(function(e){var t=e.feed.entry;$(t).each(function(){var e=this.gs$cell,t=e.col,i=e.row;s.isUndefined(n[i-1])&&(n[i-1]=[]),n[i-1][t-1]=e.$t}),n.length>=2&&(r.model.unset("chartData",{silent:!0}),r.model.set("chartData",n))})})}},forceDraw:function(){this.isForceDraw=!0,this.update()},delayChartDraw:function(e){var t=this;if(s.isUndefined(e))setTimeout(function(){t.forceDraw()},0);else if(s.isUndefined(e.model)){if(!s.isUndefined(e.get("id"))&&e.get("id")===this.$el.parents(".stage").attr("id"))return setTimeout(function(){t.forceDraw()},0),!1}else if(e.model.get("id")===this.$el.parents(".stage").attr("id"))return setTimeout(function(){t.forceDraw()},0),!1},drawOnSelectedSlide:function(e){s.isUndefined(e)||s.isUndefined(e.get("id"))||e.get("id")===this.$el.parents(".stage").attr("id")&&(setTimeout(function(){this.forceDraw()}.bind(this),0),this.stopListening(app,"slide:new-selected",this.drawOnSelectedSlide))},getGraphType:function(e,t){switch(e){case"Bar":case"Mekko":case"Cylinder":return"column";case"Line":return s.isUndefined(t.graphType)?"smoothedLine":t.graphType}},getAmchartType:function(e){switch(e){case"Bar":case"Line":case"Mekko":case"Cylinder":return"serial";case"Pie":return"pie";case"Funnel":return"funnel";case"Radar":return"radar";case"Gauge":return"gauge"}},needToRedraw:function(){if("Download"===app.settings.get("project_type"))return!0;if("editor"===app.settings.get("editMode")){var e=$.extend(!0,{},this.model.changed);return delete e.x,delete e.y,delete e.width,delete e.height,!s.isEmpty(e)&&this.$el.is(":visible")||this.isForceDraw}return"None"!==this.model.get("animation.enter.name")||this.isForceDraw},getGraphOpt:function(e,t,i,o,n){if("Line"===e){var r=3;s.isUndefined(t.showLine)||t.showLine||(r=0),o=s.extend(o,{lineThickness:r,lineColor:i[n]}),(s.isUndefined(t.showPoint)||t.showPoint)&&(o=s.extend(o,{bullet:"round"})),t.showArea&&(o=s.extend(o,{fillAlphas:.4,fillColors:i[n]}))}else"Bar"===e||"Mekko"===e?o=s.extend(o,{fillColors:i[n],fillAlphas:.9,lineAlpha:.1}):"Radar"===e&&(o=s.extend(o,{lineColor:i[n]}),(s.isUndefined(t.showPoint)||t.showPoint)&&(o=s.extend(o,{bullet:"round"})));return o},getLdMakerType:function(e,t){switch(e){case"Bar":case"Mekko":return"square";case"Pie":return"round";case"Funnel":return t.pyramid?"triangleUp":"triangleDown";default:return"square"}},getLegendListeners:function(e){var t=function(t,i){var s="amcharts-graph-"+t.id,o=document.getElementsByClassName(s);if(void 0!==o)for(var n in o)if("object"==typeof o[n]){var r=o[n].getElementsByTagName("path")[0];void 0!==r&&("Bar"===e?r.style.fillOpacity=i:r.style.strokeOpacity=i);var a=o[n].getElementsByClassName("amcharts-graph-bullet");for(var l in a)"object"==typeof a[l]&&(a[l].style.fillOpacity=i)}},i=[];return"Line"!==e&&"Bar"!==e&&"Radar"!==e||(i=[{event:"rollOverItem",method:function(e){t(e.chart.graphs[e.dataItem.index],.8)}},{event:"rollOutItem",method:function(e){t(e.chart.graphs[e.dataItem.index],1)}}]),i},drawnEvent:function(e){var t=this.model.get("options"),i=this.model.get("chartType");s.isUndefined(t.titleFontFamily)||$(".amcharts-title-"+this.model.get("id")+"-title").css("font-family",t.titleFontFamily),s.isUndefined(t.subtitleFontFamily)||$(".amcharts-title-"+this.model.get("id")+"-subtitle").css("font-family",t.subtitleFontFamily),s.isUndefined(t.legendFontFamily)||(this.$el.find(".amcharts-legend-label").css("font-family",t.legendFontFamily),this.$el.find(".amcharts-legend-value").css("font-family",t.legendFontFamily)),"Bar"===i||"Line"===i||"Mekko"===i||"Radar"===i?("Bar"===i&&t.horizontalBars?(s.isUndefined(t.xAxisFontFamily)||(this.$el.find(".amcharts-value-axis .amcharts-axis-title").css("font-family",t.xAxisFontFamily),this.$el.find(".amcharts-value-axis .amcharts-axis-label").css("font-family",t.xAxisFontFamily)),s.isUndefined(t.yAxisFontFamily)||(this.$el.find(".amcharts-category-axis .amcharts-axis-title").css("font-family",t.yAxisFontFamily),this.$el.find(".amcharts-category-axis .amcharts-axis-label").css("font-family",t.yAxisFontFamily))):(s.isUndefined(t.xAxisFontFamily)||(this.$el.find(".amcharts-axis-title").css("font-family",t.xAxisFontFamily),this.$el.find(".amcharts-category-axis .amcharts-axis-label").css("font-family",t.xAxisFontFamily)),s.isUndefined(t.yAxisFontFamily)||(this.$el.find(".amcharts-value-axis .amcharts-axis-title").css("font-family",t.yAxisFontFamily),this.$el.find(".amcharts-value-axis .amcharts-axis-label").css("font-family",t.yAxisFontFamily))),s.isUndefined(t.valueFontFamily)||this.$el.find(".amcharts-graph-label").css("font-family",t.valueFontFamily)):"Pie"===i?s.isUndefined(t.valueFontFamily)||this.$el.find(".amcharts-pie-label").css("font-family",t.valueFontFamily):"Funnel"===i&&(s.isUndefined(t.valueFontFamily)||this.$el.find(".amcharts-funnel-label").css("font-family",t.valueFontFamily)),this.updateSlideThumb()},updateSlideThumb:function(e){var t=this.$el.parents("section.stage").attr("id");app.trigger(t+":change",this.model)},setAmChartOptions:function(e,t){var i=Math.min(this.model.get("width"),this.model.get("height")),o=this.model.get("options"),n=this.model.get("chartType"),r=s.isUndefined(o.showLegend)||o.showLegend;if("Bar"!==n&&"Line"!==n||1!==t.series.length||t.series[0].name&&0!==t.series[0].name.length||(r=!1),r){var a,l,d;if(a="Pie"===n||"Funnel"===n?t.labels.length:t.series.length,l=o.legendFontSize>0?parseFloat(o.legendFontSize):Math.min(18,(16*i/500).toFixed(1)),d=o.legendFontSize>0?parseInt(o.legendFontSize):Math.min(18,parseInt(16*i/500)),e.legend={enabled:!0,align:s.isUndefined(o.legendAlign)?"center":o.legendAlign,verticalGap:Math.min(15,parseInt(10*i/500)),labelWidth:(this.model.get("width")-30)/Math.min(a,3),markerSize:d,fontSize:l,position:s.isUndefined(o.legendPosition)?"bottom":o.legendPosition},"Pie"===n||"Funnel"===n){var h=s.isUndefined(o.showPercentLegend)?!1:o.showPercentLegend;e.legend.valueText=h?"[[percents]]%":"[[value]]"}"Line"===n||"Radar"===n?e.legend.useGraphSettings=!0:e.legend.markerType=this.getLdMakerType(n,o),s.isUndefined(o.autoFillLegendColor)||o.autoFillLegendColor?(e.legend.useMarkerColorForLabels=!0,e.legend.useMarkerColorForValues=!0):e.legend.color=s.isUndefined(o.legendColor)?"#7D7D7D":o.legendColor,e.legend.listeners=this.getLegendListeners(n)}o.depth3D&&(e.depth3D=20,e.angle=30);var c=(s.isUndefined(o.showAnimation)||o.showAnimation)&&"None"===this.model.get("animation.enter.name");c&&!$("#play-overlay").is(":visible")&&("editor"!==app.settings.get("editMode")||this.$el.closest(".flotr_c").length>0)&&"Download"!==app.settings.get("project_type")?(e.startDuration=.8,e.startEffect=s.isUndefined(o.startEffect)?"bounce":o.startEffect):e.startDuration=0,e.listeners=[{event:"drawn",method:this.drawnEvent},{event:"animationFinished",method:this.updateSlideThumb}];var g=s.isUndefined(o.valuePrefix)?"":o.valuePrefix,p=s.isUndefined(o.valueSuffix)?"":o.valueSuffix;if("Bar"===n||"Line"===n||"Mekko"===n||"Radar"===n||"Cylinder"===n){if("Cylinder"!==n){var u,f,m,v,b,y,w=s.isUndefined(this.model.get("options").labelAngle)?0:this.model.get("options").labelAngle;"Bar"===n&&o.horizontalBars?(u=o.yAxisTitle,f=o.xAxisTitle,m=s.isUndefined(o.yAxisColor)?"#7D7D7D":o.yAxisColor,v=s.isUndefined(o.xAxisColor)?"#7D7D7D":o.xAxisColor,b=parseFloat(o.yAxisFontSize),y=parseFloat(o.xAxisFontSize),e.valueAxes[0].labelRotation=w):(u=o.xAxisTitle,f=o.yAxisTitle,m=s.isUndefined(o.xAxisColor)?"#7D7D7D":o.xAxisColor,v=s.isUndefined(o.yAxisColor)?"#7D7D7D":o.yAxisColor,b=parseFloat(o.xAxisFontSize),y=parseFloat(o.yAxisFontSize),"Radar"!==n&&(e.categoryAxis.labelRotation=w)),e.categoryAxis.color=m,!s.isUndefined(u)&&u.length>0&&(e.categoryAxis.title=u,e.categoryAxis.titleColor=m),b>0&&(e.categoryAxis.titleFontSize=b,e.categoryAxis.fontSize=b),e.valueAxes[0].color=v,!s.isUndefined(f)&&f.length>0&&(e.valueAxes[0].title=f,e.valueAxes[0].titleColor=v),y>0&&(e.valueAxes[0].titleFontSize=y,e.valueAxes[0].fontSize=y),"Mekko"!==n&&((g.length>0||p.length>0)&&(e.valueAxes[0].labelFunction=function(e,t,i){return g+t+p}),!isNaN(o.valueAxisMin)&&o.valueAxisMin.length>0?e.valueAxes[0].minimum=parseFloat(o.valueAxisMin):delete e.valueAxes[0].minimum,!isNaN(o.valueAxisMax)&&o.valueAxisMax.length>0?(e.valueAxes[0].maximum=parseFloat(o.valueAxisMax),e.valueAxes[0].maximum<10&&(e.valueAxes[0].minVerticalGap=parseInt(this.model.get("height")/e.valueAxes[0].maximum/3))):delete e.valueAxes[0].maximum)}if("Bar"===n?o.horizontalBars&&(o.longCategoryLabel&&(e.categoryAxis.ignoreAxisWidth=!0,e.marginLeft=Math.min(150,.2*this.model.get("width"))),e.rotate=!0,e.categoryAxis.labelFunction=function(e,t,i){return e.length>40?e.substring(0,40)+"...":e}):"Mekko"===n?(e.valueAxes[0]=s.extend({stackType:"100% stacked",unit:"%"},e.valueAxes[0]),e.categoryAxis=s.extend({gridPosition:"start",widthField:"total"},e.categoryAxis)):"Radar"===n?e.valueAxes[0]=s.extend({axisTitleOffset:20,minimum:0,axisAlpha:.15},e.valueAxes[0]):"Cylinder"===n&&(e.angle=30,e.autoMargins=!0,e.autoMarginOffset=30,e.depth3D=100,e.categoryAxis={axisAlpha:0,gridAlpha:0,labelOffset:30},e.valueAxes=[{stackType:"100%",gridAlpha:0,color:this.model.get("labelsColor")}]),("Bar"===n||"Line"===n&&o.showLine)&&o.stackBars){var x=s.isUndefined(o.stackType)?"regular":o.stackType;e.valueAxes[0]=s.extend({stackType:x},e.valueAxes[0])}s.isUndefined(o.showGrid)||o.showGrid||(e.valueAxes[0]=s.extend({gridThickness:0},e.valueAxes[0]),e.categoryAxis=s.extend({gridThickness:0},e.categoryAxis)),s.isUndefined(o.showLabel)||o.showLabel||(e.valueAxes[0]=s.extend({labelsEnabled:!1,axisThickness:0},e.valueAxes[0]),e.categoryAxis=s.extend({labelsEnabled:!1,axisThickness:0},e.categoryAxis))}else{var k=s.isUndefined(o.showValue)?!1:o.showValue;if(e.labelsEnabled=k,k){var T=g+"[[value]]"+p;o.showPercentage&&(T="[[percents]]%"),e.labelText=T}if("Funnel"===n){if(e.marginTop=20*i/500,e.marginBottom=20*i/500,e.marginLeft=40*i/500,e.marginRight=40*i/500,o.pyramid)e.rotate=!0;else{var S=s.isUndefined(o.neckHeight)?"30":o.neckHeight;e.neckHeight=S+"%",e.neckWidth="40%",o.depth3D&&(e.depth3D=90,e.angle=30)}o.showCallOuts&&(e.marginRight=100*i/500,e.labelPosition="right")}else"Pie"===n&&(e.marginTop=50*-i/500,e.marginBottom=50*-i/500,!s.isUndefined(o.showCallOuts)&&o.showCallOuts||(e.labelRadius=40*-i/450),o.donut&&(e.innerRadius="40%"),o.pieStartAngle&&(e.startAngle=o.pieStartAngle))}return e=s.extend(e,{titles:[{size:o.titleFontSize>0?o.titleFontSize:(18*i/500).toFixed(1),text:this.model.get("title"),color:this.model.get("titleColor"),id:this.model.get("id")+"-title"},{size:o.subtitleFontSize>0?o.subtitleFontSize:(14*i/500).toFixed(1),text:this.model.get("subtitle"),color:this.model.get("subtitleColor"),id:this.model.get("id")+"-subtitle"}],balloon:{animationDuration:.3,borderThickness:0,color:"#FFFFFF",cornerRadius:0,fillAlpha:.7,fillColor:"#000000",fontSize:14,horizontalPadding:10,verticalPadding:8},percentPrecision:1,"export":{enabled:!1,menu:[]}})},getGaugeAxes:function(e,t){for(var i,s=e.labels.length,o=[],n=80/s,r=0;s>r;r++)i={color:"#eee",endValue:100,innerRadius:100-n*(r+1)+2+"%",radius:100-n*r-2+"%",startValue:0},o.push(i),i={balloonText:e.series[r]+"%",color:t[r],endValue:e.series[r],innerRadius:100-n*(r+1)+2+"%",radius:100-n*r-2+"%",startValue:0},o.push(i);var a={axisAlpha:0,endAngle:270,endValue:100,labelsEnabled:!1,startAngle:0,tickAlpha:0,bands:o};return a},getGaugeLabels:function(e,t){for(var i,s=e.labels.length,o=[],n=80/s,r=0;s>r;r++)i={align:"right",bold:!0,color:t[r],size:15,text:e.labels[r],x:"49%",y:n*r/2+"%"},o.push(i);return o},update:function(e,t){if(s.has(this.model.changed,"backgroundColor")&&(this.$el.css("backgroundColor",this.model.changed.backgroundColor),delete this.model.changed.backgroundColor),this.needToRedraw()){if(!window.AmCharts)return void this.listenToOnce(app,"loadscript:amcharts-lib",this.forceDraw);this.isForceDraw=!1;var i=this.model.get("chartType"),n=this.getAmchartType(i),r=this.model.getFormatData();if(s.isNull(r)||s.isUndefined(r))return;var a,l,d,h=r.series.length,c=[],g=[],p=this.model.get("seriesColors"),u=this.model.get("options"),f=Math.min(this.model.get("width"),this.model.get("height")),m=this.getGraphType(i,u),v=s.isUndefined(u.valuePrefix)?"":u.valuePrefix,b=s.isUndefined(u.valueSuffix)?"":u.valueSuffix,y=s.isUndefined(u.decimalSeparator)?".":u.decimalSeparator,w=s.isUndefined(u.thousandsSeparator)?",":u.thousandsSeparator,x="<b>[[category]]</b><br>"+v+"[[value]]"+b;if(h>1&&("Bar"===i||"Line"===i||"Mekko"===i||"Radar"===i)?x="<b>[[title]]</b><br>[[category]]:&nbsp;"+v+"[[value]]"+b:"Pie"===i?x="<b>[[title]]</b><br>"+v+"[[value]]"+b+"&nbsp;([[percents]]%)":"Pyramid"!==i&&"Funnel"!==i||(x="<b>[[title]]</b><br>"+v+"[[value]]"+b),"Bar"===i||"Line"===i||"Mekko"===i||"Radar"===i){var k,T;l=r.series[0].data.length,T=u.valueFontSize>0?parseFloat(u.valueFontSize):"Bar"===i?Math.min(16,(f/(l*h*4)).toFixed(1)):Math.min(16,(14*f/500).toFixed(1));var S={balloonText:x,type:m,fontSize:T,showHandOnHover:!0,color:s.isUndefined(u.valuesColor)?"#7D7D7D":u.valuesColor};if(h>1)for(var C=0;h>C;C++)k={valueField:"column-"+C,title:r.series[C].name?r.series[C].name:"Untitled",legendColor:p[C],showBalloon:s.isUndefined(u.showBalloon)?!0:u.showBalloon},u.showValue&&(k.labelPosition=s.isUndefined(u.valuePosition)?"inside":u.valuePosition,k.labelRotation=s.isUndefined(u.valueRotation)?0:u.valueRotation,u.showPercentage&&"Radar"!==i?k.labelText="[[percents]]%":k.labelText=v+"[[value]]"+b),k=this.getGraphOpt(i,u,p,k,C),c.push($.extend(!0,k,S));else{if(k={valueField:"column-0",fillColorsField:"color",title:r.series[0].name&&r.series[0].name.length>0?r.series[0].name:"Untitled",showBalloon:s.isUndefined(u.showBalloon)?!0:u.showBalloon},k=this.getGraphOpt(i,u,p,k,0),u.showValue)if(k.labelPosition=s.isUndefined(u.valuePosition)?"inside":u.valuePosition,k.labelRotation=s.isUndefined(u.valueRotation)?0:u.valueRotation,u.showPercentage&&"Radar"!==i){this.columnTotal=0;for(var P=0;l>P;P++)this.columnTotal+=parseFloat(r.series[0].data[P]);var j=this;k=s.extend(k,{labelText:"[[percents]]%",labelFunction:function(e){var t=Math.round(e.values.value/j.columnTotal*1e3)/10;return t+"%"}})}else k.labelText=v+"[[value]]"+b;c.push($.extend(!0,k,S))}delete u.longCategoryLabel;for(var M=0;l>M;M++){if(d={label:r.labels[M]},r.labels[M]&&r.labels[M].length>20&&(u.longCategoryLabel=!0),h>1)for(var I=0;h>I;I++){var A="column-"+I;d[A]=r.series[I].data[M],"Mekko"===i&&(s.isUndefined(d.total)?d.total=parseFloat(r.series[I].data[M]):d.total+=parseFloat(r.series[I].data[M]))}else d["column-0"]=r.series[0].data[M],"Bar"===i?d.color=p[M]:"Mekko"===i&&(d.total=parseFloat(r.series[0].data[M]));g.push(d)}a={type:n,theme:"none",addClassNames:!0,fontSize:Math.min(16,(14*f/500).toFixed(1)),fontFamily:"arial,sans-serif",hoverAlpha:.8,dataProvider:g,valueAxes:[{axisColor:"#7D7D7D",dashLength:2}],graphs:c,categoryField:"label",categoryAxis:{autoWrap:!0,gridPosition:"start",labelRotation:0,axisColor:"#7D7D7D",dashLength:2},decimalSeparator:y,thousandsSeparator:w}}else if("Cylinder"===i){l=r.labels.length;var _,O=[],B={category:""},z=s.isUndefined(u.showValue)?!1:u.showValue,R="[[value]]";z&&u.showPercentage&&(R="[[percents]]%");for(var F=0;l>F;F++)_={columnWidth:1,fillAlphas:.8,fillColors:p[F],lineAlpha:.5,lineColor:"#FFFFFF",lineThickness:2,showOnAxis:!0,topRadius:1,type:"column",valueField:"value"+F,legendAlpha:1,legendColor:p[F],title:r.labels[F],color:s.isUndefined(u.valuesColor)?"#7D7D7D":u.valuesColor},z&&(_=s.extend(_,{labelText:R})),O.push(_),B["value"+F]=r.series[F];a={type:n,theme:"none",categoryField:"category",fontSize:Math.min(16,(14*f/500).toFixed(1)),addClassNames:!0,balloonText:x,dataProvider:[B],graphs:O}}else if("Gauge"===i){var L=this.getGaugeAxes(r,p),D=this.getGaugeLabels(r,p);a={type:n,theme:"none",axes:[L],allLabels:D,hoverAlpha:.8}}else{l=r.labels.length;for(var E=0;l>E;E++)d={label:r.labels[E]?r.labels[E]:"Untitled","column-0":r.series[E],color:p[E]},g.push(d);a={type:n,fontFamily:"arial,sans-serif",theme:"none",addClassNames:!0,hoverAlpha:.8,outlineAlpha:.5,color:s.isUndefined(u.valuesColor)?"#7D7D7D":u.valuesColor,balloonText:s.isUndefined(u.showBalloon)||u.showBalloon?x:"",fontSize:u.valueFontSize>0?parseFloat(u.valueFontSize):Math.min(16,(14*f/500).toFixed(1)),titleField:"label",valueField:"column-0",colorField:"color",labelTickColor:this.model.get("valuesColor"),dataProvider:g,valueAxes:[],decimalSeparator:y,thousandsSeparator:w}}a=this.setAmChartOptions(a,r),"Pie"===i?setTimeout(function(){this.chart=AmCharts.makeChart(this.model.get("id")+"-amchart",a)}.bind(this),500):this.chart=AmCharts.makeChart(this.model.get("id")+"-amchart",a),s.each(this.fontProperties,function(e){var t=this.model.get("options."+e);s.isUndefined(t)||o.add(t)},this),this.setPremiumSample()}"loading"===app.settings.get("state")&&this.model.trigger("chart:draw-done"),delete this.model.changed.title,delete this.model.changed.subtitle,delete this.model.changed.titleColor,delete this.model.changed.subtitleColor,delete this.model.changed.valuesColor,delete this.model.changed.chartType,delete this.model.changed.chartData,delete this.model.changed.options,delete this.model.changed.seriesColors,this._super(e,t)},isPremiumChart:function(){var e=this.model.get("chartType"),t="Pie"===e&&this.model.get("options.depth3D")||"Funnel"===e||"Mekko"===e||"Radar"===e;return t&&!s.contains(app.settings.get("permissions"),"asset:premiumInfographics")},setPremiumSample:function(){this.isPremiumChart()?0===this.$el.find(".premium-sample").length&&this.$el.append('<div class="premium-sample"><div></div></div>'):this.$el.find(".premium-sample").length>0&&this.$el.find(".premium-sample").remove()},render:function(){this._super()},afterRender:function(){this.update(this.model.get("data"),this.model.get("options")),this._super()},dblclick:function(){app.trigger("chartPopup:show",this.model)},isSafari:function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")}})},{"../../../../helpers/fontLoader.js":57,"../../../../helpers/loadScript.js":61,"../../objectView.js":80,underscore:52}],89:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["style","hour","minute","second","period","showSecond","showPeriod","realTime"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{param1:{type:"number",params:{min:1,max:250}},animParam1:{type:"number",params:{min:0,max:100}},text:{type:"string",params:{notblank:!0}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"clock",height:200,width:200}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],90:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=window.TweenMax;t.exports=o.extend({template:"#clock",settings:{widgets:["clockPopup"]},initialize:function(){this._super()},update:function(e,t){this.model.subMenu.settings=s.extend({},this.settings.widgets),this._super(e,t),this.clockRender()},render:function(){this._super(),this.clockRender()},clockRender:function(){this.timer&&clearInterval(this.timer);var e=this.model.get("style"),t=this.model.get("hour"),i=this.model.get("minute"),s=this.model.get("second"),o=this.model.get("period"),n=this.$el.find(".handle-second"),r=this.$el.find(".period");this.$el.find("svg").hide(),this.$el.find("#"+e).show(),this.model.get("showSecond")===!1?n.hide():setTimeout(function(){n.show()},200),this.model.get("showPeriod")===!1?r.hide():r.show(),this.model.get("realTime")===!0?this.calcRealTime():this.showClock(t,i,s,o)},calcRealTime:function(){var e=this,t=new Date,i=t.getHours(),s=t.getMinutes(),o=t.getSeconds(),n="";n=12>i?"AM":"PM",this.timer=setInterval(function(){o+=1,o%60===0&&(o=0,s+=1,s%60===0&&(s=0,i+=1,24===i&&(i=0),n=12>i?"AM":"PM")),e.showClock(i,s,o,n)},1e3)},showClock:function(e,t,i,s){var o=this.$el.find(".handle-hour"),r=this.$el.find(".handle-minute"),a=this.$el.find(".handle-second"),l=this.$el.find(".period"),d=this.$el.find(".time");0===e?n.set(o,{rotation:30*e,transformOrigin:"100px 100px"}):(e=e>12?e-12:e,n.to(o,.5,{rotation:30*e+.5*t,transformOrigin:"100px 100px"})),0===t?n.set(r,{rotation:6*t,transformOrigin:"100px 100px"}):n.to(r,.5,{rotation:6*t,transformOrigin:"100px 100px"}),0===i?n.set(a,{rotation:6*i,transformOrigin:"100px 100px"}):n.to(a,.5,{rotation:6*i,transformOrigin:"100px 100px"}),l.text(s),this.model.get("showSecond")===!1?(d.text(e+":"+this.twoDigit(t)),n.set(d,{fontSize:"48px",x:"27",y:"115"}),10>e&&n.set(d,{fontSize:"53px",x:"40"})):(d.text(e+":"+this.twoDigit(t)+":"+this.twoDigit(i)),n.set(d,{fontSize:"30px",x:"27",y:"115"}),10>e&&n.set(d,{fontSize:"31px",x:"40"}))},twoDigit:function(e){return(10>e?"0":"")+e}})},{"../../objectView.js":80,underscore:52}],91:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["style","format","value","param1","animparam1","alert","alarm","counting"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{param1:{type:"number",params:{min:1,max:250}},animParam1:{type:"number",params:{min:0,max:100}},text:{type:"string",params:{notblank:!0}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"countdown",height:200,width:200,counting:!0,colors:["#ffffff","#114e7d","#ef8122"]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],92:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=window.TweenMax;t.exports=o.extend({template:"#countdown",settings:{widgets:["countdownPopup"]},initialize:function(){s.bindAll(this,"checkCurrentSlide","startCounting"),app.bind("slide:transitionTo",this.checkCurrentSlide),"blockinfographic"===app.settings.get("project_type")&&this.model.bind("timeline:play",this.startCounting),this._super()},update:function(e,t){var i=this.model.get("style"),o=this.model.get("format"),r=this.model.get("value"),a=this.model.get("animParam1"),l=this.model.get("colors")[0],d=this.model.get("colors")[1],h=this.model.get("colors")[2],c=this.$el.find(".value"),g=this.$el.find(".bgValue"),p=this.$el.find(".format"),u=this.$el.find(".range");
s.has(this.model.changed,"style")&&(this.$el.find("svg").hide(),this.$el.find("#"+i).show(),delete this.model.changed.style),(s.has(this.model.changed,"value")||s.has(this.model.changed,"format")||s.has(this.model.changed,"param1")||s.has(this.model.changed,"animParam1"))&&(n.set(u,{drawSVG:a+"%"}),p.text(o),r=Math.floor(r*a/100),c.text(this.twoDigit(r)),delete this.model.changed.value,delete this.model.changed.format,delete this.model.changed.param1,delete this.model.changed.animParam1),s.has(this.model.changed,"colors")&&(n.set(c,{fill:l}),n.set(p,{fill:l}),n.set(g,{fill:d}),n.set(u,{stroke:h}),delete this.model.changed.colors),this.model.subMenu.settings=s.extend({},this.settings.widgets),this._super(e,t)},render:function(){this._super(),this.counterRender()},counterRender:function(){var e=this.model.get("style"),t=this.model.get("format"),i=this.model.get("value"),s=this.model.get("animParam1"),o=this.model.get("colors");this.model.get(e+"Color1")&&(o[0]=this.model.get(e+"Color1"),o[1]=this.model.get(e+"Color2"),o[2]=this.model.get(e+"Color3"),this.model.set("colors",o),this.model.unset("countdown1Color1"),this.model.unset("countdown1Color2"),this.model.unset("countdown1Color3"),this.model.unset("countdown2Color1"),this.model.unset("countdown2Color2"),this.model.unset("countdown2Color3"),this.model.unset("countdown3Color1"),this.model.unset("countdown3Color2"),this.model.unset("countdown3Color3"));var r=this.$el.find(".value"),a=this.$el.find(".bgValue"),l=this.$el.find(".format"),d=this.$el.find(".range");this.$el.find("svg").hide(),this.$el.find("#"+e).show(),n.set(r,{fill:o[0]}),n.set(l,{fill:o[0]}),n.set(a,{fill:o[1]}),n.set(d,{drawSVG:s+"%",rotation:270,svgOrigin:"100px 100px",stroke:o[2]}),l.text(t),i=Math.floor(i*s/100),r.text(this.twoDigit(i))},checkCurrentSlide:function(e){$("#"+this.model.get("id")).parents(".stage").attr("id")===e.model.get("id")&&this.model.get("counting")&&this.startCounting()},startCounting:function(){var e,t=this,i=this.model.get("value"),s=this.model.get("format"),o=this.model.get("animParam1"),r=this.model.get("alert"),a=this.$el.find(".value"),l=this.$el.find(".range");"sec"===s&&(e=1),"min"===s&&(e=60),"hrs"===s&&(e=3600),this.timer&&clearInterval(this.timer),n.set(l,{drawSVG:o+"%"}),n.to(l,i*e,{drawSVG:"0",ease:"Linear.easeNone"}),i=Math.floor(i*o/100),a.text(t.twoDigit(i)),this.timer=setInterval(function(){i-=1,n.to(l,i*e,{drawSVG:"0",ease:"Linear.easeNone"}),0>i?(clearInterval(this.timer),r===!0&&console.log("Ding Ding Ding...")):a.text(t.twoDigit(i))},1e3*e)},twoDigit:function(e){return(10>e?"0":"")+e}})},{"../../objectView.js":80,underscore:52}],93:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["mode","html","allowScroll","frameBorder","allowFullScreen","iframeId","iframeClass"]),this.activeMenuItem=null,this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu)},defaults:{type:"iframe",height:150,width:200,src:"",mode:"iframe",html:""}}));s.defaults(n.prototype.defaults,o.prototype.defaults),t.exports=n},{"./../../objectModel.js":79,underscore:52}],94:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js");t.exports=o.extend({template:"#iframe",initialize:function(){this._super(),this.backendRenderedProperties=this.backendRenderedProperties.concat("src"),app.settings.get("Html5Download")&&-1===this.model.get("src").indexOf("http")&&this.model.set("src","http:"+this.model.get("src"))},update:function(e,t){var i=["src","height","width","frameBorder","allowFullScreen","iframeId","iframeClass"];s.each(i,function(e){if(s.has(this.model.changed,e)){var t=e;"iframeId"===e?t="id":"iframeClass"===e&&(t="class"),this.$el.find("iframe").attr(t,""),this.$el.find("iframe").attr(t,this.model.changed[e])}},this),s.has(this.model.changed,"src")&&(""===this.model.changed.src||s.isUndefined(this.model.changed.src))&&this.$el.find("iframe").remove(),s.has(this.model.changed,"html")&&this.$el.prepend('<div class="vm-text">'+this.model.changed.html+"</div>"),s.has(this.model.changed,"allowScroll")&&(this.model.changed.allowScroll?this.$el.css("overflow","scroll"):this.$el.css("overflow","hidden")),this._super(e,t)},render:function(){this._super()},dblclick:function(){app.trigger("iframePopup:show",this.model)}})},{"../../objectView.js":80,underscore:52}],95:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["crop","ext","filename","frame","flipX","flipY","locked","linkUrl","blur","brightness","contrast","colorOverlay","saturate","filter","hue","newUploading","src"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-flip",".btn-crop",".btn-replace",".btn-frames",".btn-filters"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.filter=["filterPopup"],this.subMenu.frame=["framePopup"],this.subMenu.flip=["flipsPopup"],this.activeMenuItem=null,this.get("src")||this.get("newUploading")===!0||"background"===this.get("type")||(this.set("src","404.jpg"),this.unset("newUploading",{silent:!0}))},validators:{reflection:{type:"number",params:{min:0,max:100}},blur:{type:"number",params:{min:0,max:100}},contrast:{type:"number",params:{min:-100,max:100}},brightness:{type:"number",params:{min:-100,max:100}},saturate:{type:"number",params:{min:-100,max:100}},hue:{type:"number",params:{min:0,max:359}},colorOverlay:{type:"number",params:{min:0,max:100}}},defaults:{type:"image",src:"",reflection:0,frame:{id:"none",shape:"none",ratio:1,tag:"none",oldFrame:{}},flipX:!1,flipY:!1,blur:0,contrast:0,brightness:0,saturate:0,hue:0,colorOverlay:0,colors:["#fff"],filter:"no-filter"},isCroped:function(){return"undefined"!=typeof this.get("crop")&&null!==this.get("crop")}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],96:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=window.TweenMax,r=o.extend({template:"#image",imageDbclick:function(){$("#upload-trigger").click()},events:{dblclick:"imageDbclick"},isCropInProgress:function(){return"none"!==$(".crop_section").css("display")},initialize:function(){s.bindAll(this,"destroyCrop","beginDragging","finishDragging","restoreCrop","replaceImage","refreshReflection","hideReflection","searchForFramedImage","onDragEnd","updateObjectCollection"),this.backendRenderedProperties=this.backendRenderedProperties.concat("src"),this.listenTo(this.model,"object:destroy-crop",this.destroyCrop),this.listenTo(this.model,"object:restore-crop",this.restoreCrop),this.listenTo(this.model,"resize-end",this.refreshReflection),this.listenTo(this.model,"resize-start",this.hideReflection),app.bind("object:drag-end",this.searchForFramedImage),app.bind("object:drag-end",this.onDragEnd),app.listenTo(app,"object:handle-drag-start",this.beginDragging),app.listenTo(app,"object:handle-drag-end",this.finishDragging),app.listenTo(app,"image-replaced",this.replaceImage),this._super()},updateObjectCollection:function(e){this.objectCollection=e.objectCollection},searchForFramedImage:function(e){if("image"===e.get("type")&&"none"===e.get("frame").id&&"none"!==this.model.get("frame").id){var t=e.get("x"),i=e.get("y"),s=this.model.get("x"),o=this.model.get("y"),n=this.model.get("width"),r=this.model.get("height");t>=s&&s+n>=t&&i>=o&&o+r>=i?(this.$el.addClass("readyForReplace"),this.readyForReplace=!0):(this.$el.removeClass("readyForReplace"),this.readyForReplace=!1)}},existInCanvas:function(e){var t;return s.isUndefined(app.collections.slides.find({id:$(".stage.active").attr("id")}).objectCollection.find({id:e}))||(t=e),t},onDragEnd:function(e){if("image"===e.get("type")){if(this.readyForReplace&&"none"===e.get("frame").id&&"none"!==this.model.get("frame").id&&this.existInCanvas(this.model.get("id"))){var t={width:e.get("width"),height:e.get("height")},i={width:this.model.get("width"),height:this.model.get("height"),assetid:this.model.get("assetid"),x:this.model.get("x"),y:this.model.get("y"),crop:this.model.get("crop"),frame:this.model.get("frame")};t.height=i.width/t.width*t.height,t.width=i.width,t.height<i.height&&(t.width=i.height/t.height*t.width,t.height=i.height),s.isUndefined(i.assetid)||s.isUndefined(this.model)||(s.isUndefined(this.objectCollection)&&(this.objectCollection=app.collections.slides.find({id:$(".stage.active").attr("id")}).objectCollection),this.objectCollection.remove([this.model]),app.trigger("object:deselect-object",this.model),e.set({width:i.width,height:i.height,x:i.x,y:i.y,crop:{width:t.width/i.width*100,height:t.height/i.height*100,originX:(1-i.width/t.width)/2,originY:(1-i.height/t.height)/2,ratio:t.height/t.width},frame:i.frame}),app.trigger("object:history-update",{action:"image-edit"}),app.trigger("object:new-selected",e),setTimeout(function(){app.trigger("save:non-force")},3e3)),this.readyForReplace=!1}$(".readyForReplace").removeClass("readyForReplace")}},hideReflection:function(){this.$el.find(".svg-reflect").css("display","none")},refreshReflection:function(){this.model.get("reflection")>1&&(this.$el.find(".svg-reflect").css({display:"block",opacity:this.model.get("reflection")/100}),this.$el.find(".svg-reflect g").attr("transform","translate(0 "+this.model.get("height")+") scale(1 -1)"))},beginDragging:function(){this.dragActive=!0},finishDragging:function(){this.dragActive=!1},replaceImage:function(e){parseInt(this.model.get("assetid"),10)===parseInt(e.id,10)&&(this.model.set("ext",e.ext),this.model.set("originsize",e.size),this.model.set("size",parseInt(e.size/1e3,10)+" KB"),this.model.set("filename",e.hash),this.model.set("updatedat",e.updatedAt),this.model.set("updatedby",e.updatedBy),this.model.set("src",e.hash+"."+e.ext),this.model.set("proportionLock",0),setTimeout(function(){app.trigger("save:non-force")},3e3))},updateFilters:function(e){if(0!==this.model.get("brightness")||0!==this.model.get("blur")||0!==this.model.get("contrast")||0!==this.model.get("hue")?(this.$el.find("g.imageObj").attr("filter","url(#filter-"+this.model.get("id")+")"),this.$el.find("g.imageObjRef").attr("filter","url(#filter-"+this.model.get("id")+")")):(this.$el.find("g.imageObj").attr("filter",""),this.$el.find("g.imageObjRef").attr("filter","")),0!==this.model.get("saturate")||0!==this.model.get("colorOverlay")?(this.$el.find("g.imageObj image").attr("filter","url(#filter2-"+this.model.get("id")+")"),this.$el.find("g.imageObjRef image").attr("filter","url(#filter2-"+this.model.get("id")+")")):(this.$el.find("g.imageObj image").attr("filter",""),this.$el.find("g.imageObjRef image").attr("filter","")),(s.has(this.model.changed,"blur")||e&&!s.isUndefined(this.model.get("blur")))&&(n.set(this.$el.find("feGaussianBlur"),{attr:{stdDeviation:this.model.get("blur")/10}},"blur"),delete this.model.changed.blur),s.has(this.model.changed,"brightness")||e&&!s.isUndefined(this.model.get("brightness"))){var t=0;t=this.model.get("brightness")<0?this.model.get("brightness")/100+1:this.model.get("brightness")/10+1,n.set(this.$el.find("#brightness feFuncR"),{attr:{slope:t},onUpdateParams:["{self}"]}),n.set(this.$el.find("#brightness feFuncG"),{attr:{slope:t},onUpdateParams:["{self}"]}),n.set(this.$el.find("#brightness feFuncB"),{attr:{slope:t},onUpdateParams:["{self}"]}),delete this.model.changed.brightness}if(s.has(this.model.changed,"contrast")||e&&!s.isUndefined(this.model.get("contrast"))){var i=this.model.get("contrast")/100+1;n.set(this.$el.find("#contrast feFuncR"),{attr:{slope:i,intercept:-(.5*i)+.5}},"contrast"),n.set(this.$el.find("#contrast feFuncG"),{attr:{slope:i,intercept:-(.5*i)+.5}},"contrast"),n.set(this.$el.find("#contrast feFuncB"),{attr:{slope:i,intercept:-(.5*i)+.5}},"contrast"),delete this.model.changed.contrast}(s.has(this.model.changed,"saturate")||e&&!s.isUndefined(this.model.get("saturate")))&&(n.set(this.$el.find("#saturate"),{attr:{values:this.model.get("saturate")/100+1}},"saturate"),delete this.model.changed.saturate),(s.has(this.model.changed,"hue")||e&&!s.isUndefined(this.model.get("saturate")))&&(n.set(this.$el.find("#hue"),{attr:{values:this.model.get("hue")}},"hue"),delete this.model.changed.hue),(s.has(this.model.changed,"colorOverlay")||s.has(this.model.changed,"colors")||e)&&n.set(this.$el.find("#imageColorOverlay"),{attr:{"flood-color":this.model.get("colors")[0],"flood-opacity":this.model.get("colorOverlay")/100}},"colorOverlay")},update:function(e,t){if(s.has(this.model.changed,"flipX")&&(n.set(this.$el.find(".crop_wrapper"),{rotationY:this.model.get("flipX")?180:0,delay:0}),delete this.model.changed.flipX),s.has(this.model.changed,"flipY")&&(n.set(this.$el.find(".crop_wrapper"),{rotationX:this.model.get("flipY")?180:0,delay:0}),delete this.model.changed.flipY),(s.has(this.model.changed,"width")||s.has(this.model.changed,"height"))&&("rectangle"===this.model.get("frame").id&&"none"===this.model.get("frame").id||this.renderFrame(),s.has(this.model.changed,"height")&&this.model.get("reflection")>1&&this.$el.find(".svg-reflect").css("margin-top",this.model.changed.height)),s.has(this.model.changed,"frame")){this.renderFrame();var i=this.model.get("frame").shape;this.$el.find(".crop_wrapper svg g.imageObj").attr("clip-path","url(#path-"+this.model.get("id")+"-"+i+")"),this.$el.find(".crop_wrapper svg g.imageObjRef").attr("clip-path","url(#path-"+this.model.get("id")+"-"+i+")"),delete this.model.changed.frame}if(this.updateFilters(),s.has(this.model.changed,"reflection")){var o=this.model.changed.reflection;1>=o?this.$el.find(".svg-reflect").css("display","none"):(this.$el.find(".svg-reflect").css("display","block"),this.$el.find(".svg-reflect").css("opacity",o/100),this.$el.find(".svg-reflect").css("margin-top",this.model.get("height")),this.$el.find(".svg-reflect g").attr("transform","translate(0 "+this.model.get("height")+") scale(1 -1)")),delete this.model.changed.reflection}s.has(this.model.changed,"src")&&($("#"+this.$el[0].id+" .crop_wrapper .clip-svg:eq(0) image").attr("xlink:href",app.settings.get("usersDataStorage")+this.model.changed.src),$("#"+this.$el[0].id+" .crop_wrapper .clip-svg:eq(1) image").attr("xlink:href",app.settings.get("usersDataStorage")+this.model.changed.src),delete this.model.changed.src),(s.has(this.model.changed,"crop")||this.isCropedImageBeingResized())&&(this.renderCropAttributes(),delete this.model.changed.crop),""!==this.model.get("src")?this.disableLoading():this.enableLoading(),this._super(e,t)},enableLoading:function(){n.set(this.$el.find(".loader_code"),{css:{display:"block"}})},disableLoading:function(){n.set(this.$el.find(".loader_code"),{css:{display:"none"}})},isCropedImageBeingResized:function(){return this.dragActive&&!this.isCropInProgress()&&this.model.isCroped()&&(s.has(this.model.changed,"height")||s.has(this.model.changed,"width"))},restoreCrop:function(e){if(!s.isUndefined(e)){var t=100*this.model.get("width")/e.width,i=100*this.model.get("height")/e.height,o=e.originX*this.model.get("width"),n=e.originY*this.model.get("height");this.model.set({width:t,height:i,x:this.model.get("x")+o,y:this.model.get("y")+n,locked:e.locked,ratio:e.ratio}),this.model.set("crop",e),app.trigger("object:deselect-object")}},destroyCrop:function(){if(this.model.isCroped()){var e=this.model.get("crop"),t=e.width/100*this.model.get("width"),i=e.height/100*this.model.get("height"),s=this.model.get("x")-e.originX*t,o=this.model.get("y")-e.originY*i;this.model.set({width:t,height:i,x:s,y:o}),$("#"+this.model.get("id")+" .crop_wrapper image").attr({width:"100%",height:"100%",y:"0",x:"0","clip-path":"url(#path-none)"}),this.model.set("crop",null),app.trigger("object:resize",this.model)}},renderCropAttributes:function(){var e=this.model.get("crop");if(s.isNull(e)||s.isUndefined(e))$("#"+this.model.get("id")+" div image").attr({height:"100%",width:"100%",x:0,y:0});else{var t=e.width/100*this.model.get("width"),i=e.height/100*this.model.get("height"),o=e.originX*t,n=e.originY*i;$("#"+this.model.get("id")+" div image").attr({height:e.height+"%",width:e.width+"%",x:-o,y:-n})}},render:function(){var e=this;if(this._super(),1===app.settings.get("presentation_mode"))this.$el.hasClass("slide-background")||(this.$el.find("svg").remove(),this.$el.find(".crop_wrapper").append("<image src="+app.settings.get("usersDataStorage")+this.model.get("src")+"></image>"));else if("image"===this.model.get("type")||"background"===this.model.get("type")&&"image"===this.model.get("bgtype")){this.model.isCroped()&&setTimeout(function(){e.renderCropAttributes()},200),this.$el.find("image").attr("data-objectid",this.model.get("id")),this.$el.find("image").error(function(t){if(this.model.get("src")&&!$(t.currentTarget).parents(".svg-reflect").length){var i=$(t.currentTarget);!app.settings.get("Html5Download")&&e.model.get("assetid")?$.ajax({cache:!1,type:"GET",url:"/actions/getasset/"+app.settings.get("project_id")+"/"+e.model.get("assetid"),model:this.model,success:function(e){e&&e.src&&this.model.get("src")!==e.src?this.model.set("src",e.src):(i.attr("xlink:href",app.settings.get("usersDataStorage")+"404.jpg"),i.attr("xlink:href",this.model.get("linkUrl")?this.model.get("linkUrl"):app.settings.get("usersDataStorage")+"404.jpg"))},error:function(e){i.attr("xlink:href",app.settings.get("usersDataStorage")+"404.jpg")}}):app.settings.get("Html5Download")?i.attr("xlink:href","images/404.jpg"):i.attr("xlink:href",app.settings.get("usersDataStorage")+"404.jpg")}}.bind(this)),this.renderFrame();var t=this.model.get("frame").shape;this.$el.find(".crop_wrapper svg g.imageObj").attr("clip-path","url(#path-"+this.model.get("id")+"-"+t+")"),this.$el.find(".crop_wrapper svg g.imageObjRef").attr("clip-path","url(#path-"+this.model.get("id")+"-"+t+")")}this.bindMouseEvent()},renderFrame:function(){var e=this.model.get("width"),t=this.model.get("height");this.$el.find(".crop_wrapper svg.clip-svg").attr("viewBox","0 0 "+e+" "+t);var i=this.model.get("frame").shape;switch(i){case"circle":this.$el.find(".crop_wrapper svg ellipse").attr({cx:parseInt(e/2),cy:parseInt(t/2),rx:parseInt(e/2),ry:parseInt(t/2)});break;case"none":this.$el.find(".crop_wrapper svg clipPath rect").attr({width:e,height:t,rx:0,ry:0});break;case"rectangle":this.$el.find(".crop_wrapper svg clipPath rect").attr({width:e,height:t,rx:0,ry:0});break;case"rectangle1":this.$el.find(".crop_wrapper svg clipPath rect").attr({width:e,height:t,rx:.1*e,ry:.1*t});break;case"rectangle2":this.$el.find(".crop_wrapper svg path").attr("d","m"+e+","+.839*t+"l0,"+t*-.678+"c"+e*-.089+",0 "+e*-.161+","+t*-.072+" "+e*-.161+","+t*-.161+"l"+e*-.678+",0c0,"+.089*t+" "+e*-.072+","+.161*t+" "+e*-.161+","+.161*t+"l0,"+.678*t+"c"+.089*e+",0 "+.161*e+","+.072*t+" "+.161*e+","+.161*t+"l"+.678*e+",0c0,"+t*-.089+" "+.072*e+","+t*-.161+" "+.161*e+","+t*-.161+"z");break;case"triangle":this.$el.find(".crop_wrapper svg path").attr("d","M 0 "+t+" L "+.5*e+" 0 L "+e+" "+t+" L 0 "+t);break;case"triangle-r":this.$el.find(".crop_wrapper svg path").attr("d","M 0 0 L "+.5*e+" "+t+" L "+e+" 0 L 0 0");break;case"shape1":this.$el.find(".crop_wrapper svg path").attr("d","m"+.972*e+","+.536*t+"c0"+t*-.007+","+.001*e+" "+t*-.013+","+.001*e+" "+t*-.02+"l"+.013*e+" "+t*-.056+"l"+.014*e+" "+t*-.059+"l"+e*-.037+" "+t*-.048+"l"+e*-.03+" "+t*-.039+"c"+e*-.003+" "+t*-.006+" "+e*-.006+" "+t*-.013+" "+e*-.009+" "+t*-.019+"L"+.909*e+","+.24*t+"l"+e*-.015+" "+t*-.058+"l"+e*-.055+" "+t*-.025+"l"+e*-.04+" "+t*-.018+"l"+e*-.032+" "+t*-.04+"l"+e*-.038+" "+t*-.047+"l"+e*-.061+",0l"+e*-.05+",0c"+e*-.007+" "+t*-.002+" "+e*-.014+" "+t*-.003+" "+e*-.021+" "+t*-.005+"l"+e*-.052+" "+t*-.022+"L"+.489*e+",0l"+e*-.054+","+.028*t+"l"+e*-.044+","+.023*t+"c"+e*-.007+","+.002*t+" "+e*-.014+","+.004*t+" "+e*-.021+","+.006*t+"l"+e*-.057+","+.005*t+"l"+e*-.06+","+.005*t+"l"+e*-.034+","+.05*t+"l"+e*-.028+","+.041*t+"c"+e*-.005+","+.005*t+" "+e*-.01+","+.009*t+" "+e*-.015+","+.014*t+"l"+e*-.048+","+.031*t+"l"+e*-.051+","+.033*t+"l"+e*-.007+","+.06*t+"l"+e*-.005+","+.049*t+"c"+e*-.003+","+.007*t+" "+e*-.005+","+.014*t+" "+e*-.007+","+.021*t+"L"+.03*e+","+.414*t+"l"+e*-.03+","+.053*t+"l"+.022*e+","+.056*t+"l"+.018*e+","+.046*t+"c"+.001*e+","+.007*t+","+.002*e+","+.014*t+","+.003*e+","+.021*t+"l"+e*-.001+","+.057*t+"l"+e*-.001+","+.06*t+"l"+.046*e+","+.039*t+"l"+.038*e+","+.032*t+"c"+.004*e+","+.006*t+","+.008*e+","+.011*t+","+.013*e+","+.016*t+"l"+.026*e+","+.051*t+"l"+.027*e+","+.054*t+"l"+.059*e+","+.013*t+"l"+.048*e+","+.01*t+"c"+.007*e+","+.003*t+","+.013*e+","+.006*t+","+.02*e+","+.009*t+"l"+.046*e+","+.033*t+"l"+.049*e+","+.035*t+"l"+.058*e+" "+t*-.016+"l"+.048*e+" "+t*-.014+"c"+.007*e+",0,"+.014*e+" "+t*-.001+","+.02*e+" "+t*-.001+"l"+.057*e+","+.007*t+"l"+.06*e+","+.008*t+"l"+.044*e+" "+t*-.042+"l"+.036*e+" "+t*-.034+"c"+.006*e+" "+t*-.003+",0.012 "+t*-.007+",0.018 "+t*-.011+"l"+.054*e+" "+t*-.02+"l"+.057*e+" "+t*-.021+"l"+.019*e+" "+t*-.057+"l"+.016*e+" "+t*-.047+"c"+.004*e+" "+t*-.006+","+.007*e+" "+t*-.012+","+.011*e+" "+t*-.018+"L"+.95*e+","+.69*t+"l"+.04*e+" "+t*-.045+"l"+e*-.01+" "+t*-.06+"L"+.972*e+","+.536*t+"z");break;case"shape2":this.$el.find(".crop_wrapper svg path").attr("d","m"+.957*e+","+.594*t+"c"+0*e+","+t*-.001+" "+0*e+","+t*-.002+" "+.001*e+","+t*-.003+"l"+.014*e+","+t*-.015+"l"+.028*e+","+t*-.031+"l"+e*-.024+","+t*-.035+"l"+e*-.009+","+t*-.013+"c"+0*e+","+t*-.001+" "+0*e+","+t*-.002+" "+0*e+","+t*-.003+"l"+.011*e+","+t*-.018+"l"+.021*e+","+t*-.036+"l"+e*-.031+","+t*-.028+"l"+e*-.012+","+t*-.011+"c"+0*e+","+t*-.001+" "+0*e+","+t*-.002+" "+e*-.001+","+t*-.003+"l"+.007*e+","+t*-.02+"l"+.013*e+","+t*-.04+"l"+e*-.036+","+t*-.022+"l"+e*-.014+","+t*-.008+"c"+0*e+","+t*-.001+" "+e*-.001+","+t*-.002+" "+e*-.001+","+t*-.003+"l"+.002*e+","+t*-.021+"l"+.004*e+","+t*-.041+"l"+e*-.04+","+t*-.014+"l"+e*-.015+","+t*-.005+"c"+e*-.001+","+t*-.001+" "+e*-.001+","+t*-.002+" "+e*-.002+","+t*-.002+"l"+e*-.002+","+t*-.021+"l"+e*-.003+","+t*-.041+"l"+e*-.042+","+t*-.005+"l"+e*-.016+","+t*-.002+"c"+e*-.001+","+t*-.001+" "+e*-.001+","+t*-.001+" "+e*-.002+","+t*-.002+"l"+e*-.007+","+t*-.02+"l"+e*-.013+","+t*-.04+"l"+e*-.042+","+.004*t+"l"+e*-.016+","+.001*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+t*-.001+" "+e*-.003+","+t*-.001+"l"+e*-.01+","+t*-.018+"l"+e*-.02+","+t*-.037+"l"+e*-.04+","+.012*t+"l"+e*-.015+","+.005*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+t*-.001+" "+e*-.003+","+t*-.001+"l"+e*-.014+","+t*-.016+"l"+e*-.028+","+t*-.031+"l"+e*-.037+","+.02*t+"l"+e*-.014+","+.008*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+0*t+" "+e*-.003+","+0*t+"l"+e*-.017+","+t*-.012+"l"+e*-.034+","+t*-.025+"l"+e*-.032+","+.027*t+"l"+e*-.012+","+.011*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+0*t+" "+e*-.003+","+0*t+"l"+e*-.019+","+t*-.008+"l"+e*-.03008+","+t*-.017+"l"+e*-.025+","+.033*t+"l"+e*-.01+","+.013*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+.001*t+" "+e*-.003+","+.001*t+"l"+e*-.02+","+t*-.005+"l"+e*-.041+","+t*-.009+"l"+e*-.018+","+.038*t+"l"+e*-.007+","+.015*t+"c"+e*-.001+","+.001*t+" "+e*-.002+","+.001*t+" "+e*-.003+","+.001*t+"l"+e*-.021+","+0*t+"l"+e*-.042+","+0*t+"l"+e*-.009+","+.041*t+"l"+e*-.004+","+.016*t+"c"+e*-.001+","+.001*t+" "+e*-.001+","+.001*t+" "+e*-.002+","+.002*t+"l"+e*-.021+","+.004*t+"l"+e*-.041+","+.009*t+"l"+e*-.001+","+.042*t+"l"+0*e+","+.016*t+"c"+0*e+","+0*t+" "+0*e+","+.001*t+" "+e*-.001+","+.001*t+"l"+e*-.019+","+.009*t+"l"+e*-.038+","+.017*t+"l"+.008*e+","+.041*t+"l"+.003*e+","+.016*t+"c"+0*e+","+.001*t+" "+e*-.001+","+.002*t+" "+e*-.001+","+.003*t+"l"+e*-.017+","+.012*t+"l"+e*-.035+","+.024*t+"l"+.016*e+","+.038*t+"l"+.006*e+","+.015*t+"c"+0*e+","+.001*t+" "+0*e+","+.002*t+" "+e*-.001+","+.003*t+"l"+e*-.014+","+.015*t+"l"+e*-.027+","+.031*t+"l"+.024*e+","+.035*t+"l"+.009*e+","+.013*t+"c"+0*e+","+.001*t+" "+0*e+","+.002*t+" "+0*e+","+.003*t+"l"+e*-.011+","+.018*t+"l"+e*-.02+","+.036*t+"l"+.031*e+","+.028*t+"l"+.012*e+","+.011*t+"c"+0*e+","+.001*t+" "+0*e+","+.002*t+" "+.001*e+","+.003*t+"l"+e*-.007+","+.02*t+"l"+e*-.013+","+.04*t+"l"+.036*e+","+.022*t+"l"+.014*e+","+.008*t+"c"+0*e+","+.001*t+" "+.001*e+","+.002*t+" "+.001*e+","+.003*t+"l"+e*-.002+","+.021*t+"l"+e*-.004+","+.041*t+"l"+.04*e+","+.014*t+"l"+.015*e+","+.005*t+"c"+.001*e+","+.001*t+" "+.001*e+","+.002*t+" "+.002*e+","+.002*t+"l"+.002*e+","+.021*t+"l"+.004*e+","+.041*t+"l"+.042*e+","+.005*t+"l"+.016*e+","+.002*t+"c"+.001*e+","+.001*t+" "+.001*e+","+.001*t+" "+.002*e+","+.002*t+"l"+.007*e+","+.02*t+"l"+.013*e+","+.04*t+"l"+.042*e+","+t*-.004+"l"+.016*e+","+t*-.001+"c"+.001*e+","+0*t+" "+.002*e+","+.001*t+" "+.003*e+","+.001*t+"l"+.01*e+","+.018*t+"l"+.021*e+","+.036*t+"l"+.04*e+","+t*-.012+"l"+.015*e+","+t*-.005+"c"+.001*e+","+0*t+" "+.002*e+","+.001*t+" "+.003*e+","+.001*t+"l"+.014*e+","+.015*t+"l"+.028*e+","+.031*t+"l"+.037*e+","+t*-.02+"l"+.014*e+","+t*-.008+"c"+.001*e+","+0*t+" "+.002*e+","+0*t+" "+.003*e+","+0*t+"l"+.017*e+","+.012*t+"l"+.034*e+","+.025*t+"l"+.032*e+","+t*-.027+"l"+.012*e+","+t*-.011+"c"+.001*e+","+0*t+" "+.002*e+","+0*t+" "+.003*e+","+0*t+"l"+.019*e+","+.009*t+"l"+.038*e+","+.017*t+"l"+.025*e+","+t*-.033+"l"+.01*e+","+t*-.013+"c"+.001*e+","+0*t+" "+.002*e+","+t*-.001+" "+.003*e+","+t*-.001+"l"+.021*e+","+.004*t+"l"+.041*e+","+.009*t+"l"+.018*e+","+t*-.038+"l"+.007*e+","+t*-.015+"c"+.001*e+","+t*-.001+" "+.002*e+","+t*-.001+" "+.003*e+","+t*-.001+"l"+.021*e+","+0*t+"l"+.042*e+","+0*t+"l"+.009*e+","+t*-.041+"l"+.004*e+","+t*-.016+"c"+.001*e+","+t*-.001+" "+.001*e+","+t*-.001+" "+.002*e+","+t*-.002+"l"+.021*e+","+t*-.004+"l"+.041*e+","+t*-.009+"l"+.001*e+","+t*-.042+"l"+0*e+","+t*-.016+"c"+.001*e+","+t*-.001+" "+.001*e+","+t*-.001+" "+.002*e+","+t*-.002+"l"+.014*e+","+t*-.006+"l"+.038*e+","+t*-.017+"l"+e*-.008+","+t*-.041+"l"+e*-.003+","+t*-.016+"c"+0*e+","+t*-.001+" "+.001*e+","+t*-.002+" "+.001*e+","+t*-.003+"l"+.017*e+","+t*-.012+"l"+.034*e+","+t*-.024+"l"+e*-.016+","+t*-.038+"l"+e*-.006+","+t*-.015+"z");break;case"pentagon":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" 0, "+e+" "+.4*t+", "+.8*e+" "+t+", "+.2*e+" "+t+", 0 "+.4*t);break;case"hexagon":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" 0,"+e+" "+.25*t+", "+e+" "+.75*t+", "+.5*e+" "+t+", 0 "+.75*t+", 0 "+.25*t);break;case"heptagon":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" "+0*t+", "+.9*e+" "+.2*t+", "+1*e+" "+.6*t+", "+.75*e+" "+1*t+", "+.25*e+" "+1*t+", "+0*e+" "+.6*t+", "+.1*e+" "+.2*t);break;case"octagon":this.$el.find(".crop_wrapper svg polygon").attr("points",.3*e+" 0, "+.7*e+" 0, "+1*e+" "+.3*t+", "+e+" "+.7*t+", "+.7*e+" "+t+", "+.3*e+" "+t+", 0 "+.7*t+", 0 "+.3*t);break;case"rhomboid":this.$el.find(".crop_wrapper svg polygon").attr("points","0 "+1*t+", "+.3*e+" 0, "+1*e+" 0, "+.7*e+" "+1*t);break;case"rhombus":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" "+0*t+", "+1*e+" "+.5*t+", "+.5*e+" "+1*t+", "+0*e+" "+.5*t);break;case"kite":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" "+0*t+", "+1*e+" "+.3*t+", "+.5*e+" "+1*t+", "+0*e+" "+.3*t);break;case"kite-r":this.$el.find(".crop_wrapper svg polygon").attr("points",.5*e+" "+0*t+", "+1*e+" "+.7*t+", "+.5*e+" "+1*t+", "+0*e+" "+.7*t);break;case"trapezoid":this.$el.find(".crop_wrapper svg polygon").attr("points",0*e+" "+1*t+", "+.3*e+" "+0*t+", "+.7*e+" "+0*t+", "+1*e+" "+1*t);break;case"trapezoid-r":this.$el.find(".crop_wrapper svg polygon").attr("points","0 0, "+.3*e+" "+1*t+", "+.7*e+" "+1*t+", "+1*e+" "+0*t);break;case"shape3":this.$el.find(".crop_wrapper svg polygon").attr("points",.854*e+", "+.646*t+" "+1*e+", "+.5*t+" "+.854*e+", "+.354*t+" "+.854*e+", "+.146*t+" "+.646*e+", "+.146*t+" "+.5*e+", "+0*t+" "+.354*e+", "+.146*t+" "+.146*e+", "+.146*t+" "+.146*e+", "+.354*t+" "+0*e+", "+.5*t+" "+.146*e+", "+.646*t+" "+.146*e+", "+.854*t+" "+.354*e+", "+.854*t+" "+.5*e+", "+1*t+" "+.646*e+", "+.854*t+" "+.854*e+", "+.854*t);break;case"shape4":this.$el.find(".crop_wrapper svg path").attr("d","m"+.931*e+","+.5*t+"c"+.056*e+","+t*-.026+" "+.083*e+","+t*-.092+" "+.062*e+","+t*-.155+"c"+e*-.021+","+t*-.063+" "+e*-.083+","+t*-.1+" "+e*-.144+","+t*-.09+"c"+.029*e+","+t*-.053+" "+.011*e+","+t*-.121+" "+e*-.044+","+t*-.16+"c"+e*-.055+","+t*-.039+" "+e*-.129+","+t*-.034+" "+e*-.171+","+.009*t+"c"+e*-.009+","+t*-.058+" "+e*-.066+","+t*-.104+" "+e*-.134+","+t*-.104+"s"+e*-.125+","+.046*t+" "+e*-.133+","+.105*t+"c"+e*-.043+","+t*-.043+" "+e*-.116+","+t*-.048+" "+e*-.171+","+t*-.009+"c"+e*-.055+","+.039*t+" "+e*-.073+","+.108*t+" "+e*-.044+","+.16*t+"c"+e*-.061+","+t*-.01+" "+e*-.123+","+.027*t+" "+e*-.144+","+.09*t+"c"+e*-.022+","+.062*t+" "+.006*e+","+.128*t+" "+.061*e+","+.154*t+"c"+e*-.056+","+.026*t+" "+e*-.083+","+.092*t+" "+e*-.062+","+.155*t+"c"+.021*e+","+.063*t+" "+.083*e+","+.1*t+" "+.144*e+","+.09*t+"c"+e*-.029+","+.053*t+" "+e*-.011+","+.121*t+" "+.044*e+","+.16*t+"c"+.055*e+","+.039*t+" "+.129*e+","+.034*t+" "+.171*e+","+t*-.009+"c"+.009*e+","+.058*t+" "+.066*e+","+.104*t+" "+.134*e+","+.104*t+"s"+.125*e+","+t*-.046+" "+.133*e+","+t*-.105+"c"+.043*e+","+.043*t+" "+.116*e+","+.048*t+" "+.171*e+","+.009*t+"c"+.055*e+","+t*-.039+" "+.073*e+","+t*-.108+" "+.044*e+","+t*-.16+"c"+.061*e+","+.01*t+" "+.123*e+","+t*-.027+" "+.144*e+","+t*-.09+"c"+.022*e+","+t*-.062+" "+e*-.006+","+t*-.128+" "+e*-.061+","+t*-.154+"z");break;case"shape5":this.$el.find(".crop_wrapper svg path").attr("d","m"+.933*e+","+.609*t+"l"+.06*e+","+t*-.022+"l"+e*-.049+","+t*-.041+"l"+e*-.008+","+t*-.006+"c"+0*e+","+t*-.001+" "+0*e+","+t*-.002+" "+0*e+","+t*-.003+"l"+.009*e+","+t*-.005+"l"+.055*e+","+t*-.032+"l"+e*-.055+","+t*-.032+"l"+e*-.009+","+t*-.005+"c"+0*e+","+t*-.001+" "+0*e+","+t*-.002+" "+0*e+","+t*-.003+"l"+.008*e+","+t*-.006+"l"+.049*e+","+t*-.041+"l"+e*-.06+","+t*-.022+"l"+e*-.009+","+t*-.003+"c"+0*e+","+t*-.001+" "+e*-.001+","+t*-.002+" "+e*-.001+","+t*-.003+"l"+.006*e+","+t*-.008+"l"+.041*e+","+t*-.049+"l"+e*-.063+","+t*-.011+"l"+e*-.01+","+t*-.002+"c"+0*e+","+t*-.001+" "+e*-.001+","+t*-.002+" "+e*-.001+","+t*-.002+"l"+.005*e+","+t*-.009+"l"+.032*e+","+t*-.055+"l"+e*-.064+","+0*t+"l"+e*-.01+","+0*t+"c"+0*e+","+t*-.001+" "+e*-.001+","+t*-.001+" "+e*-.001+","+t*-.002+"l"+.003*e+","+t*-.009+"l"+.022*e+","+t*-.06+"l"+e*-.063+","+.012*t+"l"+e*-.01+","+.002*t+"c"+0*e+","+t*-.001+" "+e*-.001+","+t*-.002+" "+e*-.001+","+t*-.002+"l"+.002*e+","+t*-.01+"l"+.011*e+","+t*-.063+"l"+e*-.06+","+.022*t+"l"+e*-.009+","+.003*t+"c"+e*-.001+","+0*t+" "+e*-.001+","+t*-.001+" "+e*-.002+","+t*-.001+"l"+0*e+","+t*-.01+"l"+0*e+","+t*-.064+"l"+e*-.055+","+.032*t+"l"+e*-.009+","+.005*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+t*-.001+" "+e*-.002+","+t*-.001+"l"+e*-.002+","+t*-.01+"l"+e*-.012+","+t*-.063+"l"+e*-.049+","+.041*t+"l"+e*-.008+","+.006*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+t*-.001+" "+e*-.003+","+t*-.001+"l"+e*-.003+","+t*-.009+"l"+e*-.022+","+t*-.06+"l"+e*-.041+","+.049*t+"l"+e*-.006+","+.008*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+0*t+" "+e*-.003+","+0*t+"l"+e*-.005+","+t*-.009+"l"+e*-.031+","+t*-.055+"l"+e*-.032+","+.055*t+"l"+e*-.005+","+.009*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+0*t+" "+e*-.003+","+0*t+"l"+e*-.006+","+t*-.008+"l"+e*-.041+","+t*-.049+"l"+e*-.022+","+.06*t+"l"+e*-.003+","+.009*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+.001*t+" "+e*-.003+","+.001*t+"l"+e*-.008+","+t*-.006+"l"+e*-.048+","+t*-.041+"l"+e*-.011+","+.063*t+"l"+e*-.002+","+.01*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+.001*t+" "+e*-.002+","+.001*t+"l"+e*-.009+","+t*-.005+"l"+e*-.055+","+t*-.032+"l"+0*e+","+.064*t+"l"+0*e+","+.01*t+"c"+e*-.001+","+0*t+" "+e*-.001+","+.001*t+" "+e*-.002+","+.001*t+"l"+e*-.009+","+t*-.003+"l"+e*-.06+","+t*-.022+"l"+.011*e+","+.063*t+"l"+.002*e+","+.01*t+"c"+e*-.001+","+0*t+" "+e*-.002+","+.001*t+" "+e*-.002+","+.001*t+"l"+e*-.01+","+t*-.001+"l"+e*-.063+","+t*-.011+"l"+.022*e+","+.06*t+"l"+.003*e+","+.009*t+"c"+0*e+","+.001*t+" "+e*-.001+","+.001*t+" "+e*-.001+","+.002*t+"l"+e*-.01+","+0*t+"l"+e*-.064+","+0*t+"l"+.032*e+","+.055*t+"l"+.005*e+","+.009*t+"c"+0*e+","+.001*t+" "+e*-.001+","+.002*t+" "+e*-.001+","+.002*t+"l"+e*-.01+","+.002*t+"l"+e*-.063+","+.011*t+"l"+.041*e+","+.049*t+"l"+.006*e+","+.008*t+"c"+0*e+","+.001*t+" "+e*-.001+","+.002*t+" "+e*-.001+","+.003*t+"l"+e*-.009+","+.003*t+"l"+e*-.06+","+.022*t+"l"+.049*e+","+.041*t+"l"+.008*e+","+.006*t+"c"+0*e+","+.001*t+" "+0*e+","+.002*t+" "+0*e+","+.003*t+"l"+e*-.009+","+.005*t+"l"+e*-.055+","+.031*t+"l"+.055*e+","+.032*t+"l"+.009*e+","+.005*t+"c"+0*e+","+.001*t+" "+0*e+","+.002*t+" "+0*e+","+.003*t+"l"+e*-.008+","+.006*t+"l"+e*-.049+","+.041*t+"l"+.06*e+","+.022*t+"l"+.009*e+","+.003*t+"c"+0*e+","+.001*t+" "+.001*e+","+.002*t+" "+.001*e+","+.003*t+"l"+e*-.006+","+.008*t+"l"+e*-.041+","+.048*t+"l"+.063*e+","+.011*t+"l"+.01*e+","+.002*t+"c"+0*e+","+.001*t+" "+.001*e+","+.002*t+" "+.001*e+","+.002*t+"l"+e*-.005+","+.009*t+"l"+e*-.032+","+.055*t+"l"+.064*e+","+0*t+"l"+.01*e+","+0*t+"c"+0*e+","+.001*t+" "+.001*e+","+.001*t+" "+.001*e+","+.002*t+"l"+e*-.003+","+.009*t+"l"+e*-.022+","+.06*t+"l"+.063*e+","+t*-.011+"l"+.01*e+","+t*-.002+"c"+.001*e+","+.001*t+" "+.001*e+","+.001*t+" "+.002*e+","+.002*t+"l"+e*-.002+","+.01*t+"l"+e*-.011+","+.063*t+"l"+.06*e+","+t*-.022+"l"+.009*e+","+t*-.003+"c"+.001*e+","+0*t+" "+.001*e+","+.001*t+" "+.002*e+","+.001*t+"l"+0*e+","+.01*t+"l"+0*e+","+.064*t+"l"+.055*e+","+t*-.032+"l"+.009*e+","+t*-.005+"c"+.001*e+","+0*t+" "+.002*e+","+.001*t+" "+.002*e+","+.001*t+"l"+.002*e+","+.01*t+"l"+.011*e+","+.063*t+"l"+.049*e+","+t*-.041+"l"+.008*e+","+t*-.006+"c"+.001*e+","+0*t+" "+.002*e+","+.001*t+" "+.003*e+","+.001*t+"l"+.003*e+","+.009*t+"l"+.022*e+","+.06*t+"l"+.041*e+","+t*-.049+"l"+.006*e+","+t*-.008+"c"+.001*e+","+0*t+" "+.002*e+","+0*t+" "+.003*e+","+0*t+"l"+.005*e+","+.009*t+"l"+.031*e+","+.055*t+"l"+.032*e+","+t*-.055+"l"+.005*e+","+t*-.009+"c"+.001*e+","+0*t+" "+.002*e+","+0*t+" "+.003*e+","+0*t+"l"+.006*e+","+.008*t+"l"+.041*e+","+.049*t+"l"+.022*e+","+t*-.06+"l"+.003*e+","+t*-.009+"c"+.001*e+","+0*t+" "+.002*e+","+t*-.001+" "+.003*e+","+t*-.001+"l"+.008*e+","+.006*t+"l"+.049*e+","+.041*t+"l"+.011*e+","+t*-.063+"l"+.002*e+","+t*-.01+"c"+.001*e+","+0*t+" "+.002*e+","+t*-.001+" "+.002*e+","+t*-.001+"l"+.009*e+","+.005*t+"l"+.055*e+","+.032*t+"l"+0*e+","+t*-.064+"l"+0*e+","+t*-.01+"c"+.001*e+","+0*t+" "+.001*e+","+t*-.001+" "+.002*e+","+t*-.001+"l"+.009*e+","+.003*t+"l"+.06*e+","+.022*t+"l"+e*-.012+","+t*-.063+"l"+e*-.002+","+t*-.01+"c"+.001*e+","+t*-.001+" "+.001*e+","+t*-.001+" "+.002*e+","+t*-.002+"l"+.01*e+","+.002*t+"l"+.063*e+","+.011*t+"l"+e*-.022+","+t*-.06+"l"+e*-.003+","+t*-.009+"c"+0*e+","+t*-.001+" "+.001*e+","+t*-.001+" "+.001*e+","+t*-.002+"l"+.01*e+","+0*t+"l"+.064*e+","+0*t+"l"+e*-.032+","+t*-.055+"l"+e*-.005+","+t*-.009+"c"+0*e+","+t*-.001+" "+.001*e+","+t*-.002+" "+.001*e+","+t*-.002+"l"+.01*e+","+t*-.002+"l"+.063*e+","+t*-.011+"l"+e*-.041+","+t*-.049+"l"+e*-.006+","+t*-.008+"c"+0*e+","+t*-.001+" "+.001*e+","+t*-.002+" "+.001*e+","+t*-.003+"l"+.009*e+","+t*-.002+"z");
break;case"shape6":this.$el.find(".crop_wrapper svg polygon").attr("points",.962*e+", "+.592*t+" "+1*e+", "+.5*t+" "+.962*e+", "+.408*t+" "+.962*e+", "+.309*t+" "+.892*e+", "+.238*t+" "+.854*e+", "+.146*t+" "+.762*e+", "+.108*t+" "+.691*e+", "+.038*t+" "+.592*e+", "+.038*t+" "+.5*e+", "+0*t+" "+.408*e+", "+.038*t+" "+.309*e+", "+.038*t+" "+.238*e+", "+.108*t+" "+.146*e+", "+.146*t+" "+.108*e+", "+.238*t+" "+.038*e+", "+.309*t+" "+.038*e+", "+.408*t+" "+0*e+", "+.5*t+" "+.038*e+", "+.592*t+" "+.038*e+", "+.691*t+" "+.108*e+", "+.762*t+" "+.146*e+", "+.854*t+" "+.238*e+", "+.892*t+" "+.309*e+", "+.962*t+" "+.408*e+", "+.962*t+" "+.5*e+", "+1*t+" "+.592*e+", "+.962*t+" "+.691*e+", "+.962*t+" "+.762*e+", "+.892*t+" "+.854*e+", "+.854*t+" "+.892*e+", "+.762*t+" "+.962*e+", "+.691*t);break;case"shape7":this.$el.find(".crop_wrapper svg polygon").attr("points",.916*e+", "+.584*t+" "+1*e+", "+.5*t+" "+.916*e+", "+.416*t+" "+.916*e+", "+.328*t+" "+.854*e+", "+.265*t+" "+.854*e+", "+.146*t+" "+.735*e+", "+.146*t+" "+.672*e+", "+.084*t+" "+.584*e+", "+.084*t+" "+.5*e+", "+0*t+" "+.416*e+", "+.084*t+" "+.328*e+", "+.084*t+" "+.265*e+", "+.146*t+" "+.146*e+", "+.146*t+" "+.146*e+", "+.265*t+" "+.084*e+", "+.328*t+" "+.084*e+", "+.416*t+" "+0*e+", "+.5*t+" "+.084*e+", "+.584*t+" "+.084*e+", "+.672*t+" "+.146*e+", "+.735*t+" "+.146*e+", "+.854*t+" "+.265*e+", "+.854*t+" "+.328*e+", "+.916*t+" "+.416*e+", "+.916*t+" "+.5*e+", "+1*t+" "+.584*e+", "+.916*t+" "+.672*e+", "+.916*t+" "+.735*e+", "+.854*t+" "+.854*e+", "+.854*t+" "+.854*e+", "+.735*t+" "+.916*e+", "+.672*t);break;case"shape8":this.$el.find(".crop_wrapper svg path").attr("d","m"+e+","+.5*t+"l"+e*-.037+","+t*-.037+"c"+e*-.025+","+t*-.025+" "+e*-.039+","+t*-.059+" "+e*-.039+","+t*-.094+"l0,"+t*-.199+"c0,"+t*-.052+" "+e*-.042+","+t*-.094+" "+e*-.094+","+t*-.094+"l"+e*-.199+",0c"+e*-.035+",0 "+e*-.069+","+t*-.014+" "+e*-.094+","+t*-.039+"l"+e*-.037+","+t*-.037+"l"+e*-.037+","+.037*t+"c"+e*-.025+","+.025*t+" "+e*-.059+","+.039*t+" "+e*-.094+","+.039*t+"l"+e*-.199+",0c"+e*-.052+",0 "+e*-.094+","+.042*t+" "+e*-.094+","+.094*t+"l0,"+.199*t+"c0,"+.035*t+" "+e*-.014+","+.069*t+" "+e*-.039+","+.094*t+"l"+e*-.037+","+.037*t+"l"+.037*e+","+.037*t+"c"+.025*e+","+.025*t+" "+.039*e+","+.059*t+" "+.039*e+","+.094*t+"l0,"+.199*t+"c0,"+.052*t+" "+.042*e+","+.094*t+" "+.094*e+","+.094*t+"l"+.199*e+",0c"+.035*e+",0 "+.069*e+","+.014*t+" "+.094*e+","+.039*t+"l"+.037*e+","+.037*t+"l"+.037*e+","+t*-.037+"c"+.025*e+","+t*-.025+" "+.059*e+","+t*-.039+" "+.094*e+","+t*-.039+"l"+.199*e+",0c"+.052*e+",0 "+.094*e+","+t*-.042+" "+.094*e+","+t*-.094+"l0,"+t*-.199+"c0,"+t*-.035+" "+.014*e+","+t*-.069+" "+.039*e+","+t*-.094+"l"+.037*e+","+t*-.037+"z");break;case"shape9":this.$el.find(".crop_wrapper svg path").attr("d","m"+.92*e+","+t+"l"+e*-.92+",0l0,"+t*-.92+"c0,"+t*-.044+" "+.036*e+","+t*-.08+" "+.08*e+","+t*-.08+"l"+.92*e+",0l0,"+.92*t+"c0,"+.044*t+" "+e*-.036+","+.08*t+" "+e*-.08+","+.08*t+"z");break;case"shape10":this.$el.find(".crop_wrapper svg polygon").attr("points",.118*e+", "+0*t+" "+0*e+", "+.118*t+" "+0*e+", "+.882*t+" "+.118*e+", "+1*t+" "+.882*e+", "+1*t+" "+1*e+", "+.882*t+" "+1*e+", "+.118*t+" "+.882*e+", "+0*t);break;case"shape11":this.$el.find(".crop_wrapper svg polygon").attr("points",.081*e+","+0*t+" "+0*e+","+.081*t+" "+0*e+","+.919*t+" "+.081*e+","+1*t+" "+.919*e+","+1*t+" "+1*e+","+.919*t+" "+1*e+","+.081*t+" "+.919*e+","+0*t);break;case"shape12":this.$el.find(".crop_wrapper svg path").attr("d","m"+e+","+.839*t+"l0,"+t*-.678+"c"+e*-.089+",0 "+e*-.161+","+t*-.072+" "+e*-.161+","+t*-.161+"l"+e*-.678+",0c0,"+.089*t+" "+e*-.072+","+.161*t+" "+e*-.161+","+.161*t+"l0,"+.678*t+"c"+.089*e+",0 "+.161*e+","+.072*t+" "+.161*e+","+.161*t+"l"+.678*e+",0c0,"+t*-.089+" "+.072*e+","+t*-.161+" "+.161*e+","+t*-.161+"z")}},bindMouseEvent:function(){this.bindMousedownEvent(),"publish"===app.settings.get("editMode")&&(this.$el.on("mouseenter",function(){this.mouseEnter()}.bind(this)),this.$el.on("mouseleave",function(){this.mouseLeave()}.bind(this)))}});s.defaults(r.prototype.events,o.prototype.events),s.defaults(r.prototype.render,o.prototype.render),t.exports=r},{"../../objectView.js":80,underscore:52}],97:[function(e,t,i){t.exports={array:{settings:{widgets:["arrayPopup","colorPopup"]},render:function(){var e=20,t=this.$el.find("canvas")[0].getContext("2d"),i=e*parseInt(this.model.get("inarow")),s=44*Math.ceil(parseInt(this.model.get("param1"))/parseInt(this.model.get("inarow"))),o=this.model.get("width")/i;if(this.model.get("height")!==s*o){var n=s*o;n>5e3&&(n=5e3),this.model.set({height:n})}var r=this.model.get("width")/i,a=this.model.get("height")/s;this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))):t.clearRect(0,0,this.model.get("width"),this.model.get("height")),t.save();var l=Math.min(r,a);t.scale(l,l);for(var d=0,h=0;h<parseInt(this.model.get("param1"));h++)h%parseInt(this.model.get("inarow"))===0&&0!==h&&d++,"male"!==this.model.get("icon")&&("mix"!==this.model.get("icon")||h%2!==0&&0!==h)||(t.save(),t.translate(0+20*(h-d*parseInt(this.model.get("inarow"))),44*d),t.beginPath(),t.moveTo(0,0),t.lineTo(17,0),t.lineTo(17,44),t.lineTo(0,44),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(.795,.905),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),this.model.get("colors")&&(t.fillStyle=this.model.get("colors")[0]),t.beginPath(),t.moveTo(16.189,11.477),t.bezierCurveTo(16.189,9.353,14.498,7.631,12.411,7.631),t.bezierCurveTo(12.394,7.631,12.379,7.633,12.363,7.633),t.lineTo(12.363,7.631),t.lineTo(3.865,7.631),t.lineTo(3.865,7.635),t.bezierCurveTo(3.837,7.635,3.8070000000000004,7.631,3.7790000000000004,7.631),t.bezierCurveTo(1.692,7.631,0,9.353,0,11.477),t.bezierCurveTo(0,11.505,.002,11.533,.003,11.561),t.lineTo(0,11.561),t.lineTo(0,23.427),t.lineTo(.004,23.427),t.bezierCurveTo(.025,24.178,.651,24.782,1.425,24.782),t.bezierCurveTo(2.198,24.782,2.825,24.178,2.846,23.427),t.lineTo(2.85,23.427),t.lineTo(2.85,13.745),t.lineTo(3.866,13.745),t.lineTo(3.866,41.067),t.lineTo(3.871,41.067),t.bezierCurveTo(3.899,41.909,4.735,42.586,5.7669999999999995,42.586),t.bezierCurveTo(6.7989999999999995,42.586,7.635,41.909,7.662999999999999,41.067),t.lineTo(7.667999999999999,41.067),t.lineTo(7.667999999999999,24.181),t.lineTo(8.56,24.181),t.lineTo(8.56,41.068),t.lineTo(8.566,41.068),t.bezierCurveTo(8.593,41.91,9.430000000000001,42.586999999999996,10.462,42.586999999999996),t.bezierCurveTo(11.493999999999998,42.586999999999996,12.329,41.91,12.357,41.068),t.lineTo(12.363,41.068),t.lineTo(12.363,13.745),t.lineTo(13.34,13.745),t.lineTo(13.34,23.427),t.lineTo(13.344,23.427),t.bezierCurveTo(13.365,24.178,13.991,24.782,14.764999999999999,24.782),t.bezierCurveTo(15.538999999999998,24.782,16.165,24.178,16.186,23.427),t.lineTo(16.19,23.427),t.lineTo(16.19,11.562),t.lineTo(16.188000000000002,11.562),t.bezierCurveTo(16.187,11.533,16.189,11.505,16.189,11.477),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),this.model.get("colors")&&(t.fillStyle=this.model.get("colors")[0]),t.beginPath(),t.arc(8.094,3.492,3.492,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()),("female"===this.model.get("icon")||"mix"===this.model.get("icon")&&h%2!==0&&0!==h)&&(t.save(),t.translate(0+20*(h-d*parseInt(this.model.get("inarow"))),44*d),t.beginPath(),t.moveTo(0,0),t.lineTo(20,0),t.lineTo(20,42),t.lineTo(0,42),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(.383,.905),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.fillStyle=this.model.get("colors")[1],t.beginPath(),t.arc(9.793,3.44,3.44,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle=this.model.get("colors")[1],t.beginPath(),t.moveTo(13.249,40.769),t.lineTo(13.249,28.795),t.lineTo(18.113,28.795),t.lineTo(13.553999999999998,14.313000000000002),t.lineTo(13.553999999999998,12.544000000000002),t.bezierCurveTo(13.578999999999999,12.548000000000002,13.722999999999999,12.604000000000003,14.034999999999998,13.332000000000003),t.bezierCurveTo(14.383,14.143000000000002,16.459,21.400000000000002,17.064999999999998,22.310000000000002),t.bezierCurveTo(17.671,23.218000000000004,18.633,23.080000000000002,19.269999999999996,22.520000000000003),t.bezierCurveTo(19.756999999999994,22.094000000000005,19.491999999999997,20.837000000000003,19.268999999999995,19.831000000000003),t.bezierCurveTo(19.006999999999994,18.906000000000002,16.761999999999993,10.922000000000002,16.459999999999994,10.358000000000002),t.bezierCurveTo(16.156999999999993,9.794000000000002,15.756999999999994,9.295000000000002,15.302999999999994,8.871000000000002),t.bezierCurveTo(14.848999999999993,8.447000000000003,13.554999999999994,7.820000000000002,13.554999999999994,7.820000000000002),t.lineTo(5.99,7.820000000000002),t.bezierCurveTo(5.99,7.820000000000002,4.695,8.447000000000003,4.241,8.871000000000002),t.bezierCurveTo(3.7869999999999995,9.294000000000002,3.3869999999999996,9.794000000000002,3.085,10.358000000000002),t.bezierCurveTo(2.782,10.922000000000002,.5369999999999999,18.906000000000002,.2759999999999998,19.831000000000003),t.bezierCurveTo(.051999999999999796,20.837000000000003,-.2130000000000002,22.094,.2729999999999998,22.520000000000003),t.bezierCurveTo(.9089999999999998,23.080000000000002,1.8719999999999999,23.218000000000004,2.4779999999999998,22.310000000000002),t.bezierCurveTo(3.0839999999999996,21.400000000000002,5.16,14.143000000000002,5.507,13.332000000000003),t.bezierCurveTo(5.819999999999999,12.604000000000003,5.9639999999999995,12.549000000000003,5.989,12.544000000000002),t.lineTo(5.989,14.313000000000002),t.lineTo(1.4290000000000003,28.795),t.lineTo(5.989,28.795),t.lineTo(5.989,40.769000000000005),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle=this.model.get("colors")[1],t.beginPath(),t.moveTo(9.284,40.769),t.lineTo(9.284,28.795),t.lineTo(9.955,28.795),t.lineTo(9.955,40.769),t.fill(),t.stroke(),t.restore(),t.restore());t.restore()}}}},{}],98:[function(e,t,i){t.exports=function(){function e(e,t,i){e.save(),e.translate(8+40*(i-1),0),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(41.719906,0),e.lineTo(41.719906,79.1875),e.lineTo(0,79.1875),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.translate(-201,-143),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.restore(),e.save(),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),e.translate(-9.6557007,-.34375),e.beginPath(),e.moveTo(210.6557,137.19182),e.lineTo(252.375606,137.19182),e.quadraticCurveTo(252.375606,137.19182,252.375606,137.19182),e.lineTo(252.375606,224.82183300000003),e.quadraticCurveTo(252.375606,224.82183300000003,252.375606,224.82183300000003),e.lineTo(210.6557,224.82183300000003),e.quadraticCurveTo(210.6557,224.82183300000003,210.6557,224.82183300000003),e.lineTo(210.6557,137.19182),e.quadraticCurveTo(210.6557,137.19182,210.6557,137.19182),e.closePath(),e.clip(),e.save();var s=e.createLinearGradient(314.9238,218.72169,314.9238,148.18311);s.addColorStop(.0165,"#808080"),s.addColorStop(.1209,"#D9D9D9"),s.addColorStop(.3407,"#FFFFFF"),s.addColorStop(.6538,"#FFFFFF"),s.addColorStop(.8791,"#E0E0E0"),s.addColorStop(1,"#828282"),e.fillStyle=s,e.beginPath(),e.moveTo(208.5376,148.1826),e.lineTo(421.3096,148.1826),e.quadraticCurveTo(421.3096,148.1826,421.3096,148.1826),e.lineTo(421.3096,218.721701),e.quadraticCurveTo(421.3096,218.721701,421.3096,218.721701),e.lineTo(208.5376,218.721701),e.quadraticCurveTo(208.5376,218.721701,208.5376,218.721701),e.lineTo(208.5376,148.1826),e.quadraticCurveTo(208.5376,148.1826,208.5376,148.1826),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(250.8174,147.5322),e.lineTo(250.8174,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(249.9502,148.3989),e.lineTo(249.9502,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(251.6841,148.3989),e.lineTo(251.6841,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(296.92679,147.5313),e.lineTo(296.92679,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(296.0596,148.3989),e.lineTo(296.0596,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(297.7944,148.3989),e.lineTo(297.7944,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(342.89261,147.5313),e.lineTo(342.89261,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(342.02539,148.3989),e.lineTo(342.02539,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(343.75879,148.3989),e.lineTo(343.75879,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#d5d7d8",e.lineWidth=2,e.beginPath(),e.moveTo(424.9658,213.2412),e.bezierCurveTo(424.9658,215.3652,423.0888,217.0879,420.7656,217.0879),e.lineTo(209.4419,217.0879),e.bezierCurveTo(207.1231,217.0879,205.24020000000002,215.3652,205.24020000000002,213.2412),e.lineTo(205.24020000000002,152.8662),e.bezierCurveTo(205.24020000000002,150.74169999999998,207.12300000000002,149.0195,209.4419,149.0195),e.lineTo(420.7656,149.0195),e.bezierCurveTo(423.0888,149.0195,424.9658,150.74169999999998,424.9658,152.8662),e.lineTo(424.9658,213.2412),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#757679",e.lineWidth=3,e.beginPath(),e.moveTo(423.7383,214.6025),e.bezierCurveTo(423.7383,216.8242,421.87789999999995,218.625,419.5791,218.625),e.lineTo(210.3398,218.625),e.bezierCurveTo(208.0419,218.625,206.1796,216.8242,206.1796,214.6025),e.lineTo(206.1796,151.43359999999998),e.bezierCurveTo(206.1796,149.21089999999998,208.0419,147.41019999999997,210.3398,147.41019999999997),e.lineTo(419.5791,147.41019999999997),e.bezierCurveTo(421.87789999999995,147.41019999999997,423.7383,149.21099999999998,423.7383,151.43359999999998),e.lineTo(423.7383,214.6025),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#c4c4c4",e.lineWidth=4,e.beginPath(),e.moveTo(425.7559,216.2891),e.bezierCurveTo(425.7559,218.6289,423.8584,220.5274,421.5176,220.5274),e.lineTo(208.3281,220.5274),e.bezierCurveTo(205.9873,220.5274,204.0898,218.629,204.0898,216.2891),e.lineTo(204.0898,149.74609999999998),e.bezierCurveTo(204.0898,147.40579999999997,205.9873,145.50879999999998,208.3281,145.50879999999998),e.lineTo(421.5176,145.50879999999998),e.bezierCurveTo(423.8584,145.50879999999998,425.7559,147.40579999999997,425.7559,149.74609999999998),e.lineTo(425.7559,216.2891),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#ea1d25",e.lineWidth=4,e.beginPath(),e.moveTo(341.8877,145.5088),e.lineTo(421.5176,145.5088),e.bezierCurveTo(423.8584,145.5088,425.7559,147.4058,425.7559,149.7461),e.lineTo(425.7559,216.28910000000002),e.bezierCurveTo(425.7559,218.62890000000002,423.8584,220.52740000000003,421.5176,220.52740000000003),e.lineTo(341.8877,220.52740000000003),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#858585",e.beginPath(),e.moveTo(427.4902,148.2632),e.lineTo(427.4902,217.48340000000002),e.bezierCurveTo(427.4902,219.9189,425.5625,221.89260000000002,423.1884,221.89260000000002),e.lineTo(206.8003,221.89260000000002),e.bezierCurveTo(204.4253,221.89260000000002,202.49949999999998,219.919,202.49949999999998,217.48340000000002),e.lineTo(202.49949999999998,148.2632),e.bezierCurveTo(202.49949999999998,145.82770000000002,204.4253,143.854,206.8003,143.854),e.lineTo(423.1885,143.854),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore()}function t(e,t,i){e.save(),e.translate(8+40*(i-1),0),e.fillStyle="#ffffff",e.fillRect(40,5,5,70),e.save(),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(47.266228,0),e.lineTo(47.266228,79.1875),e.lineTo(0,79.1875),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(-201,-143),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.restore(),e.save(),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),e.transform(-1,0,0,1,450.26623,-.34375),e.beginPath(),e.moveTo(193.70395,134.32486),e.lineTo(249.26622899999998,134.32486),e.quadraticCurveTo(249.26622899999998,134.32486,249.26622899999998,134.32486),e.lineTo(249.26622899999998,233.663475),e.quadraticCurveTo(249.26622899999998,233.663475,249.26622899999998,233.663475),e.lineTo(193.70395,233.663475),e.quadraticCurveTo(193.70395,233.663475,193.70395,233.663475),e.lineTo(193.70395,134.32486),e.quadraticCurveTo(193.70395,134.32486,193.70395,134.32486),e.closePath(),e.clip(),e.save();var s=e.createLinearGradient(314.9238,218.72169,314.9238,148.18311);s.addColorStop(.0165,"#808080"),s.addColorStop(.1209,"#D9D9D9"),s.addColorStop(.3407,"#FFFFFF"),s.addColorStop(.6538,"#FFFFFF"),s.addColorStop(.8791,"#E0E0E0"),s.addColorStop(1,"#828282"),e.fillStyle=s,e.beginPath(),e.moveTo(208.5376,148.1826),e.lineTo(421.3096,148.1826),e.quadraticCurveTo(421.3096,148.1826,421.3096,148.1826),e.lineTo(421.3096,218.721701),e.quadraticCurveTo(421.3096,218.721701,421.3096,218.721701),e.lineTo(208.5376,218.721701),e.quadraticCurveTo(208.5376,218.721701,208.5376,218.721701),e.lineTo(208.5376,148.1826),e.quadraticCurveTo(208.5376,148.1826,208.5376,148.1826),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(250.8174,147.5322),e.lineTo(250.8174,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(249.9502,148.3989),e.lineTo(249.9502,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(251.6841,148.3989),e.lineTo(251.6841,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(296.92679,147.5313),e.lineTo(296.92679,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(296.0596,148.3989),e.lineTo(296.0596,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(297.7944,148.3989),e.lineTo(297.7944,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(342.89261,147.5313),e.lineTo(342.89261,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(342.02539,148.3989),e.lineTo(342.02539,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(343.75879,148.3989),e.lineTo(343.75879,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#d5d7d8",e.lineWidth=2,e.beginPath(),e.moveTo(424.9658,213.2412),e.bezierCurveTo(424.9658,215.3652,423.0888,217.0879,420.7656,217.0879),e.lineTo(209.4419,217.0879),e.bezierCurveTo(207.1231,217.0879,205.24020000000002,215.3652,205.24020000000002,213.2412),e.lineTo(205.24020000000002,152.8662),e.bezierCurveTo(205.24020000000002,150.74169999999998,207.12300000000002,149.0195,209.4419,149.0195),e.lineTo(420.7656,149.0195),e.bezierCurveTo(423.0888,149.0195,424.9658,150.74169999999998,424.9658,152.8662),e.lineTo(424.9658,213.2412),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#757679",e.lineWidth=3,e.beginPath(),e.moveTo(423.7383,214.6025),e.bezierCurveTo(423.7383,216.8242,421.87789999999995,218.625,419.5791,218.625),e.lineTo(210.3398,218.625),e.bezierCurveTo(208.0419,218.625,206.1796,216.8242,206.1796,214.6025),e.lineTo(206.1796,151.43359999999998),e.bezierCurveTo(206.1796,149.21089999999998,208.0419,147.41019999999997,210.3398,147.41019999999997),e.lineTo(419.5791,147.41019999999997),e.bezierCurveTo(421.87789999999995,147.41019999999997,423.7383,149.21099999999998,423.7383,151.43359999999998),e.lineTo(423.7383,214.6025),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=this.model.get("colors")[0],e.lineWidth=4,e.beginPath(),e.moveTo(425.7559,216.2891),e.bezierCurveTo(425.7559,218.6289,423.8584,220.5274,421.5176,220.5274),e.lineTo(208.3281,220.5274),e.bezierCurveTo(205.9873,220.5274,204.0898,218.629,204.0898,216.2891),e.lineTo(204.0898,149.74609999999998),e.bezierCurveTo(204.0898,147.40579999999997,205.9873,145.50879999999998,208.3281,145.50879999999998),e.lineTo(421.5176,145.50879999999998),e.bezierCurveTo(423.8584,145.50879999999998,425.7559,147.40579999999997,425.7559,149.74609999999998),e.lineTo(425.7559,216.2891),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=this.model.get("colors")[0],e.lineWidth=4,e.beginPath(),e.moveTo(341.8877,145.5088),e.lineTo(421.5176,145.5088),e.bezierCurveTo(423.8584,145.5088,425.7559,147.4058,425.7559,149.7461),e.lineTo(425.7559,216.28910000000002),e.bezierCurveTo(425.7559,218.62890000000002,423.8584,220.52740000000003,421.5176,220.52740000000003),e.lineTo(341.8877,220.52740000000003),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#858585",e.beginPath(),e.moveTo(427.4902,148.2632),e.lineTo(427.4902,217.48340000000002),e.bezierCurveTo(427.4902,219.9189,425.5625,221.89260000000002,423.1884,221.89260000000002),e.lineTo(206.8003,221.89260000000002),e.bezierCurveTo(204.4253,221.89260000000002,202.49949999999998,219.919,202.49949999999998,217.48340000000002),e.lineTo(202.49949999999998,148.2632),e.bezierCurveTo(202.49949999999998,145.82770000000002,204.4253,143.854,206.8003,143.854),e.lineTo(423.1885,143.854),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore()}var i=function(e){e.save(),e.translate(0,0),e.fillStyle="#ffffff",e.fillRect(2,2,5,72),e.beginPath(),e.moveTo(0,0),e.lineTo(8.1091423,0),e.lineTo(8.1091423,79.1875),e.lineTo(0,79.1875),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.translate(-201,-143),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.translate(-1,-.34375),e.beginPath(),e.moveTo(200.81781,141.38202),e.lineTo(210.1091422,141.38202),e.quadraticCurveTo(210.1091422,141.38202,210.1091422,141.38202),e.lineTo(210.1091422,223.36436600000002),e.quadraticCurveTo(210.1091422,223.36436600000002,210.1091422,223.36436600000002),e.lineTo(200.81781,223.36436600000002),e.quadraticCurveTo(200.81781,223.36436600000002,200.81781,223.36436600000002),e.lineTo(200.81781,141.38202),e.quadraticCurveTo(200.81781,141.38202,200.81781,141.38202),e.closePath(),e.clip(),e.save();var t=e.createLinearGradient(314.9238,218.72169,314.9238,148.18311);t.addColorStop(.0165,"#808080"),t.addColorStop(.1209,"#D9D9D9"),t.addColorStop(.3407,"#FFFFFF"),t.addColorStop(.6538,"#FFFFFF"),t.addColorStop(.8791,"#E0E0E0"),t.addColorStop(1,"#828282"),e.fillStyle=t,e.beginPath(),e.moveTo(208.5376,148.1826),e.lineTo(421.3096,148.1826),e.quadraticCurveTo(421.3096,148.1826,421.3096,148.1826),e.lineTo(421.3096,218.721701),e.quadraticCurveTo(421.3096,218.721701,421.3096,218.721701),e.lineTo(208.5376,218.721701),e.quadraticCurveTo(208.5376,218.721701,208.5376,218.721701),e.lineTo(208.5376,148.1826),e.quadraticCurveTo(208.5376,148.1826,208.5376,148.1826),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(250.8174,147.5322),e.lineTo(250.8174,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(249.9502,148.3989),e.lineTo(249.9502,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(251.6841,148.3989),e.lineTo(251.6841,217.7813),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(296.92679,147.5313),e.lineTo(296.92679,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(296.0596,148.3989),e.lineTo(296.0596,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(297.7944,148.3989),e.lineTo(297.7944,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#7d7e81",e.beginPath(),e.moveTo(342.89261,147.5313),e.lineTo(342.89261,218.35941),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(342.02539,148.3989),e.lineTo(342.02539,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(343.75879,148.3989),e.lineTo(343.75879,217.7803),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#d5d7d8",e.lineWidth=2,e.beginPath(),e.moveTo(424.9658,213.2412),e.bezierCurveTo(424.9658,215.3652,423.0888,217.0879,420.7656,217.0879),e.lineTo(209.4419,217.0879),e.bezierCurveTo(207.1231,217.0879,205.24020000000002,215.3652,205.24020000000002,213.2412),e.lineTo(205.24020000000002,152.8662),e.bezierCurveTo(205.24020000000002,150.74169999999998,207.12300000000002,149.0195,209.4419,149.0195),e.lineTo(420.7656,149.0195),e.bezierCurveTo(423.0888,149.0195,424.9658,150.74169999999998,424.9658,152.8662),e.lineTo(424.9658,213.2412),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#757679",e.lineWidth=3,e.beginPath(),e.moveTo(423.7383,214.6025),e.bezierCurveTo(423.7383,216.8242,421.87789999999995,218.625,419.5791,218.625),e.lineTo(210.3398,218.625),e.bezierCurveTo(208.0419,218.625,206.1796,216.8242,206.1796,214.6025),e.lineTo(206.1796,151.43359999999998),e.bezierCurveTo(206.1796,149.21089999999998,208.0419,147.41019999999997,210.3398,147.41019999999997),e.lineTo(419.5791,147.41019999999997),e.bezierCurveTo(421.87789999999995,147.41019999999997,423.7383,149.21099999999998,423.7383,151.43359999999998),e.lineTo(423.7383,214.6025),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#c4c4c4",e.lineWidth=4,e.beginPath(),e.moveTo(425.7559,216.2891),e.bezierCurveTo(425.7559,218.6289,423.8584,220.5274,421.5176,220.5274),e.lineTo(208.3281,220.5274),e.bezierCurveTo(205.9873,220.5274,204.0898,218.629,204.0898,216.2891),e.lineTo(204.0898,149.74609999999998),e.bezierCurveTo(204.0898,147.40579999999997,205.9873,145.50879999999998,208.3281,145.50879999999998),e.lineTo(421.5176,145.50879999999998),e.bezierCurveTo(423.8584,145.50879999999998,425.7559,147.40579999999997,425.7559,149.74609999999998),e.lineTo(425.7559,216.2891),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#ea1d25",e.lineWidth=4,e.beginPath(),e.moveTo(341.8877,145.5088),e.lineTo(421.5176,145.5088),e.bezierCurveTo(423.8584,145.5088,425.7559,147.4058,425.7559,149.7461),e.lineTo(425.7559,216.28910000000002),e.bezierCurveTo(425.7559,218.62890000000002,423.8584,220.52740000000003,421.5176,220.52740000000003),e.lineTo(341.8877,220.52740000000003),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#858585",e.beginPath(),e.moveTo(427.4902,148.2632),e.lineTo(427.4902,217.48340000000002),e.bezierCurveTo(427.4902,219.9189,425.5625,221.89260000000002,423.1884,221.89260000000002),e.lineTo(206.8003,221.89260000000002),e.bezierCurveTo(204.4253,221.89260000000002,202.49949999999998,219.919,202.49949999999998,217.48340000000002),e.lineTo(202.49949999999998,148.2632),e.bezierCurveTo(202.49949999999998,145.82770000000002,204.4253,143.854,206.8003,143.854),e.lineTo(423.1885,143.854),e.fill(),e.stroke(),e.restore(),e.restore()},s=function(s,o){i.call(this,s);for(var n=this.model.get("iDigits"),r=1;n>r;r++)e(s,"",r);t.call(this,s,"",n)},o=function(e,t,i){var s=e/Math.pow(10,t-i-1);return s-=s%1,s%10},n=function(e,t,i,s){e.restore(),e.save(),this.renderVectorText(String(s),this.$el.find("canvas")[0],60,10+40*i,60,"helvetica","normal","normal")};return{digitaldial:{settings:{widgets:["numberPopup","digitaldialsPopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height")),e.clearRect(0,0,this.model.get("width"),this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save();var t=parseInt(this.model.get("iDigits"));e.scale(this.model.get("height")/80,this.model.get("height")/80),s.call(this,e),e.fillStyle=this.model.get("textColor"),e.fillStyle="black";for(var i=parseInt(this.model.get("numParam")),r=0;t>r;r++){var a=o(i,t,r);n.call(this,e,"",r,a)}e.restore(),e.restore()}}}}()},{}],99:[function(e,t,i){t.exports=function(){function e(e){e.save(),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(202,0),e.lineTo(202,202),e.lineTo(0,202),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(.666992,.583984),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),this.model.get("radialStroke")&&s.call(this,e),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save();var n=e.createLinearGradient(58.530273,71.368652,120.928581,115.060417);n.addColorStop(0,"#F0F0F0"),n.addColorStop(.259647,"#EBEBEB"),n.addColorStop(.555871,"#DDDDDD"),n.addColorStop(.868948,"#C6C6C6"),n.addColorStop(.978022,"#BDBDBD"),e.fillStyle=n,e.strokeStyle="#86888a",e.beginPath(),e.arc(100.3125,100.625,93.90625,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f3f4f4",e.globalAlpha=.9599999785423279,e.beginPath(),e.arc(100.5,100.5,92.573242,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),n=e.createLinearGradient(99.715332,16.381836,99.715332,52.254238),n.addColorStop(.368132,"#EDEDED"),n.addColorStop(1,"#F2F2F2"),e.fillStyle=n,e.strokeStyle="#a5a7aa",e.beginPath(),e.moveTo(11.210938,100.084473),e.bezierCurveTo(11.210938,51.205567,50.835938,11.580567000000002,99.715821,11.580567000000002),e.bezierCurveTo(148.593751,11.580567000000002,188.219727,51.205567,188.219727,100.084473),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.save(),e.fillStyle="#fafafa",e.beginPath(),e.moveTo(113.88916,20.965332),e.bezierCurveTo(121.373047,21.064941,128.597168,22.227539,135.452148,24.274414),e.bezierCurveTo(124.24658199999999,17.98584,111.43994099999999,14.324219,97.790039,14.142578),e.bezierCurveTo(53.005858999999994,13.547363,16.204589999999996,50.47168,15.591308999999995,96.61816400000001),
e.lineTo(32.054199999999994,96.83691400000001),e.bezierCurveTo(35.899414,53.827637,71.265137,20.398926,113.88916,20.965332),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#a1a3a6",e.beginPath(),e.moveTo(10.75,100.591309),e.lineTo(188.496094,100.591309),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#e0e1e2",e.lineWidth=1.5,e.beginPath(),e.moveTo(11.026367,101.422852),e.lineTo(188.774414,101.422852),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),n=e.createLinearGradient(99.853516,142.013672,99.853516,131.667114),n.addColorStop(0,"#D9D9D9"),n.addColorStop(.506525,"#E6E6E6"),n.addColorStop(1,"#EDEDED"),e.fillStyle=n,e.strokeStyle="#9b9da0",e.beginPath(),e.moveTo(147.985352,142.172852),e.bezierCurveTo(147.985352,145.304688,145.891602,147.841797,143.31152400000002,147.841797),e.lineTo(56.394531,147.841797),e.bezierCurveTo(53.813476,147.841797,51.721679,145.30468800000003,51.721679,142.172852),e.lineTo(51.721679,127.99804700000001),e.bezierCurveTo(51.721679,124.86621100000002,53.813476,122.32910200000002,56.394531,122.32910200000002),e.lineTo(143.311523,122.32910200000002),e.bezierCurveTo(145.89160099999998,122.32910200000002,147.98535099999998,124.86621100000002,147.98535099999998,127.99804700000001),e.lineTo(147.98535099999998,142.172852),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f1f2f2",e.beginPath(),e.moveTo(147.140625,141.580078),e.bezierCurveTo(147.140625,144.47363299999998,145.084961,146.81640599999997,142.54882800000001,146.81640599999997),e.lineTo(57.15625,146.81640599999997),e.bezierCurveTo(54.620117,146.81640599999997,52.564453,144.47363299999998,52.564453,141.58007799999996),e.lineTo(52.564453,128.48535099999995),e.bezierCurveTo(52.564453,125.59081999999995,54.620117,123.24706999999995,57.15625,123.24706999999995),e.lineTo(142.54882800000001,123.24706999999995),e.bezierCurveTo(145.08496100000002,123.24706999999995,147.140625,125.59081999999995,147.140625,128.48535099999995),e.lineTo(147.140625,141.580078),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),o.call(this,e),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#fff200",e.lineWidth=8,e.beginPath(),e.moveTo(133.157227,59.757324),e.bezierCurveTo(124.25976600000001,52.414550999999996,112.85351600000001,48.003417999999996,100.416993,48.003417999999996),e.bezierCurveTo(88.180665,48.003417999999996,76.942384,52.272949,68.109376,59.402832),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#f7f7f7",e.beginPath(),e.moveTo(144.583008,129.894531),e.bezierCurveTo(144.583008,132.995117,143.463867,135.505859,142.083008,135.505859),e.lineTo(57.33300800000001,135.505859),e.bezierCurveTo(55.952149000000006,135.505859,54.83300800000001,132.995117,54.83300800000001,129.89453099999997),e.lineTo(54.83300800000001,129.89453099999997),e.bezierCurveTo(54.83300800000001,126.79492199999997,55.952149000000006,124.28222599999997,57.33300800000001,124.28222599999997),e.lineTo(142.083008,124.28222599999997),e.bezierCurveTo(143.463867,124.282227,144.583008,126.794922,144.583008,129.894531),e.lineTo(144.583008,129.894531),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),t.call(this,e),i.call(this,e),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#939598",e.beginPath(),e.moveTo(181.583008,98.136719),e.lineTo(186.895508,98.134766),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#919396",e.beginPath(),e.moveTo(17.684082,99.428223),e.lineTo(12.684082,99.362793),e.bezierCurveTo(12.688965,99.019043,12.695312,98.67627,12.704102,98.333496),e.lineTo(17.702149,98.458496),e.bezierCurveTo(17.694336,98.781738,17.687988,99.10498,17.684082,99.428223),e.lineTo(17.684082,99.428223),e.closePath(),e.moveTo(180.561523,89.754395),e.bezierCurveTo(180.528808,89.432129,180.49414,89.11084,180.45800699999998,88.79052800000001),e.lineTo(185.42577999999997,88.225098),e.bezierCurveTo(185.46484299999997,88.565918,185.50097499999998,88.907715,185.53613199999998,89.249512),e.lineTo(180.561523,89.754395),e.lineTo(180.561523,89.754395),e.closePath(),e.moveTo(18.505859,88.791016),e.lineTo(13.555664,88.087891),e.bezierCurveTo(13.604004,87.746582,13.654297,87.40625,13.707519,87.065918),e.lineTo(18.647949,87.835449),e.bezierCurveTo(18.598633,88.15332,18.55127,88.472168,18.505859,88.791016),e.lineTo(18.505859,88.791016),e.closePath(),e.moveTo(178.796875,79.243652),e.bezierCurveTo(178.72168,78.927734,178.64502,78.612793,178.566895,78.298339),e.lineTo(183.418458,77.089355),e.bezierCurveTo(183.501466,77.421386,183.582032,77.753906,183.66113399999998,78.087402),e.lineTo(178.796875,79.243652),e.lineTo(178.796875,79.243652),e.closePath(),e.moveTo(20.695313,78.358398),e.lineTo(15.879883,77.01171799999999),e.bezierCurveTo(15.972168,76.68163999999999,16.065918,76.35253799999998,16.16211,76.02392499999999),e.lineTo(20.961914999999998,77.42333899999998),e.bezierCurveTo(20.871582,77.734375,20.782715,78.045898,20.695313,78.358398),e.lineTo(20.695313,78.358398),e.closePath(),e.moveTo(175.65332,69.063965),e.bezierCurveTo(175.537597,68.762695,175.419922,68.461914,175.300293,68.16211),e.lineTo(179.943848,66.308594),e.bezierCurveTo(180.071289,66.62793,180.196778,66.948242,180.320313,67.269043),e.lineTo(175.65332,69.063965),e.lineTo(175.65332,69.063965),e.closePath(),e.moveTo(24.229492,68.292969),e.lineTo(19.630859,66.329102),e.bezierCurveTo(19.766113,66.01318400000001,19.902343000000002,65.698243,20.041015,65.383301),e.lineTo(24.617187,67.397949),e.bezierCurveTo(24.486328,67.695313,24.356934,67.993652,24.229492,68.292969),e.lineTo(24.229492,68.292969),e.closePath(),e.moveTo(171.165039,59.408691),e.bezierCurveTo(171.009766,59.126464,170.852539,58.845214,170.693848,58.565428999999995),e.lineTo(175.043457,56.099608999999994),e.bezierCurveTo(175.21191399999998,56.39697199999999,175.378906,56.69579999999999,175.54394499999998,56.994628999999996),e.lineTo(171.165039,59.408691),e.lineTo(171.165039,59.408691),e.closePath(),e.moveTo(29.047363,58.770508),e.lineTo(24.742675000000002,56.227539),e.bezierCurveTo(24.917968000000002,55.930664,25.094726,55.635254,25.273437,55.34082),e.lineTo(29.545898,57.937988000000004),e.bezierCurveTo(29.37793,58.214355,29.211914,58.492188,29.047363,58.770508),e.lineTo(29.047363,58.770508),e.closePath(),e.moveTo(165.407715,50.463867),e.bezierCurveTo(165.215332,50.205566,165.02148499999998,49.948242,164.825684,49.692871000000004),e.lineTo(168.79638699999998,46.653808000000005),e.bezierCurveTo(169.00488299999998,46.926757,169.211426,47.200683000000005,169.41650399999997,47.475585),e.lineTo(165.407715,50.463867),e.lineTo(165.407715,50.463867),e.closePath(),e.moveTo(35.058594,49.957031),e.lineTo(31.121094,46.875976),e.bezierCurveTo(31.332031999999998,46.606445,31.544434,46.33789,31.757324,46.0708),e.lineTo(35.663574,49.19287),e.bezierCurveTo(35.460449,49.446289,35.258789,49.701172,35.058594,49.957031),e.lineTo(35.058594,49.957031),e.closePath(),e.moveTo(158.48291,42.384766),e.bezierCurveTo(158.255371,42.153809,158.026367,41.923339999999996,157.796387,41.694825),e.lineTo(161.32080100000002,38.14795),e.bezierCurveTo(161.563477,38.389161,161.804199,38.631348,162.04443400000002,38.875001000000005),e.lineTo(158.48291,42.384766),e.lineTo(158.48291,42.384766),e.closePath(),e.moveTo(42.158691,41.992188),e.lineTo(38.648925,38.430665),e.bezierCurveTo(38.892576999999996,38.190919,39.137206,37.952638,39.3833,37.714845),e.lineTo(42.855956,41.312501),e.bezierCurveTo(42.622559,41.537598,42.389648,41.76416,42.158691,41.992188),e.lineTo(42.158691,41.992188),e.closePath(),e.moveTo(150.518066,35.311523),e.bezierCurveTo(150.26123,35.112793,150.003906,34.916015,149.744628,34.720703),e.lineTo(152.756347,30.729492),e.bezierCurveTo(153.030761,30.936523,153.303222,31.145019,153.574706,31.354492),e.lineTo(150.518066,35.311523),e.lineTo(150.518066,35.311523),e.closePath(),e.moveTo(50.222168,35.010254),e.lineTo(47.199707000000004,31.026856000000002),e.bezierCurveTo(47.472656,30.819825,47.74707,30.614258000000003,48.021973,30.410645000000002),e.lineTo(50.997559,34.4292),e.bezierCurveTo(50.738281,34.621094,50.479492,34.814941,50.222168,35.010254),e.lineTo(50.222168,35.010254),e.closePath(),e.moveTo(141.668945,29.370605),e.bezierCurveTo(141.38720700000002,29.208007000000002,141.104004,29.046875,140.820312,28.887207),e.lineTo(143.27246,24.529785),e.bezierCurveTo(143.571776,24.698242,143.869628,24.868164,144.166991,25.039551),e.lineTo(141.668945,29.370605),e.lineTo(141.668945,29.370605),e.closePath(),e.moveTo(59.115234,29.128906),e.lineTo(56.632812,24.789062),e.bezierCurveTo(56.930175,24.618652,57.228027000000004,24.451171000000002,57.527343,24.284667000000002),e.lineTo(59.958007,28.653808),e.bezierCurveTo(59.67627,28.810547,59.39502,28.969238,59.115234,29.128906),e.lineTo(59.115234,29.128906),e.closePath(),e.moveTo(132.098633,24.65625),e.bezierCurveTo(131.799317,24.532715,131.499512,24.410645,131.198242,24.290527),e.lineTo(133.051758,19.646972),e.bezierCurveTo(133.369629,19.773925000000002,133.687012,19.902831000000003,134.003906,20.033202000000003),e.lineTo(132.098633,24.65625),e.lineTo(132.098633,24.65625),e.closePath(),e.moveTo(68.689941,24.452637),e.lineTo(66.79248,19.82666),e.bezierCurveTo(67.108398,19.697265,67.424316,19.569824,67.741699,19.443847),e.lineTo(69.587402,24.090331000000003),e.bezierCurveTo(69.287598,24.209473,68.988281,24.330078,68.689941,24.452637),e.lineTo(68.689941,24.452637),e.closePath(),e.moveTo(121.997559,21.236328),e.bezierCurveTo(121.68457099999999,21.152344,121.371094,21.070312,121.05712899999999,20.990234),e.lineTo(122.29345699999999,16.145507000000002),e.bezierCurveTo(122.62597699999999,16.230468000000002,122.95703099999999,16.317382000000002,123.28759799999999,16.405273),e.lineTo(121.997559,21.236328),e.lineTo(121.997559,21.236328),e.closePath(),e.moveTo(78.793945,21.061523),e.lineTo(77.517578,16.227539),e.bezierCurveTo(77.848633,16.140137,78.18066400000001,16.054687,78.513183,15.970703),e.lineTo(79.734863,20.819336),e.bezierCurveTo(79.419922,20.898438,79.106445,20.979004,78.793945,21.061523),e.lineTo(78.793945,21.061523),e.closePath(),e.moveTo(111.530762,19.135254),e.bezierCurveTo(111.210449,19.091797,110.88964899999999,19.050293,110.56836,19.010254),e.lineTo(111.183594,14.04834),e.bezierCurveTo(111.524414,14.090332,111.864746,14.134765999999999,112.20459,14.181153),e.lineTo(111.530762,19.135254),e.lineTo(111.530762,19.135254),e.closePath(),e.moveTo(89.260254,19.016602),e.lineTo(88.621582,14.057617999999998),e.bezierCurveTo(88.96191400000001,14.013672999999997,89.303223,13.972168999999997,89.644531,13.932129999999997),e.lineTo(90.222656,18.898926999999997),e.bezierCurveTo(89.900879,18.936035,89.580078,18.975586,89.260254,19.016602),e.lineTo(89.260254,19.016602),e.closePath(),e.moveTo(100.878418,18.351074),e.lineTo(99.903809,18.344238),e.lineTo(99.91113299999999,13.344238),e.bezierCurveTo(100.25292999999999,13.344726000000001,100.59472699999999,13.347168,100.937012,13.351074),e.lineTo(100.878418,18.351074),e.lineTo(100.878418,18.351074),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#797a7d",e.beginPath(),e.moveTo(161.520508,38.728516),e.lineTo(152.083008,47.999512),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#797a7d",e.beginPath(),e.moveTo(39.011719,38.17334),e.lineTo(47.645508,46.853516),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#797a7d",e.beginPath(),e.moveTo(100.416504,12.853516),e.lineTo(100.416504,24.853516),e.fill(),e.stroke(),e.restore(),e.restore()}var t=function(e,t){this.renderVectorText(String(parseInt(this.model.get("min"))),this.$el.find("canvas")[0],13,21,98,"helvetica","normal","normal"),this.renderVectorText(String(parseInt(this.model.get("max"))),this.$el.find("canvas")[0],13,158,98,"helvetica","normal","normal")},i=function(e,t){e.translate(100,100);var i=parseInt(this.model.get("max")),s=parseInt(this.model.get("min")),o=i-s,n=parseInt(this.model.get("animParam1")*o/100);n=Math.abs(n);var r=n/o;r=Math.min(r,1),e.rotate((r-.5)*Math.PI);var a=e.createLinearGradient(94.150879,68.208984,106.535645,68.208984);a.addColorStop(.032967,"#3B3B3B"),a.addColorStop(.261715,"#353535"),a.addColorStop(.563195,"#242424"),a.addColorStop(.90393,"#090909"),a.addColorStop(1,"#000000"),e.fillStyle=a,e.strokeStyle="#4d4d4f",e.beginPath(),e.moveTo(1.749512,-70.750488),e.lineTo(6.535645,2.183594),e.lineTo(3.191895,7.189453),e.lineTo(-2.233887,7.175781),e.lineTo(-5.849121,2.087891),e.lineTo(-.500488,-70.771484),e.fill(),e.stroke()},s=function(e){var t=e.createLinearGradient(65.13623,59.277344,117.948776,120.839973);t.addColorStop(0,"#D1D1D1"),t.addColorStop(1,"#A6A6A6"),e.fillStyle=t,e.strokeStyle="#a5a7aa",e.beginPath(),e.arc(100.5,100.5,100,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#f3f4f4",e.globalAlpha=.8999999761581421,e.beginPath(),e.arc(100.5,100.5,95.239258,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke()},o=function(e){var t="#8dc63f",i="#ed1c24";this.model.get("flipZone")&&(t="#ed1c24",i="#8dc63f"),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=t,e.lineWidth=8,e.beginPath(),e.moveTo(68.109375,59.402832),e.bezierCurveTo(56.420898,68.838379,48.944336,83.28417999999999,48.944336,99.476562),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=i,e.lineWidth=8,e.beginPath(),e.moveTo(151.888672,99.476563),e.bezierCurveTo(151.888672,83.48584,144.59668000000002,69.19824299999999,133.157227,59.757325),e.fill(),e.stroke(),e.restore(),e.save()};return{gauge:{settings:{widgets:["valuePopup","minPopup","maxPopup","strokePopup","flipzonePopup","textPopup","textcolorPopup"]},render:function(){var t=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height")),t.save(),t.scale(this.model.get("width")/202,this.model.get("height")/202),t.save(),t.translate(0,0),e.call(this,t),t.fillStyle=this.model.get("textColor"),t.save();var i=parseInt(this.model.get("max")),s=parseInt(this.model.get("min"));parseInt(this.model.get("animParam1")*(i-s)/100)+s<=9?this.renderVectorText(String(parseInt(this.model.get("animParam1")*(i-s)/100)+s),this.$el.find("canvas")[0],18,93,143,"helvetica","normal","normal"):parseInt(this.model.get("animParam1")*(i-s)/100+s)<=99?this.renderVectorText(String(parseInt(this.model.get("animParam1")*(i-s)/100)+s),this.$el.find("canvas")[0],18,90,143,"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1")*(i-s)/100)+s),this.$el.find("canvas")[0],18,87,143,"helvetica","normal","normal"),this.model.get("text")&&this.model.get("showtext")&&(t.fillStyle=this.model.get("textColor"),t.textAlign="center",this.renderVectorText(String(this.model.get("text")),this.$el.find("canvas")[0],15,100,173,"helvetica","normal","normal"),t.textAlign="start"),t.restore()}}}}()},{}],100:[function(e,t,i){t.exports=function(){function e(e,t,i,s,o){e.save(),e.translate(22*(i-1),0),e.beginPath(),e.moveTo(0,0),e.lineTo(23,0),e.lineTo(23,23),e.lineTo(0,23),e.closePath(),e.clip(),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.translate(-363.5,-520.875),e.save(),"green"===s&&(o?e.fillStyle="#8dc63f":e.fillStyle="#19793B"),"yellow"===s&&(o?e.fillStyle="#ffe040":e.fillStyle="#685700"),"red"===s&&(o?e.fillStyle="#e84125":e.fillStyle="#6A0000"),e.strokeStyle="#50483e",e.beginPath(),e.moveTo(364,521.36218),e.lineTo(386,521.36218),e.quadraticCurveTo(386,521.36218,386,521.36218),e.lineTo(386,543.36218),e.quadraticCurveTo(386,543.36218,386,543.36218),e.lineTo(364,543.36218),e.quadraticCurveTo(364,543.36218,364,543.36218),e.lineTo(364,521.36218),e.quadraticCurveTo(364,521.36218,364,521.36218),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#ffffff",o?e.globalAlpha=.3499999940395355:e.globalAlpha=.1,e.beginPath(),e.moveTo(364.48541,521.87286),e.lineTo(385.48541,521.87286),e.quadraticCurveTo(385.48541,521.87286,385.48541,521.87286),e.lineTo(385.48541,532.87286),e.quadraticCurveTo(385.48541,532.87286,385.48541,532.87286),e.lineTo(364.48541,532.87286),e.quadraticCurveTo(364.48541,532.87286,364.48541,532.87286),e.lineTo(364.48541,521.87286),e.quadraticCurveTo(364.48541,521.87286,364.48541,521.87286),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore()}function t(e,t,i,s,o){e.save(),e.translate(22*(i-1),0);var n;o&&(e.save(),n=e.createLinearGradient(71.311996,97.857399,77.288597,97.857399),n.addColorStop(0,"#FFFFFF"),n.addColorStop(1,"#FFFFFF"),e.fillStyle=n,e.strokeStyle="#ffffff",e.translate(298.7948,432.30681),e.globalAlpha=.1600000113248825,e.beginPath(),e.arc(74.300301,97.857399,2.9883001,0,6.283185307179586,!0),e.closePath(),e.fill(),e.restore()),e.beginPath(),e.moveTo(0,0),e.lineTo(23,0),e.lineTo(23,23),e.lineTo(0,23),e.closePath(),e.clip(),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.translate(-363.5,-520.875),e.save(),e.translate(298.7948,432.30681),e.save(),n=e.createRadialGradient(74.098602,97.076202,0,74.098602,97.076202,10.8811),o?("green"===s&&(n.addColorStop(.2747,"#B0D235"),n.addColorStop(.7802,"#39B54A")),"yellow"===s&&(n.addColorStop(.2747,"#F8E527"),n.addColorStop(.7802,"#FEBE2D")),"red"===s&&(n.addColorStop(.2747,"#EA8235"),n.addColorStop(.7802,"#ED1C24")),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=5,e.shadowColor="rgba(255, 255, 255, 1)"):("green"===s&&(n.addColorStop(.2747,"#1C8444"),n.addColorStop(.7802,"#04622F")),"yellow"===s&&(n.addColorStop(.2747,"#847A1B"),n.addColorStop(.7802,"#685925")),"red"===s&&(n.addColorStop(.2747,"#8B1C1F"),n.addColorStop(.7802,"#690B0C"))),e.fillStyle=n,e.beginPath(),e.arc(76.191399,100.2979,8.0010004,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",o?("green"===s&&(e.strokeStyle="#6c8259"),"yellow"===s&&(e.strokeStyle="#93681f"),"red"===s&&(e.strokeStyle="#884d1a")):("green"===s&&(e.strokeStyle="#6c8259"),"yellow"===s&&(e.strokeStyle="#93681f"),"red"===s&&(e.strokeStyle="#884d1a")),e.beginPath(),e.moveTo(84.1919,100.2959),e.bezierCurveTo(84.1919,104.7168,80.6108,108.2988,76.1914,108.2988),e.bezierCurveTo(71.77250000000001,108.2988,68.1914,104.7168,68.1914,100.2959),e.bezierCurveTo(68.1914,95.8789,71.77250000000001,92.29690000000001,76.1914,92.29690000000001),e.bezierCurveTo(80.6108,92.29690000000001,84.1919,95.8789,84.1919,100.2959),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.save(),o&&(n=e.createLinearGradient(71.311996,97.857399,77.288597,97.857399),n.addColorStop(0,"#FFFFFF"),n.addColorStop(1,"#FFFFFF"),e.fillStyle=n,e.strokeStyle="#ffffff",e.translate(298.7948,432.30681),e.globalAlpha=.1600000113248825,e.beginPath(),e.arc(74.300301,97.857399,2.9883001,0,6.283185307179586,!0),e.closePath(),e.fill()),e.restore()}var i,s=function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()===this.model.get("width")&&this.$el.find("canvas").height()===this.model.get("height")||(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))),e.clearRect(0,0,this.model.get("width"),this.model.get("height"));var t=0;this.model.get("showtext")&&(t=100);var s=Math.min(this.model.get("width")/(221+t),this.model.get("height")/23);e.save(),e.scale(s,s),i.call(this,e),e.fillStyle=this.model.get("textColor"),e.fillStyle="black",e.restore()};return i=function(i){var s=parseInt(this.model.get("iDigits")),o=parseInt(this.model.get("animParam1")),n=parseInt(this.model.get("max")),r=1,a=s/(100/o);for(r=1;s>=r;r++){var l=!0;r>a&&(l=!1);var d;d=this.model.get("flipZone")?r<=Math.floor(.333*s+1)?"red":r<=Math.floor(.666*s+1)?"yellow":"green":r<=Math.floor(.333*s+1)?"green":r<=Math.floor(.666*s+1)?"yellow":"red",this.model.get("radialStroke")?t(i,"",r,d,l):e(i,"",r,d,l)}""!==this.model.get("text")&&this.model.get("showtext")&&(i.fillStyle=this.model.get("textColor"),this.model.get("radialStroke")?this.renderVectorText(String(parseInt(this.model.get("animParam1")*n/100)+" "+this.model.get("text")),this.$el.find("canvas")[0],16,22*this.model.get("iDigits")+5,18,"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1")*n/100)+" "+this.model.get("text")),this.$el.find("canvas")[0],18,22*this.model.get("iDigits")+10,18,"helvetica","normal","normal"))},{led:{settings:{widgets:["valuePopup","maxPopup","strokePopup","textPopup","textcolorPopup","strokePopup","flipzonePopup"]},render:function(){s.call(this)}}}}()},{}],101:[function(e,t,i){t.exports=function(){function e(e,t,i){e.save(),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(263.79199,0),e.lineTo(263.79199,24),e.lineTo(0,24),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(0,0),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath(),e.moveTo(0,0),e.lineTo(24,0),e.lineTo(24,24),e.lineTo(0,24),e.lineTo(0,0),e.closePath(),e.fill(),e.restore(),e.save(),e.translate(0,0),e.save(),e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath(),e.moveTo(29,0),e.lineTo(i,0),e.lineTo(i,24),e.lineTo(29,24),e.lineTo(29,0),e.closePath(),e.fill(),e.restore(),e.restore(),e.restore(),e.save(),e.fillStyle="#ffffff",e.globalAlpha=.28999999165534973,e.beginPath(),e.moveTo(0,0),e.lineTo(24,0),e.lineTo(24,12),e.lineTo(0,12),e.lineTo(0,0),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle="#ffffff",e.globalAlpha=.28999999165534973,e.beginPath(),e.moveTo(29,0),e.lineTo(i,0),e.lineTo(i,12),e.lineTo(29,12),e.lineTo(29,0),e.closePath(),e.fill(),e.restore(),e.restore()}function t(e,t,i){e.save(),e.translate(0,0),e.scale(1,1),e.translate(0,0),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.translate(0,0),e.save(),e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath(),e.moveTo(29,0),e.lineTo(i,0),e.arc(i,12,12,-.5*Math.PI,.5*Math.PI),e.lineTo(29,24),e.lineTo(29,0),e.closePath(),e.fill(),e.restore(),e.restore(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.translate(0,0),e.beginPath(),e.arc(12,12,12,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle="#ffffff",e.globalAlpha=.3,e.beginPath(),e.arc(12,12,12,0,Math.PI,!0),e.fill(),e.restore(),e.save(),e.fillStyle="#ffffff",e.globalAlpha=.3,e.beginPath(),e.moveTo(29,0),e.lineTo(i,0),e.arc(i,12,12,-.5*Math.PI,0),e.lineTo(29,12),e.lineTo(29,0),e.closePath(),e.fill(),e.restore(),e.save(),e.restore(),e.restore()}return{linearbar:{settings:{widgets:["valuePopup","maxPopup","textPopup","textcolorPopup","roundnessPopup"]},render:function(){var i=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()===this.model.get("width")&&this.$el.find("canvas").height()===this.model.get("height")||(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.model.get("width"),this.model.get("height")),i.save(),i.scale(this.model.get("width")/200,this.model.get("height")/24),i.save(),i.translate(0,0);var s,o,n,r;o=this.model.get("max"),n=171,s=this.model.get("animParam1"),r=n*s/100+29,this.model.get("roundness")?t.call(this,i,"",r):e.call(this,i,"",r),i.fillStyle=this.model.get("textColor"),i.save(),parseInt(this.model.get("animParam1")*o/100)<=9?this.renderVectorText(String(parseInt(this.model.get("animParam1"))*o/100),this.$el.find("canvas")[0],13,8.5,17,"helvetica","normal","normal"):parseInt(this.model.get("animParam1")*o/100)<=99?this.renderVectorText(String(parseInt(this.model.get("animParam1"))*o/100),this.$el.find("canvas")[0],13,4.5,17,"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1"))*o/100),this.$el.find("canvas")[0],13,.5,17,"helvetica","normal","normal"),this.model.get("text")&&this.model.get("showtext")&&(i.fillStyle=this.model.get("textColor"),this.renderVectorText(String(this.model.get("text")),this.$el.find("canvas")[0],13,33,17,"helvetica","normal","normal")),i.restore(),i.restore()}}}}()},{}],102:[function(e,t,i){t.exports={ometer:{settings:{widgets:["textPopup","textcolorPopup","valuePopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save(),e.scale(this.model.get("width")/200,this.model.get("height")/200),e.save(),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(200,0),e.lineTo(200,200),e.lineTo(0,200),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(-3.167,-1.167),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.save(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save();var t=e.createLinearGradient(36.9351,167.4004,169.4001,34.9354);t.addColorStop(0,"#FFFFFF"),t.addColorStop(.6252,"#FBFBFB"),t.addColorStop(1,"#F5F5F5"),e.fillStyle=t,e.beginPath(),e.arc(103.167,101.167,93.667,0,6.283185307179586,!0),e.closePath(),e.shadowColor="#CCC",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=10,e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#dedede",e.beginPath(),e.arc(103.167,101.167,93.667,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.save(),e.save(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),t=e.createLinearGradient(102.8511,171.1006,102.8511,31.2334),t.addColorStop(0,"#F7F7F7"),t.addColorStop(.4251,"#F2F2F2"),t.addColorStop(.9845,"#E1E1E1"),t.addColorStop(1,"#E0E0E0"),e.fillStyle=t,e.beginPath(),e.arc(102.851,101.167,69.934,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#dadbdc",e.beginPath(),e.arc(102.851,101.167,69.934,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.save(),e.restore(),e.save(),e.globalAlpha=.11999999731779099,e.save(),e.fillStyle="#030202",e.beginPath(),e.arc(102.851,101.167,69.934,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="#030202",e.beginPath(),e.arc(102.851,101.167,69.934,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=this.model.get("colors")[0],e.lineWidth=6,e.beginPath();var i=2*Math.PI/100*this.model.get("animParam1")-.5*Math.PI;this.model.get("animParam1")>=100?e.arc(102.834,102.167,82.333,0,2*Math.PI,!1):this.model.get("animParam1")>0&&e.arc(102.834,102.167,82.333,1.5*Math.PI,i,!1),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.save(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.save(),e.restore(),e.restore(),e.save(),t=e.createLinearGradient(109.833,31.2329,109.833,183.1636),t.addColorStop(0,this.model.get("colors")[0]),t.addColorStop(.2074,this.model.get("colors")[0]),t.addColorStop(.4547,this.model.get("colors")[0]),t.addColorStop(.7224,this.model.get("colors")[0]),t.addColorStop(1,this.model.get("colors")[0]),e.fillStyle=t;var s=parseFloat(this.model.get("animParam1"));e.beginPath(),this.model.get("animParam1")>0&&e.arc(102.851,101.167,69.934,.5*Math.PI+s/32.7,.5*Math.PI-s/32.7,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.restore(),e.fillStyle=this.model.get("textColor");var o=0;this.model.get("text")&&this.model.get("showtext")&&(o=10,this.renderVectorText(String(this.model.get("text")),this.$el.find("canvas")[0],12,102-3.2*String(this.model.get("text")).length,153-o,"arial","normal","normal")),this.model.get("animParam1")<10?this.renderVectorText(String(parseInt(this.model.get("animParam1"))),this.$el.find("canvas")[0],75,78,133-o,"impact","normal","normal"):this.model.get("animParam1")>=100?this.renderVectorText(String(parseInt(this.model.get("animParam1"))),this.$el.find("canvas")[0],75,42,133-o,"impact","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1"))),this.$el.find("canvas")[0],75,60,133-o,"impact","normal","normal"),e.scale(1,1),e.closePath(),e.restore(),e.restore()}}}},{}],103:[function(e,t,i){var s=e("./../../../../../helpers/colorLuminance.js");t.exports=function(){var e=function(e,t,i){e.fillStyle=s(t,-.3),e.beginPath(),e.moveTo(65.246329,92.314571),e.arc(65.246329,92.314571,62.4130854,1.5*Math.PI-.01*i*2*Math.PI,-.5*Math.PI,!1),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save()},t=function(e){e.fillStyle="rgba(175,177,180,0.75)",e.strokeStyle="rgba(125,126,129,0.75)",e.lineWidth=1.1666432619094849,e.beginPath(),e.moveTo(134.46562,92.313394),e.bezierCurveTo(134.46562,130.54431,103.4749,161.53268,65.246329,161.53268),e.bezierCurveTo(27.017761,161.53268,-3.9717873000000026,130.54313,-3.9717873000000026,92.313394),e.bezierCurveTo(-3.9717873000000026,54.088331000000004,27.017760999999997,23.097616000000002,65.246329,23.097616000000002),e.bezierCurveTo(103.4749,23.097616000000002,134.46562,54.087164,134.46562,92.313394),e.closePath(),e.fill(),e.stroke()},i=function(e){e.fillStyle="rgba(244, 244, 244, 0.75)",e.transform(1.1666434,0,0,1.1666434,-10.001,-37.884),e.beginPath(),e.moveTo(65.5,0),e.lineTo(48.012,21.527),e.lineTo(0,21.527),e.lineTo(7.175,10.935),e.lineTo(0,0),e.lineTo(65.5,0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(229, 228, 228, 0.75)",e.transform(1.1666434,0,0,1.1666434,-10.001,-37.884),e.beginPath(),e.moveTo(65.5,0),e.lineTo(65.5,21.527),e.lineTo(47.858,21.527),e.fill(),e.stroke(),e.restore(),e.save()},o=function(o){o.save(),o.translate(0,0),o.beginPath(),o.moveTo(0,0),o.lineTo(145.06351,0),o.lineTo(145.06351,200.0145),o.lineTo(0,200.0145),o.closePath(),o.clip(),o.translate(0,0),o.translate(0,0),o.scale(1,1),o.translate(10.001,37.884),o.strokeStyle="rgba(0,0,0,0)",o.lineCap="butt",o.lineJoin="miter",o.miterLimit=4,o.save(),o.restore(),o.save(),o.restore(),o.save(),this.model.get("radialStroke")&&t.call(this,o),o.restore(),o.save();var n=this.model.get("colors")[0],r=s(n,.07*parseFloat(this.model.get("animParam2")));o.fillStyle=r,o.transform(1.1666434,0,0,1.1666434,-10.001,-37.884),o.beginPath(),o.arc(64.499001,111.601,53.498001,0,6.283185307179586,!0),o.closePath(),o.fill(),o.stroke(),o.restore(),o.save(),e.call(this,o,r,parseInt(this.model.get("animParam1"))),o.fillStyle="#1a1a1a",o.transform(1.1666434,0,0,1.1666434,-10.001,-37.884),o.beginPath(),o.arc(64.5,111.603,2.872,0,6.283185307179586,!0),o.closePath(),o.fill(),o.stroke(),o.restore(),o.save(),i(o),o.fillStyle="#1a1a1a",o.beginPath(),o.moveTo(64.080856,-10.332556),o.lineTo(66.4141425,-10.332556),o.quadraticCurveTo(66.4141425,-10.332556,66.4141425,-10.332556),o.lineTo(66.4141425,89.51343700000001),o.quadraticCurveTo(66.4141425,89.51343700000001,66.4141425,89.51343700000001),o.lineTo(64.080856,89.51343700000001),o.quadraticCurveTo(64.080856,89.51343700000001,64.080856,89.51343700000001),o.lineTo(64.080856,-10.332556),o.quadraticCurveTo(64.080856,-10.332556,64.080856,-10.332556),o.closePath(),o.fill(),o.stroke(),o.restore(),o.restore()};return{pieceofapie:{settings:{widgets:["valuePopup","strokePopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),
this.$el.find("canvas").attr("height",this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save(),e.scale(this.model.get("width")/145,this.model.get("height")/201),e.save(),o.call(this,e),e.fillStyle=this.model.get("textColor"),e.fillStyle="black",this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],17,20,18,"helvetica","normal","normal"),e.restore()}}}}()},{"./../../../../../helpers/colorLuminance.js":56}],104:[function(e,t,i){t.exports={radial:{settings:{widgets:["valuePopup","textcolorPopup","strokePopup","showvaluePopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save(),e.scale(this.model.get("width")/200,this.model.get("height")/200),e.save(),e.translate(0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(200,0),e.lineTo(200,200),e.lineTo(0,200),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(6.5,6.5),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=this.model.get("colors")[0],this.model.get("radialStroke")?e.lineWidth=20:e.lineWidth=7,e.beginPath(),e.arc(93.5,93.5,90,0,6.283185307179586,!0),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=this.model.get("textColor"),this.model.get("radialStroke")?e.lineWidth=20:e.lineWidth=7,e.beginPath();var t=2*Math.PI/100*this.model.get("animParam1")-.5*Math.PI;this.model.get("animParam1")>=100?e.arc(93.5,93.5,90,0,2*Math.PI,!1):this.model.get("animParam1")>0&&(e.strokeStyle="#FFF",e.arc(93.5,93.5,90,1.5*Math.PI-.01*Math.PI,t+.01*Math.PI,!1),e.stroke(),e.beginPath(),e.strokeStyle=this.model.get("textColor"),e.arc(93.5,93.5,90,1.5*Math.PI,t,!1)),e.fill(),e.stroke(),this.model.get("radialStroke")&&(e.beginPath(),e.strokeStyle="#FFF",e.lineWidth=3,e.arc(93.5,93.5,90,0,6.283185307179586,!0),e.stroke()),e.restore(),e.restore(),e.fillStyle=this.model.get("textColor");var i=0;this.model.get("iSettings1")&&(this.model.get("animParam1")<10?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],65,58,133-i-7,"helvetica","normal","normal"):this.model.get("animParam1")>=100?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],65,19,133-i-7,"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],65,40,133-i-7,"helvetica","normal","normal")),e.restore()}}}},{}],105:[function(e,t,i){var s=e("./../../../../../helpers/colorLuminance.js");t.exports={ribbon:{settings:{widgets:["textPopup","textcolorPopup","valuePopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save(),e.scale(this.model.get("width")/200,this.model.get("height")/15),e.save(),e.translate(0,-20),e.beginPath(),e.moveTo(0,0),e.lineTo(200,0),e.lineTo(200,50),e.lineTo(0,50),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(0,19.966),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.fillStyle=s(this.model.get("colors")[0],-.3),e.beginPath(),e.moveTo(0,3.734),e.lineTo(68.375,3.734),e.quadraticCurveTo(68.375,3.734,68.375,3.734),e.lineTo(68.375,15.044),e.quadraticCurveTo(68.375,15.044,68.375,15.044),e.lineTo(0,15.044),e.quadraticCurveTo(0,15.044,0,15.044),e.lineTo(0,3.734),e.quadraticCurveTo(0,3.734,0,3.734),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath(),e.rect(62.265,.534,parseInt(this.model.get("animParam1")),12),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=s(this.model.get("colors")[0],-.6),e.beginPath(),e.moveTo(62.255,12.834),e.lineTo(68.255,12.834),e.lineTo(68.255,15.039),e.fill(),e.stroke(),e.closePath(),e.restore(),e.restore(),e.translate(0,-20),e.fillStyle=this.model.get("textColor");var t=0;this.model.get("text")&&this.model.get("showtext")&&this.renderVectorText(String(this.model.get("text")),this.$el.find("canvas")[0],10,2,33-t,"arial","normal","normal"),e.fillStyle="#000",this.model.get("tempCanvas")&&(this.model.get("animParam1")<10?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],12,58+parseInt(this.model.get("animParam1"))+7+5,31,"helvetica","normal","normal"):this.model.get("animParam1")>=100?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],12,19+parseInt(this.model.get("animParam1"))+40+7,31,"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],12,40+parseInt(this.model.get("animParam1"))+20+7,31,"helvetica","normal","normal")),e.restore()}}}},{"./../../../../../helpers/colorLuminance.js":56}],106:[function(e,t,i){t.exports={semicircles:{settings:{widgets:["valuePopup","circlesPopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height")),e.save(),e.scale(this.model.get("width")/200,this.model.get("height")/50),e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(200,0),e.lineTo(200,50),e.lineTo(0,50),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(0,3.196),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath();var t=Math.abs(this.model.get("animParam1")/2);e.moveTo(t,47),e.arc(t,47,t,Math.PI,0,!1),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[1];var i,s;this.model.get("circle2")&&(e.beginPath(),i=Math.abs(this.model.get("animParam2")/2),e.moveTo(2*t+i,47),e.moveTo(i+2*t,47),e.arc(i+2*t,47,i,Math.PI,0,!1),e.fill(),e.stroke(),e.closePath()),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[2],this.model.get("circle3")&&(e.beginPath(),e.moveTo(158,47),s=Math.abs(this.model.get("animParam3")/2),e.moveTo(s+2*t+2*i,47),e.arc(s+2*t+2*i,47,s,Math.PI,0,!1),e.fill(),e.closePath()),e.stroke(),e.restore(),e.restore(),e.fillStyle=this.model.get("textColor"),this.model.get("text")&&(e.fillStyle="#FFF"),e.fillStyle=this.model.get("textColor"),e.fillStyle="#FFF",this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"%",this.$el.find("canvas")[0],parseInt(t/2),t,53-t/2,"helvetica","normal","normal",0,0,0,1),this.model.get("circle2")&&this.renderVectorText(String(parseInt(this.model.get("animParam2")))+"%",this.$el.find("canvas")[0],parseInt(i/2),i+2*t,53-i/2,"helvetica","normal","normal",0,0,0,1),this.model.get("circle3")&&this.renderVectorText(String(parseInt(this.model.get("animParam3")))+"%",this.$el.find("canvas")[0],parseInt(s/2),s+2*i+2*t,53-s/2,"helvetica","normal","normal",0,0,0,1)}}}},{}],107:[function(e,t,i){t.exports={verticalmeter:{settings:{widgets:["textPopup","textcolorPopup","valuePopup"]},render:function(){var e=this.$el.find("canvas")[0].getContext("2d");this.$el.find("canvas").width()!==this.model.get("width")||this.$el.find("canvas").height()!==this.model.get("height")?(this.$el.find("canvas").attr("width",this.model.get("width")),this.$el.find("canvas").attr("height",this.model.get("height"))):e.clearRect(0,0,this.model.get("width"),this.model.get("height")),e.save(),e.scale(this.model.get("width")/86,this.model.get("height")/220),e.save(),e.translate(12,5),e.beginPath(),e.moveTo(0,0),e.lineTo(50,0),e.lineTo(50,200),e.lineTo(0,200),e.closePath(),e.clip(),e.translate(0,0),e.translate(0,0),e.scale(1,1),e.translate(2.417,7.75),e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.save(),e.fillStyle="#c7c8ca",e.beginPath(),e.moveTo(22.583,.25),e.lineTo(26.583,.25),e.quadraticCurveTo(26.583,.25,26.583,.25),e.lineTo(26.583,180.25),e.quadraticCurveTo(26.583,180.25,26.583,180.25),e.lineTo(22.583,180.25),e.quadraticCurveTo(22.583,180.25,22.583,180.25),e.lineTo(22.583,.25),e.quadraticCurveTo(22.583,.25,22.583,.25),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(17.583,.25),e.lineTo(31.583,.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(17.583,45.25),e.lineTo(31.583,45.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(17.583,89.25),e.lineTo(31.583,89.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(17.583,135.25),e.lineTo(31.583,135.25),e.fill(),e.stroke(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=this.model.get("colors")[0],e.lineWidth=4,e.moveTo(24.583,180.25),e.lineTo(24.583,180.25-.9*parseInt(2*this.model.get("animParam1"))),e.stroke(),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.583,9.25),e.lineTo(29.583,9.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,18.25),e.lineTo(29.75,18.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,27.25),e.lineTo(29.75,27.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,36.25),e.lineTo(29.75,36.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.583,52.25),e.lineTo(29.583,52.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,61.25),e.lineTo(29.75,61.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,70.25),e.lineTo(29.75,70.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,79.25),e.lineTo(29.75,79.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle="#c7c8ca",e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(19.583,99.25),e.lineTo(29.583,99.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,108.25),e.lineTo(29.75,108.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,117.25),e.lineTo(29.75,117.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.75,126.25),e.lineTo(29.75,126.25),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.458,143.688),e.lineTo(29.458,143.688),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.625,152.688),e.lineTo(29.625,152.688),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.625,161.688),e.lineTo(29.625,161.688),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle=this.model.get("colors")[0],e.lineWidth=.5,e.beginPath(),e.moveTo(19.625,170.688),e.lineTo(29.625,170.688),e.fill(),e.stroke(),e.restore(),e.save(),e.fillStyle=this.model.get("colors")[0],e.strokeStyle="#c7c8ca",e.lineWidth=.5,e.beginPath(),e.moveTo(17.208,180.25),e.lineTo(31.208,180.25),e.fill(),e.stroke(),e.restore(),e.save(),e.save(),e.save(),e.fillStyle=this.model.get("colors")[0],e.beginPath(),e.save(),e.translate(0,72-.9*parseInt(2*this.model.get("animParam1"))),e.moveTo(6.683,101.427),e.bezierCurveTo(2.992,101.44,0,104.419,0,108.11),e.bezierCurveTo(0,111.801,2.992,114.795,6.683,114.793),e.bezierCurveTo(9.041,114.792,18.77,108.11000000000001,18.77,108.11000000000001),e.bezierCurveTo(18.77,108.11000000000001,9.291,101.417,6.683,101.427),e.restore(),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore(),e.restore(),e.restore(),e.fillStyle=this.model.get("textColor");var t=0;this.model.get("text")&&this.model.get("showtext")&&this.renderVectorText(String(this.model.get("text")),this.$el.find("canvas")[0],12,40-3.5*String(this.model.get("text")).length,208-t,"arial","normal","normal"),this.model.get("animParam1")<10?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"",this.$el.find("canvas")[0],8,19,195.75-.9*parseInt(2*this.model.get("animParam1")),"helvetica","normal","normal"):this.model.get("animParam1")>=100?this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"",this.$el.find("canvas")[0],8,15,195.75-.9*parseInt(2*this.model.get("animParam1")),"helvetica","normal","normal"):this.renderVectorText(String(parseInt(this.model.get("animParam1")))+"",this.$el.find("canvas")[0],8,17,195.75-.9*parseInt(2*this.model.get("animParam1")),"helvetica","normal","normal"),e.restore()}}}},{}],108:[function(e,t,i){var s=e("underscore"),o={update:function(e,t){this.renders[this.model.get("render")].render.call(this),this.model.subMenu.settings=s.extend({},this.renders[this.model.get("render")].settings.widgets);var i=$.extend(!0,{},this.model.changed);delete i.arrParam,delete i.animParam1,delete i.animParam2,delete i.animParam3,s.isEmpty(i)||this._super(e,t)},renders:{}};s.extend(o.renders,e("./renders/ometer.js")),s.extend(o.renders,e("./renders/radial.js")),s.extend(o.renders,e("./renders/led.js")),s.extend(o.renders,e("./renders/ribbon.js")),s.extend(o.renders,e("./renders/semicircles.js")),s.extend(o.renders,e("./renders/verticalmeter.js")),s.extend(o.renders,e("./renders/linearbar.js")),s.extend(o.renders,e("./renders/pieceofapie.js")),s.extend(o.renders,e("./renders/gauge.js")),s.extend(o.renders,e("./renders/digitaldial.js")),s.extend(o.renders,e("./renders/array.js")),t.exports=o},{"./renders/array.js":97,"./renders/digitaldial.js":98,"./renders/gauge.js":99,"./renders/led.js":100,"./renders/linearbar.js":101,"./renders/ometer.js":102,"./renders/pieceofapie.js":103,"./renders/radial.js":104,"./renders/ribbon.js":105,"./renders/semicircles.js":106,"./renders/verticalmeter.js":107,underscore:52}],109:[function(e,t,i){t.exports={renderVectorText:function(e,t,i,s,o,n,r,a,l,d,h,c){var g=t.getContext("2d");c&&(g.textAlign="center",g.textBaseline="middle"),g.font=i+"px "+n,g.fillText(e,s,o)}}},{}],110:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){if(this._super(),"array"===this.get("render")||"gauge"===this.get("render")||"led"===this.get("render")){if(this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),1===this.get("colors").length){var e=this.get("colors")[0];this.set("colors",[e,"#d65642"])}}else this.propertyMenuItems=this.propertyMenuItems.concat(".btn-color",".btn-settings");this.nonTweenable=this.nonTweenable.concat(["circle2","circle3","radialStroke","roundness","showtext","iSettings1","flipZone"]),this.subMenu=s.extend({},o.prototype.subMenu),this.activeMenuItem=null},validators:{param1:{type:"number",params:{min:0,max:250}},inarow:{type:"number",params:{min:1,max:100}},animParam1:{type:"number",params:{min:0,max:100}},numParam:{type:"number",params:{min:0}},animParam2:{type:"number",params:{min:0,max:100}},param2:{type:"number",params:{min:0,max:100}},animParam3:{type:"number",params:{min:0,max:100}},param3:{type:"number",params:{min:0,max:100}},arrParam:{type:"number",params:{min:1,max:250}},text:{type:"string",params:{notblank:!0}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"infogrWidget",colors:["#00b0d8"],textColor:"#000",param1:45,animParam1:45,render:""}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],111:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=e("./updateMixin.js"),r=e("./vectorTextMixin.js");t.exports=o.extend(s.extend({},n,r,{template:"#infogr-widget",initialize:function(){this._super(),this.setParams()},render:function(){this._super(),this.update()},setParams:function(){!s.isUndefined(this.model.get("render"))&&"array"===this.model.get("render")&&s.isUndefined(this.model.get("arrParam"))?this.model.set("arrParam",this.model.get("param1")):"array"===this.model.get("render")||"led"===this.model.get("render")||s.isUndefined(this.model.get("animParam1"))||this.model.set("param1",this.model.get("animParam1")),!s.isUndefined(this.model.get("param2"))&&s.isUndefined(this.model.get("animParam2"))&&this.model.set("animParam2",this.model.get("param2")),!s.isUndefined(this.model.get("param3"))&&s.isUndefined(this.model.get("animParam3"))&&this.model.set("animParam3",this.model.get("param3"))}}))},{"../../objectView.js":80,"./updateMixin.js":108,"./vectorTextMixin.js":109,underscore:52}],112:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.activeMenuItem=null,this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.nonTweenable=this.nonTweenable.concat(["scope","transfer","name","data","dataColumnsRender","states","latlng","defaultFill","borderColor","legend","showBorder","popupOnHover","popupTheme","highlightOnHover","hideStates"]),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"]},validateRow:function(e){for(var t=0;t<e.length;++t)"string"==typeof e[t]&&(e[t]=e[t].replace(/[^\d.-]/g,""));return e},defineReadyPromise:function(){var e=$.Deferred(),t=this;this.bind("map:draw-done",e.resolve),e.done(function(){t.trigger("ready")}),this.promise=e.promise(),"Download"!==app.settings.get("project_type")&&setTimeout(function(){"pending"===this.promise.state()&&e.resolve()}.bind(this),1e4)},validators:{width:{type:"number",params:{min:1,max:1e5}},height:{type:"number",params:{min:1,max:1e5}}},defaults:{type:"map",name:"World",height:460,width:460,data:{},dataColumnsRender:[],states:[],scope:"world",latlng:[0,0],defaultFill:"#93c317",paletteIndexes:[4,5,0,0,0],borderColor:"#fff",legend:{activeData:!1,display:!1,data:"",title:"",textColor:"#000000",colors:[],labels:[]},showBorder:!0,popupOnHover:!0,popupTheme:"light",highlightOnHover:!0,hideStates:[],proportionLock:!0}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],113:[function(e,t,i){var s,o,n=e("underscore"),r=e("../../objectView.js"),a=e("../../../../helpers/loadScript.js");t.exports=r.extend({template:"#map",map:"",initialize:function(){this._super(),n.bindAll(this,"drawMap","transitionToSlide","setMapPosition","refreshMapOnSlide","updateChoropleth","d3loaded","maplibsLoaded"),this.isIE=app.settings.isIE(),app.on("loadscript:d3",this.d3loaded),app.on("loadscript:maplibs",this.maplibsLoaded),a("d3")&&this.d3loaded()},refresh:function(){this.model.changed=n.clone(this.model.attributes),this.update(this.model)},updateChoropleth:function(){if(this.map){var e=this.model.get("data");this.map.updateChoropleth(e)}},update:function(e,t){var i=this;if("object"==typeof this.map){if((n.has(this.model.changed,"width")||n.has(this.model.changed,"height"))&&this.setMapPosition(e),n.has(this.model.changed,"visibility")){var s="hidden"===this.model.changed.visibility?"none":"block";this.$el.css("display",s)}if(n.has(this.model.changed,"data")&&void 0!==this.model.get("data")){var r=this.model.get("data");this.map.updateChoropleth(r)}n.has(this.model.changed,"hideStates")&&(o.select("#"+i.model.get("id")+" .map-container svg").selectAll("path").attr("visibility","visible"),n.each(this.model.get("hideStates"),function(e){o.select("#"+i.model.get("id")+" .map-container svg").select("."+e).attr("visibility","hidden")})),(n.has(this.model.changed,"legend")&&void 0!==this.model.get("legend")||n.has(this.model.changed,"popupOnHover")||n.has(this.model.changed,"popupTheme")||n.has(this.model.changed,"scope"))&&(this.map.svg.remove(),this.drawMap(),delete this.model.changed.legend,delete this.model.changed.popupOnHover,delete this.model.changed.popupTheme,delete this.model.changed.scope),n.has(this.model.changed,"defaultFill")&&(this.$el.find("path").css("fill",this.model.get("defaultFill")),delete this.model.changed.defaultFill),n.has(this.model.changed,"borderColor")&&(this.$el.find("path").css("stroke",this.model.get("borderColor")),delete this.model.changed.borderColor),n.has(this.model.changed,"showBorder")&&(this.$el.find("path").css("stroke-width",this.model.get("showBorder")===!0?1:0),delete this.model.changed.showBorder)}this._super(e,t)},render:function(){this._super()},afterRender:function(){if(this.map){var e=this.model.get("data");this.map.updateChoropleth(e)}this._super()},maplibsLoaded:function(){s=window.Datamaps,app.bind("slide:transitionTo",this.transitionToSlide),app.bind("slide:new-selected",this.refreshMapOnSlide),this.model.listenTo(this.model,"map:updateChoropleth",this.updateChoropleth),this.drawMap()},d3loaded:function(){o=window.d3,a("maplibs")&&this.maplibsLoaded()},drawMap:function(){var e=this;e.$el.addClass("loading"),e.map&&(e.map.svg.remove(),e.$el.find(".map-container .datamaps-legend").remove()),this.model.get("scope")===this.model.previous("scope")&&this.result?this.newMap():app.settings.get("Html5Download")?(e.result=JSON.parse(this.model.get("mapJson")),e.newMap()):setTimeout(function(){$.ajax({url:"/utils/maps/"+e.model.get("scope")+"/topo",dataType:"json",success:function(t){e.result=t,e.newMap()}})},0)},newMap:function(){var e,t=Object.keys(this.result.objects)[0];app.settings.get("Html5Download")&&(e=this.result),this.map=new s({element:this.$el.find(".map-container")[0],scope:t,setProjection:function(e,t){var i;i="usa"===t.scope?o.geo.albersUsa():o.geo.mercator().center([this.model.get("latlng")[1],this.model.get("latlng")[0]]).scale((this.model.get("width")+1)/2/Math.PI);var s=o.geo.path().projection(i);return{path:s,projection:i}}.bind(this),responsive:!0,geographyConfig:{mapJson:e,dataUrl:"/utils/maps/"+this.model.get("scope")+"/topo",borderWidth:this.model.get("showBorder")===!0?1:0,borderOpacity:1,borderColor:this.model.get("borderColor"),popupTemplate:function(e,t){"PSE"===e.id&&(e.properties.name="Palestine"),app.settings.isIE()?$("#"+this.model.get("id")+" ."+e.id.replace(".","-")).css({"stroke-width":this.model.get("showBorder")===!0?1.1/this.model.get("transfer")[0]:0,fill:this.addOpacityToColor(t.fillColor,70)}):$("#"+this.model.get("id")+" ."+e.id.replace(".","-")).css("fill",this.addOpacityToColor(t.fillColor,70));var i="";return"object"==typeof t&&n.each(Object.keys(t),function(e){return"fillColor"===e||e.endsWith("-title")?{}:void(i+="<p>"+t[e+"-title"]+": "+t[e]+"</p>")}),'<div class="hoverinfo '+("light"===this.model.get("popupTheme")?"lightCaption":"darkCaption")+'"><p><b>'+e.properties.name+"</b></p>"+(""!==i?i:"")+"</div>"}.bind(this),popupOnHover:this.model.get("popupOnHover"),highlightOnHover:this.model.get("highlightOnHover"),highlightFillColor:this.addOpacityToColor(this.model.get("defaultFill"),70),highlightBorderColor:this.model.get("borderColor"),highlightBorderWidth:this.model.get("showBorder")===!0?1.1:0,highlightBorderOpacity:1,hideAntarctica:!0,hideHawaiiAndAlaska:!1},fills:{defaultFill:this.model.get("defaultFill"),q0:this.model.get("legend").colors[0]||"#314152",q1:this.model.get("legend").colors[1]||"#4a6244",q2:this.model.get("legend").colors[2]||"#628235",q3:this.model.get("legend").colors[3]||"#7ba326",q4:this.model.get("legend").colors[4]||"#93c317"},data:this.model.get("data"),done:function(){var e=this;this.setMapPosition(this.model),n.each(o.select("#"+this.model.get("id")+" .map-container svg").selectAll("path")[0],function(t){var i=t.attributes["class"].value;t.setAttribute("class",i.replace(".","-")),"af"===e.model.get("scope")&&("SDS"===t.classList[1]&&t.setAttribute("class",i.replace("SDS","SSD")),"SAH"===t.classList[1]&&t.setAttribute("class",i.replace("SAH","ESH")))}),this.map.updateChoropleth(this.model.get("data")),o.select("#"+this.model.get("id")+" .map-container svg").selectAll("path").attr("visibility","visible"),n.each(this.model.get("hideStates"),function(e){o.select("#"+this.model.get("id")+" .map-container svg").select("."+e).attr("visibility","hidden")}.bind(this)),this.setLegend(),app.settings.isIE()&&o.select("#"+this.model.get("id")+" .map-container svg").selectAll("path").style("stroke-width",this.model.get("showBorder")===!0?1.1/this.model.get("transfer")[0]:0),this.$el.removeClass("loading");var t=this.$el.parents("section.stage").attr("id");app.trigger(t+":change",this.model),"loading"===app.settings.get("state")&&this.model.trigger("map:draw-done")}.bind(this)})},refreshMapOnSlide:function(e){var t=e.get("objects");if(t.length>0){var i=n.filter(t,function(e){return e.id===this.model.get("id")}.bind(this));i.length>0&&setTimeout(function(){this.setMapPosition(this.model)}.bind(this),0)}},setMapPosition:function(e){e||(e=this.model);var t=this;if(o.select("#"+e.get("id")+" .map-container g").node()){var i=e.get("width"),s=e.get("height");if(e.get("legend")&&e.get("legend").display){var n=1;"left"===e.get("legend").display||"right"===e.get("legend").display?(n=(i-145)/i,i-=145,s*=n):(n=(s-70)/s,s-=70,i*=n)}var r,a,l,d,h=1,c=0,g=0,p=!1;try{r=o.select("#"+e.get("id")+" .map-container g").node().getBBox()}catch(u){p=!0}p||(l=-r.y,a=-r.x,c=r.width,g=r.height,"na"===e.get("scope")?c/=2:"oc"===e.get("scope")?(a=a-c+.9*g,c=g):"eu"===e.get("scope")&&(a-=c/3,c=2*c/3)),c>0&&g>0?(c>=g?(h=i/c,g*=h,l=-r.y+(s-g)/h/2):(h=s/g,c*=h,a=-r.x+(i-c)/h/2),"right"===e.get("legend").display&&(l+=130/h/2),"left"===e.get("legend").display&&(a+=145/h,l+=130/h/2),"top"===e.get("legend").display&&(a+=50/h/2,l+=50/h),"bottom"===e.get("legend").display&&(a+=50/h/2),e.set("transfer",[h,a+","+l],{silent:!0}),d=a+","+l):e.get("transfer")&&(h=e.get("transfer")[0],d=e.get("transfer")[1]),h&&d&&(o.select("#"+this.model.get("id")+" .map-container g").attr({transform:"scale("+h+")translate("+d+")"}),t.$el.find(".map-container").css({"padding-bottom":0}))}},setLegend:function(){if(this.$el.find(".map-container .datamaps-legend").remove(),this.model.get("legend").activeData&&this.model.get("legend").display){var e=n.isUndefined(this.model.get("legend").textColor)?"#000000":this.model.get("legend").textColor;this.map.legend({legendTitle:this.model.get("legend").title,labels:{q0:this.model.get("legend").labels[0],q1:this.model.get("legend").labels[1],q2:this.model.get("legend").labels[2],q3:this.model.get("legend").labels[3],q4:this.model.get("legend").labels[4]},textColor:e}),this.$el.find(".map-container .datamaps-legend").attr("class","datamaps-legend "+this.model.get("legend").display+"-side");var t=this.$el.find(".map-container .datamaps-legend").find("dl");t.find("dd:eq(0), dt:eq(0)").wrapAll('<div class="wrap"></div>'),t.find("dd:eq(1), dt:eq(1)").wrapAll('<div class="wrap"></div>'),t.find("dd:eq(2), dt:eq(2)").wrapAll('<div class="wrap"></div>'),t.find("dd:eq(3), dt:eq(3)").wrapAll('<div class="wrap"></div>'),t.find("dd:eq(4), dt:eq(4)").wrapAll('<div class="wrap"></div>')}},transitionToSlide:function(e){var t=this.model;this.setMapPosition(t)},addOpacityToColor:function(e,t){if(-1!==e.indexOf("rgba"))e=e.replace(/,\s*[\d.]+\s*\)/,","+t/100+")");else if(-1!==e.indexOf("rgb"))e=e.replace(e.slice(-2,-1),","+t/100+")");else if(-1!==e.indexOf("#")){e=e.replace("#","");var i=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);e="rgba("+i+","+s+","+o+","+t/100+")"}return e},dblclick:function(){app.trigger("mapPopup:show",this.model)}})},{"../../../../helpers/loadScript.js":61,"../../objectView.js":80,underscore:52}],114:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["crop","ext","filename","linkUrl"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-replace"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null,this.get("src")||this.set("src","404.pdf")},defaults:{type:"pdf",src:"",proportionLock:!1}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],115:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=window.TweenMax,r=o.extend({template:"#pdf",pdfDbclick:function(){$("#upload-trigger").click()},events:{dblclick:"pdfDbclick"},initialize:function(){s.bindAll(this,"beginDragging","finishDragging","replacePdf"),this.backendRenderedProperties=this.backendRenderedProperties.concat("src"),app.listenTo(app,"object:handle-drag-start",this.beginDragging),app.listenTo(app,"object:handle-drag-end",this.finishDragging),app.listenTo(app,"pdf-replaced",this.replacePdf),this._super()},beginDragging:function(){this.dragActive=!0},finishDragging:function(){this.dragActive=!1},replacePdf:function(e){parseInt(this.model.get("assetid"),10)===parseInt(e.id,10)&&(this.model.set("link",e.link),this.model.set("ext",e.ext),this.model.set("originsize",e.size),this.model.set("size",parseInt(e.size/1e3,10)+" KB"),this.model.set("filename",e.hash),this.model.set("updatedat",e.updatedAt),this.model.set("updatedby",e.updatedBy),this.model.set("src",e.hash+"."+e.ext),this.model.set("proportionLock",0),setTimeout(function(){app.trigger("save:non-force")},3e3))},update:function(e,t){n.set(this.$el.find("iframe"),{css:{"-webkit-box-reflect":"none"}}),s.has(this.model.changed,"src")&&($("#"+this.$el[0].id+" .crop_wrapper iframe").attr("src","https://docs.google.com/gview?url="+app.settings.get("usersDataStorage")+this.model.changed.src+"&embedded=true"),delete this.model.changed.src),""!==this.model.get("src")?this.disableLoading():this.enableLoading(),this._super(e,t)},enableLoading:function(){n.set(this.$el.find(".loader_code"),{css:{display:"block"}})},disableLoading:function(){n.set(this.$el.find(".loader_code"),{css:{display:"none"}})},render:function(){this._super(),this.$el.find("iframe").error(function(){$(this).attr("src",app.settings.get("usersDataStorage")+"404.pdf")})}});s.defaults(r.prototype.events,o.prototype.events),s.defaults(r.prototype.render,o.prototype.render),t.exports=r},{"../../objectView.js":80,underscore:52}],116:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["value","percentValue","rangeValue","iSettings1","showtext","style"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),
this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{text:{type:"string",params:{notblank:!0}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"progressbar",height:43.2,width:300,value:25,rangeValue:[0,100],percentValue:!0,iSettings1:!0,showtext:!0,textColor:"#FFFFFF",colors:["#1DAFBA","#414042","#1DAFBA"]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],117:[function(e,t,i){var s,o=e("underscore"),n=e("../../objectView.js"),r=window.TweenMax,a=e("../../../../helpers/loadScript.js");t.exports=n.extend({template:"#progressbar",settings:{widgets:["valueRangePopup","colorPopup","textcolorPopup","showvaluePopup"]},options:{colorslabel:["Circle","Range","Progress Bar"]},initialize:function(){o.bindAll(this,"refreshIt","setStyle","setProgress","setColors","setTextColor","setLabel","d3loaded","toggleText","toggleValue","getOffset","d3loaded"),a("d3")&&this.d3loaded(),app.on("loadscript:d3",this.d3loaded),"progressbar-1"===this.model.get("style")||"progressbar-1v"===this.model.get("style")?this.options.colorslabel=["Circle","Range","Progress Bar"]:"progressbar-2"===this.model.get("style")||"progressbar-3"===this.model.get("style")||"progressbar-4"===this.model.get("style")||"progressbar-2v"===this.model.get("style")||"progressbar-3v"===this.model.get("style")||"progressbar-4v"===this.model.get("style")?this.options.colorslabel=["Frame","Range","Progress Bar"]:"progressbar-5"===this.model.get("style")?this.options.colorslabel=["Border","Range","Progress Bar"]:"progressbar-6"===this.model.get("style")||"progressbar-12"===this.model.get("style")?this.options.colorslabel=["Value Color","Ribbon"]:"progressbar-7"===this.model.get("style")||"progressbar-7v"===this.model.get("style")?this.options.colorslabel=["Progress Bar","Range"]:"progressbar-8"===this.model.get("style")?this.options.colorslabel=["Progress Bar"]:"progressbar-9"===this.model.get("style")||"progressbar-10"===this.model.get("style")?this.options.colorslabel=["Frame","Range","Progress Bar"]:"progressbar-11"===this.model.get("style")&&(this.options.colorslabel=["Low","Medium","High"]),"progressbar-6"===this.model.get("style")||"progressbar-12"===this.model.get("style")?this.settings.widgets=["valueRangePopup","colorPopup","textcolorPopup","showvaluePopup","textPopup"]:this.settings.widgets=["valueRangePopup","colorPopup","textcolorPopup","showvaluePopup"],this.model.subMenu.options=o.extend({},this.options),this.model.subMenu.settings=o.extend({},this.settings.widgets),this.backendRenderedProperties=this.backendRenderedProperties.concat("style","textColor","text"),this._super()},update:function(e,t){o.has(this.model.changed,"style")&&this.setStyle(),(o.has(this.model.changed,"value")||o.has(this.model.changed,"rangeValue")||o.has(this.model.changed,"percentValue"))&&this.setProgress(),o.has(this.model.changed,"colors")&&this.setColors(),o.has(this.model.changed,"textColor")&&this.setTextColor(),o.has(this.model.changed,"text")&&this.setLabel(),o.has(this.model.changed,"showtext")&&this.toggleText(),o.has(this.model.changed,"iSettings1")&&this.toggleValue(),this._super(e,t)},refreshIt:function(){this.setStyle(),this.setProgress(),this.setColors(),this.setTextColor(),this.setLabel(),this.toggleValue()},d3loaded:function(){s=window.d3,this.setProgress(),this.setColors()},setStyle:function(){this.$el.find(".svg-wrapper").attr("class","svg-wrapper svg-wrapper-progressbar svg-wrapper-"+this.model.get("style"))},setProgress:function(){if(s){var e=this.model.get("rangeValue")[0],t=this.model.get("rangeValue")[1],i=this.model.get("value");i>t?(this.model.set("value",t),i=t):e>i&&(this.model.set("value",e),i=e);var o=(i-e)/(t-e)*100;this.ratio=o,"Download"!==app.settings.get("project_type")&&"editor"!==app.settings.get("editMode")||("progressbar-1"===this.model.get("style")&&("Download"===app.settings.get("project_type")?s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("x2",278*Math.round(o)/100+11):(r.set(this.$el.find(".progressbar-1 .ProgressBar"),{drawSVG:Math.round(o)+"%"}),r.set(this.$el.find(".progressbar-1 .ProgressBarBg"),{drawSVG:Math.round(o)+"% 100%"})),r.set(this.$el.find(".progressbar-1 .Background"),{x:2.59*Math.round(o)+"px"}),r.set(this.$el.find(".progressbar-1 .progressbarValue"),{x:2.59*Math.round(o)+"px"})),"progressbar-1v"===this.model.get("style")&&("Download"===app.settings.get("project_type")?s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("y2",289-278*Math.round(o)/100):(r.set(this.$el.find(".progressbar-1v .ProgressBar"),{drawSVG:Math.round(o)+"%"}),r.set(this.$el.find(".progressbar-1v .ProgressBarBg"),{drawSVG:Math.round(o)+"% 100%"})),r.set(this.$el.find(".progressbar-1v .Background"),{y:259-2.59*Math.round(o)+"px"}),r.set(this.$el.find(".progressbar-1v .progressbarValue"),{y:259-2.59*Math.round(o)+"px"})),"progressbar-4"===this.model.get("style")&&(r.set(this.$el.find(".progressbar-4 .arrow"),{x:2.82*Math.round(o)+"px"}),r.set(this.$el.find(".progressbar-4 .progressbarValue"),{x:2.82*Math.round(o)-(o>80?56:0)+"px"})),"progressbar-4v"===this.model.get("style")&&(r.set(this.$el.find(".progressbar-4v .arrow"),{y:282-2.82*Math.round(o)+"px"}),r.set(this.$el.find(".progressbar-4v .progressbarValue"),{y:282-2.82*Math.round(o)+"px"})),"progressbar-6"===this.model.get("style")&&("Download"===app.settings.get("project_type")?s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("x2",322*Math.round(o)/100+152):r.set(this.$el.find(".progressbar-6 .ProgressBar"),{drawSVG:Math.round(o)+"%"}),r.set(this.$el.find(".progressbar-6 .arrow"),{x:3.22*Math.round(o)-322+"px"}),r.set(this.$el.find(".progressbar-6 .progressbarValue"),{x:3.22*Math.round(o)-322+"px"})),"progressbar-8"===this.model.get("style")&&("Download"===app.settings.get("project_type")?s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("y2",286.2-272.4*Math.round(o)/100):r.set(this.$el.find(".progressbar-8 .ProgressBar"),{drawSVG:Math.round(o)+"%"}),r.set(this.$el.find(".progressbar-8 .ProgressBarCap"),{y:2.724*(100-Math.round(o))})),"progressbar-9"!==this.model.get("style")&&"progressbar-10"!==this.model.get("style")&&r.set($("#"+this.model.get("id")+" svg .path").find(".step-2, .step-3"),{attr:{offset:Math.round(o)+"%"}}),"progressbar-9"!==this.model.get("style")&&"progressbar-10"!==this.model.get("style")||(r.set(this.$el.find("."+this.model.get("style")+" .path-top").find(".step-2, .step-3"),{attr:{offset:100-Math.round(o)+"%"}}),r.set(this.$el.find("."+this.model.get("style")+" .path-bot").find(".step-2, .step-3"),{attr:{offset:Math.round(o)+"%"}},.1),100===Math.round(o)||0===Math.round(o)?this.$el.find("."+this.model.get("style")).find(".ProgressBarLine").hide():this.$el.find("."+this.model.get("style")).find(".ProgressBarLine").show()),"progressbar-11"===this.model.get("style")&&this.setColors(),"progressbar-12"===this.model.get("style")&&("Download"===app.settings.get("project_type")?s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("x2",323*Math.round(o)/100+151):r.set(this.$el.find(".progressbar-12 .ProgressBar"),{drawSVG:Math.round(o)+"%"}),r.set(this.$el.find(".progressbar-12 .progressbarValue"),{x:3.22*Math.round(o)-322+"px"})));var n=this.model.get("percentValue")?this.model.get("value")+"%":this.model.get("value");this.$el.find("."+this.model.get("style")).find(".progressbarValue").text(n);var a=this.$el.parents("section.stage").attr("id");app.trigger(a+":change",this.model)}},getOffset:function(e){var t=[Math.round(this.ratio)+"%",Math.round(this.ratio)+"%"];return{offset:t[e]}},setColors:function(){function e(e,t){var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>n?1>n?0:n:255)+(255>r?1>r?0:r:255)).toString(16).slice(1)}if(s){switch(this.model.get("style")){case"progressbar-1":r.set(this.$el.find(".progressbar-1 .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-1 .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),r.set(this.$el.find(".progressbar-1 .ProgressBar"),{stroke:this.model.get("colors")[2]});break;case"progressbar-1v":r.set(this.$el.find(".progressbar-1v .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-1v .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),r.set(this.$el.find(".progressbar-1v .ProgressBar"),{stroke:this.model.get("colors")[2]});break;case"progressbar-2":r.set(this.$el.find(".progressbar-2 .Background"),{stroke:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-2 .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),this.$el.find(".progressbar-2 .ProgressBar").attr("stroke","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-2 .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-2").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-2").find(".step-3, .step-4"),{css:{"stop-color":e(this.model.get("colors")[2],30)}});break;case"progressbar-2v":r.set(this.$el.find(".progressbar-2v .Background"),{stroke:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-2v .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),this.$el.find(".progressbar-2v .ProgressBar").attr("stroke","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-2v .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-2v").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-2v").find(".step-3, .step-4"),{css:{"stop-color":e(this.model.get("colors")[2],30)}});break;case"progressbar-3":r.set(this.$el.find(".progressbar-3 .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-3 .ProgressBarBg"),{fill:this.model.get("colors")[1]}),this.$el.find(".progressbar-3 .ProgressBar").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-3 .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-3").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-3").find(".step-3, .step-4"),{css:{"stop-color":e(this.model.get("colors")[2],30)}});break;case"progressbar-3v":r.set(this.$el.find(".progressbar-3v .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-3v .ProgressBarBg"),{fill:this.model.get("colors")[1]}),this.$el.find(".progressbar-3v .ProgressBar").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-3v .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-3v").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-3v").find(".step-3, .step-4"),{css:{"stop-color":e(this.model.get("colors")[2],30)}});break;case"progressbar-4":r.set(this.$el.find(".progressbar-4 .Background"),{stroke:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-4 .arrow"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-4 .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),this.$el.find(".progressbar-4 .ProgressBar").attr("stroke","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-4 .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-4").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-4").find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-4v":r.set(this.$el.find(".progressbar-4v .Background"),{stroke:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-4v .arrow"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-4v .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),this.$el.find(".progressbar-4v .ProgressBar").attr("stroke","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-4v .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-4v").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-4v").find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-5":this.$el.find(".progressbar-5 .ProgressBar").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-5 .ProgressBar").attr("stroke",this.model.get("colors")[0]),this.$el.find(".progressbar-5 .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-5").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find(".progressbar-5").find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-6":r.set(this.$el.find(".progressbar-6 .progressbarValue"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-6").find(".ProgressBarPart1, .ProgressBarPart3, .arrow"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find(".progressbar-6").find(".ProgressBarPart2"),{fill:e(this.model.get("colors")[1],-20)}),r.set(this.$el.find(".progressbar-6").find(".ProgressBar"),{stroke:this.model.get("colors")[1]});break;case"progressbar-7":this.$el.find(".progressbar-7 .ProgressBar").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-7 .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-7").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[0]}}),r.set(this.$el.find(".progressbar-7").find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-7v":this.$el.find(".progressbar-7v .ProgressBar").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find(".progressbar-7v .path").attr("id",this.model.get("id")+"Grad"),r.set(this.$el.find(".progressbar-7v").find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[0]}}),r.set(this.$el.find(".progressbar-7v").find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-8":r.set(this.$el.find(".progressbar-8").find(".ProgressBarCap"),{fill:e(this.model.get("colors")[0],25)}),r.set(this.$el.find(".progressbar-8").find(".ProgressBar"),{stroke:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-8").find(".ProgressBarBot"),{fill:this.model.get("colors")[0]});break;case"progressbar-9":case"progressbar-10":r.set(this.$el.find("."+this.model.get("style")+" .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarBg"),{stroke:this.model.get("colors")[0],fill:this.model.get("colors")[1]}),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarLine"),{stroke:this.model.get("colors")[2]}),this.$el.find("."+this.model.get("style")+" .ProgressBarTop").attr("fill","url(#"+this.model.get("id")+"GradTop)"),this.$el.find("."+this.model.get("style")+" .path-top").attr("id",this.model.get("id")+"GradTop"),this.$el.find("."+this.model.get("style")+" .ProgressBarBot").attr("fill","url(#"+this.model.get("id")+"GradBot)"),this.$el.find("."+this.model.get("style")+" .path-bot").attr("id",this.model.get("id")+"GradBot"),r.set(this.$el.find("."+this.model.get("style")).find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[2]}}),r.set(this.$el.find("."+this.model.get("style")).find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[1]}});break;case"progressbar-11":r.set(this.$el.find("."+this.model.get("style")+" .level-1"),{fill:this.ratio>=10?this.model.get("colors")[0]:e(this.model.get("colors")[0],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-2"),{fill:this.ratio>=20?this.model.get("colors")[0]:e(this.model.get("colors")[0],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-3"),{fill:this.ratio>=30?this.model.get("colors")[0]:e(this.model.get("colors")[0],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-4"),{fill:this.ratio>=40?this.model.get("colors")[0]:e(this.model.get("colors")[0],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-5"),{fill:this.ratio>=50?this.model.get("colors")[1]:e(this.model.get("colors")[1],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-6"),{fill:this.ratio>=60?this.model.get("colors")[1]:e(this.model.get("colors")[1],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-7"),{fill:this.ratio>=70?this.model.get("colors")[1]:e(this.model.get("colors")[1],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-8"),{fill:this.ratio>=80?this.model.get("colors")[2]:e(this.model.get("colors")[2],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-9"),{fill:this.ratio>=90?this.model.get("colors")[2]:e(this.model.get("colors")[2],-40)}),r.set(this.$el.find("."+this.model.get("style")+" .level-10"),{fill:100===this.ratio?this.model.get("colors")[2]:e(this.model.get("colors")[2],-40)});break;case"progressbar-12":r.set(this.$el.find(".progressbar-12 .progressbarValue"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".progressbar-12").find(".ProgressBarPart1"),{fill:e(this.model.get("colors")[1],-10)}),r.set(this.$el.find(".progressbar-12").find(".ProgressBarPart2"),{fill:e(this.model.get("colors")[1],-35)}),r.set(this.$el.find(".progressbar-12").find(".ProgressBarPart3"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find(".progressbar-12").find(".ProgressBar"),{stroke:this.model.get("colors")[1]})}var t=this.$el.parents("section.stage").attr("id");app.trigger(t+":change",this.model)}},setTextColor:function(){"progressbar-6"!==this.model.get("style")&&"progressbar-12"!==this.model.get("style")?r.set(this.$el.find("."+this.model.get("style")+" .progressbarValue"),{fill:this.model.get("textColor")}):r.set(this.$el.find("."+this.model.get("style")+" .progressbarText"),{fill:this.model.get("textColor")})},setLabel:function(){this.$el.find("."+this.model.get("style")+" .progressbarText").text(this.model.get("text"))},toggleText:function(){this.model.get("showtext")?this.$el.find("."+this.model.get("style")+" .progressbarText").show():this.$el.find("."+this.model.get("style")+" .progressbarText").hide()},toggleValue:function(){this.model.get("iSettings1")?(this.$el.find("."+this.model.get("style")+" .progressbarValue").show(),"progressbar-2"===this.model.get("style")&&(this.$el.find(".progressbar-2").find(".ProgressBarBg, .ProgressBar").attr("x1",75),this.$el.find(".progressbar-2 .path").attr("x1",66)),"progressbar-2v"===this.model.get("style")&&(this.$el.find(".progressbar-2v").find(".ProgressBarBg, .ProgressBar").attr("y1",245),this.$el.find(".progressbar-2v .path").attr("y1",254))):(this.$el.find("."+this.model.get("style")+" .progressbarValue").hide(),"progressbar-2"===this.model.get("style")&&(this.$el.find(".progressbar-2").find(".ProgressBarBg, .ProgressBar").attr("x1",21.6),this.$el.find(".progressbar-2 .path").attr("x1",12)),"progressbar-2v"===this.model.get("style")&&(this.$el.find(".progressbar-2v").find(".ProgressBarBg, .ProgressBar").attr("y1",278.4),this.$el.find(".progressbar-2v .path").attr("y1",287.4)))}})},{"../../../../helpers/loadScript.js":61,"../../objectView.js":80,underscore:52}],118:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["value","percentValue","rangeValue","iSettings1","style"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{text:{type:"string",params:{notblank:!0}},render:{type:"string",params:{notblank:!0}}},defaults:{type:"radials",height:200,width:200,value:35,rangeValue:[0,100],percentValue:!0,iSettings1:!0,textColor:"#FFFFFF",colors:["#1DAFBA","#414042","#1DAFBA"]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],119:[function(e,t,i){var s,o=e("underscore"),n=e("../../objectView.js"),r=window.TweenMax,a=e("../../../../helpers/loadScript.js");t.exports=n.extend({template:"#radial",settings:{widgets:["valueRangePopup","colorPopup","textcolorPopup","showvaluePopup"]},options:{colorslabel:["Frame","Range","Progress"]},initialize:function(){o.bindAll(this,"refreshIt","setStyle","setValue","setColors","d3loaded","setTextColor","toggleValue","getOffset"),app.on("loadscript:d3",this.d3loaded),a("d3")&&this.d3loaded(),"radial-6"===this.model.get("style")&&(this.options.colorslabel=["Flag","Range","Progress"]),this.model.subMenu.settings=o.extend({},this.settings.widgets),this.model.subMenu.options=o.extend({},this.options),this.backendRenderedProperties=this.backendRenderedProperties.concat("style","textColor"),this._super()},d3loaded:function(){s=window.d3,this.setValue(),this.setColors()},update:function(e,t){o.has(this.model.changed,"style")&&this.setStyle(),(o.has(this.model.changed,"value")||o.has(this.model.changed,"rangeValue")||o.has(this.model.changed,"percentValue"))&&this.setValue(),o.has(this.model.changed,"colors")&&this.setColors(),o.has(this.model.changed,"textColor")&&this.setTextColor(),o.has(this.model.changed,"iSettings1")&&this.toggleValue(),this._super(e,t)},render:function(){this._super(),this.setColors(),this.setTextColor(),this.toggleValue()},refreshIt:function(){this.setStyle(),this.setValue(),this.setColors(),this.setTextColor(),this.toggleValue()},setStyle:function(){this.style=this.model.get("style"),this.$el.find(".svg-wrapper").attr("class","svg-wrapper svg-wrapper-radial svg-wrapper-"+this.model.get("style"))},setValue:function(){if(s){var e=this.model.get("rangeValue")[0],t=this.model.get("rangeValue")[1],i=this.model.get("value");i>t?(this.model.set("value",t),i=t):e>i&&(this.model.set("value",e),i=e);var o=(i-e)/(t-e)*100;if("Download"===app.settings.get("project_type")||"editor"===app.settings.get("editMode"))if("Download"!==app.settings.get("project_type")){var n="100px 100px";"radial-5"!==this.model.get("style")&&("radial-6"===this.model.get("style")&&(n="137.4px 197.9px"),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarBg"),{svgOrigin:n})),"radial-5"===this.model.get("style")&&r.set($("#"+this.model.get("id")).find(".step-2, .step-3"),{attr:{offset:100-Math.round(o)+"%"}}),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{drawSVG:"0% "+Math.round(o)+"%",rotation:270,svgOrigin:n})}else{var a;if($("#"+this.model.get("id")+" svg .ProgressBar").remove(),"radial-5"===this.model.get("style"))a=s.svg.arc().innerRadius(83).outerRadius(89).startAngle(0).endAngle(2*Math.PI*Math.round(o)/100),s.select("#"+this.model.get("id")+" svg").append("path").attr("d",a).attr("class","ProgressBar").attr("fill",this.model.get("colors")[2]),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{x:100,y:100}),r.set($("#"+this.model.get("id")+" .path").find(".step-2, .step-3"),{attr:{offset:100-Math.round(o)+"%"}});else if("radial-6"===this.model.get("style"))a=s.svg.arc().innerRadius(0).outerRadius(102.1).startAngle(0).endAngle(2*Math.PI*Math.round(o)/100),s.select("#"+this.model.get("id")+" svg").append("path").attr("d",a).attr("class","ProgressBar").attr("fill",this.model.get("colors")[2]),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{x:137.4,y:197.9});else{var l,d;switch(this.model.get("style")){case"radial-1":l=84,d=100;break;case"radial-2":l=90,d=100;break;case"radial-3":l=62,d=100;break;case"radial-4":l=60,d=100}a=s.svg.arc().innerRadius(l).outerRadius(d).startAngle(0).endAngle(2*Math.PI*Math.round(o)/100),s.select("#"+this.model.get("id")+" svg").append("path").attr("d",a).attr("class","ProgressBar").attr("fill",this.model.get("colors")[2]),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{x:100,y:100})}}var h=this.model.get("percentValue")?i-e+"%":"radial-4"===this.model.get("style")?i-e:i,c=this.model.get("percentValue")?t-i+"%":t-i;this.$el.find("."+this.model.get("style")+" .radialValue").text(h),this.$el.find("."+this.model.get("style")+" .radialValueRest").text(c);var g=this.$el.parents("section.stage").attr("id");app.trigger(g+":change",this.model)}},getOffset:function(e){var t=[100-Math.round(this.ratio)+"%",100-Math.round(this.ratio)+"%"];return{offset:t[e]}},setColors:function(){function e(e,t){var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>n?1>n?0:n:255)+(255>r?1>r?0:r:255)).toString(16).slice(1)}if(s){"radial-5"!==this.model.get("style")?(r.set(this.$el.find("."+this.model.get("style")+" .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find("."+this.model.get("style")+" .BackgroundShadow"),{fill:e(this.model.get("colors")[0],-30)}),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),r.set(this.$el.find("."+this.model.get("style")+" .radialValueRest"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find("."+this.model.get("style")+" .divider"),{fill:this.model.get("colors")[1]}),"Download"===app.settings.get("project_type")?r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{fill:this.model.get("colors")[2]}):r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{stroke:this.model.get("colors")[2]})):(r.set(this.$el.find("."+this.model.get("style")+" .Background"),{stroke:this.model.get("colors")[0]}),this.$el.find("."+this.model.get("style")+" .ProgressBarBg").attr("fill","url(#"+this.model.get("id")+"Grad)"),this.$el.find("."+this.model.get("style")+" .path").attr("id",this.model.get("id")+"Grad"),"Download"===app.settings.get("project_type")?r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{fill:this.model.get("colors")[2]}):r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{stroke:this.model.get("colors")[2]}),r.set(this.$el.find("."+this.model.get("style")).find(".step-1, .step-2"),{css:{"stop-color":this.model.get("colors")[1]}}),r.set(this.$el.find("."+this.model.get("style")).find(".step-3, .step-4"),{css:{"stop-color":this.model.get("colors")[2]}}));var t=this.$el.parents("section.stage").attr("id");app.trigger(t+":change",this.model)}},setTextColor:function(){r.set(this.$el.find("."+this.model.get("style")+" .radialValue"),{fill:this.model.get("textColor")}),"radial-6"===this.model.get("style")&&r.set(this.$el.find("."+this.model.get("style")).find(".Line, .Center"),{fill:this.model.get("textColor")})},toggleValue:function(){this.model.get("iSettings1")?this.$el.find("."+this.model.get("style")).find(".radialValue, .radialValueRest, .divider").show():this.$el.find("."+this.model.get("style")).find(".radialValue, .radialValueRest, .divider").hide()}})},{"../../../../helpers/loadScript.js":61,"../../objectView.js":80,underscore:52}],120:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){setTimeout(function(){(this.get("svg.src").match(/(Shapes)/)&&!this.get("stretch")||this.get("svg.src").match(/(Lines)/))&&this.set({proportionLock:!1})}.bind(this),0),this.nonTweenable=this.nonTweenable.concat(["removeText","thumbnail","svgHtml","absolutePos","folder","flipX","flipY","style","categories","key","changing","temp"]),this._super(),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.subMenu.flip=["flipsPopup"],this.propertyMenuItems=this.propertyMenuItems.concat(".btn-flip",".btn-change-icon"),this.activeMenuItem=null,this.get("svg.src").match(/(Shape-1.svg)/)&&(this.subMenu.effect=this.subMenu.effect.concat("borderPopup")),this.get("folder")||this.get("svg.src").match(/(Lines)/)&&this.set("folder","Lines"),"Lines"===this.get("folder")&&(this.subMenu.settings=["linePopup"],this.set("preserveAspectRatio","xMinYMid meet"),this.validators.thickness={type:"number",params:{min:1,max:100}},this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings")),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-color")},defineReadyPromise:function(){var e=$.Deferred(),t=this;this.bind("object:ajax-loaded",e.resolve),e.done(function(){t.trigger("ready")}),this.promise=e.promise()},tempAttributes:["xml","parseTextCallback","svgHtml","changing","temp"],validators:{"svg.src":{type:"string",params:{notblank:!0}},borderWidth:{type:"number",params:{min:0,max:200}},borderRadius:{type:"number",params:{min:0,max:100}}},defaults:{type:"svg",colors:!1,patterns:!1,repeat:!1,borderStyle:"none",borderColor:"#000",borderRadius:0,borderWidth:10,flipY:!1,flipX:!1}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),s.defaults(n.prototype.tempAttributes,o.prototype.tempAttributes),t.exports=n},{"./../../objectModel.js":79,underscore:52}],121:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=window.TweenMax;t.exports=o.extend({initialize:function(){this._super(),this.asyncProperties=this.asyncProperties.concat(["svgHtml"]),s.bindAll(this,"svgLoadedSuccess")},events:function(){return s.extend({},o.prototype.events(),{dblclick:"replaceIcon"})},localCache:{data:{},pendingData:{},remove:function(e){delete this.data[e]},addPending:function(e){this.pendingData[e]=1},pending:function(e){return this.pendingData.hasOwnProperty(e)&&1===this.pendingData[e]},exist:function(e){return this.data.hasOwnProperty(e)&&null!==this.data[e]},get:function(e){return this.data[e]},set:function(e,t,i){this.remove(e),this.data[e]=t}},template:"#svg",replaceIcon:function(e){app.trigger("menu:change-icon-property")},setXml:function(){var e=this.model.get("xml");if(e.find("svg").attr({width:"100%",height:"100%"}),$("#"+this.$el.attr("id")).length&&(this.$el=$("#"+this.$el.attr("id"))),this.$el.find("svg").eq(0).remove(),this.$el.append(e.find("svg").eq(0)),this.model.get("absolutePos")&&(this.$el.find("svg").css("position","absolute"),"Lines"===this.model.get("folder")&&this.$el.find("svg").first().attr("class","vertical-center")),this.model.get("preserveAspectRatio")?"true"!==this.model.get("preserveAspectRatio").toString()&&this.$el.find("svg").get(0).setAttribute("preserveAspectRatio",this.model.get("preserveAspectRatio")):this.$el.find("svg").get(0).setAttribute("preserveAspectRatio","none"),this.$el.find("svg").get(0).setAttribute("overflow","hidden"),this.model.get("colors")||(this.model.set("colors",this.parseColors(this.el)),s.isUndefined(this.model.get("colors")[0])?$(".btn-color").hide():$(".btn-color").show().find("#propertiesIconColorpicker").css("background",this.model.get("colors")[0])),!this.model.get("removeText")&&this.model.get("parseText")&&this.model.get("parseTextCallback")&&(this.parseText(),this.model.set("removeText",!0)),this.model.get("removeText")&&this.removeText(),this.model.set("pattern",this.parsePatterns(this.model.get("svgHtml"))),!this.model.get("width")||this.model.get("width")<4)if(this.model.set({width:this.model.get("svg.width"),height:this.model.get("svg.height")}),"Lines"===this.model.get("folder")){var t={width:800,thickness:20};this.$el.find("svg:eq(0)").attr("data-defaults")&&(t=JSON.parse(this.$el.find("svg:eq(0)").attr("data-defaults"))),this.model.set({width:t.width,thickness:t.thickness,height:1.6*t.thickness})}else this.model.set({width:this.model.get("svg.width"),height:this.model.get("svg.height")});"Lines"===this.model.get("folder")&&(this.model.get("thickness")||this.model.set("thickness",this.model.get("height"))),this.$el.find("svg.vertical-center").length&&(n.set(this.$el,{css:{"box-sizing":"border-box"}}),n.set(this.$el.find("svg.vertical-center"),{yPercent:-50}))},update:function(e,t){s.has(this.model.changed,"changing")&&this.model.get("changing")&&(this.localCache.data={},this.localCache.pendingData={},this.getSvgXml()),
s.has(this.model.changed,"xml")&&this.model.get("xml")&&(this.setXml(),s.has(this.model.changed,"colors")||(this.model.changed.colors=JSON.parse(JSON.stringify(this.model.get("colors"))),s.isUndefined(this.model.get("colors")[0])?$(".btn-color").hide():$(".btn-color").show().find("#propertiesIconColorpicker").css("background",this.model.get("colors")[0])),delete this.model.changed.xml,this.model.changed.colors=this.model.attributes.colors,this.model.changed.flipX=this.model.attributes.flipX,this.model.changed.flipY=this.model.attributes.flipY,this.model.changed.colors=this.model.attributes.colors,this.model.get("thickness")&&(this.model.changed.thickness=this.model.attributes.thickness)),this.model.get("thickness")>this.model.get("height")&&this.model.set("height",this.model.get("thickness")),this.$el.find("svg").length||(s.has(this.model.changed,"pattern")&&delete this.model.changed.pattern,s.has(this.model.changed,"svg")&&delete this.model.changed.svg,this._super(e,t)),(this.model.changed.flipX||this.model.changed.flipY)&&(app.settings.isSafari()?(n.set(this.$el.find("svg").eq(0),{scaleY:this.model.get("flipY")?-1:1,delay:0,force3d:!1}),n.set(this.$el.find("svg").eq(0),{scaleX:this.model.get("flipX")?-1:1,delay:0,force3d:!1})):(n.set(this.$el.find("svg").eq(0),{rotationY:this.model.get("flipX")?180:0,delay:0}),n.set(this.$el.find("svg").eq(0),{rotationX:this.model.get("flipY")?180:0,delay:0})),delete this.model.changed.flipX,delete this.model.changed.flipY),this.model.get("pattern")!==!1&&s.has(this.model.changed,"thickness")&&(this.$el.find("svg").eq(0).attr("height",this.model.changed.thickness),this.renderPattern()),this.model.get("pattern")!==!1&&s.has(this.model.changed,"width")&&("StretchShapes"===this.model.get("folder")||"Banners"===this.model.get("folder")?this.model.get("stretch")&&!s.has(this.model.changed,"height")?this.renderPattern():this.$el.find("svg").eq(0).attr("width",this.model.changed.width):this.renderPattern()),s.has(this.model.changed,"pattern")&&delete this.model.changed.pattern,s.has(this.model.changed,"svg")&&delete this.model.changed.svg,s.has(this.model.changed,"colors")&&(!s.isNull(this.model.changed.colors)&&this.model.changed.colors.length&&s.each(this.model.changed.colors,function(e,t){var i=this.$el.find('[id^="Color'+(t+1)+'"]'),s=this.$el.find('[id^="Strokecolor'+(t+1)+'"]');0===i.length&&0===s.length?this.$el.find("g").css("fill",e):(i.css("fill",e),s.css("stroke",e))},this),delete this.model.changed.colors),this._super(e,t)},getSvgXml:function(){var e=this.model.get("svg.src"),t=app.settings.get("assetsStorage"),i=e.indexOf(t)>-1?e:t+e;if(this.model.get("svgHtml")){var s=this.model.get("svgHtml");this.$el.find("img").hide();var o=$('<div class="fake-doc">').append($("<div>"+s+"</div>").find("svg").eq(0));o=$("<a>").append(o);var n=o.html();this.model.set("xml",$(n)),this.model.get("pattern")&&(this.renderPattern(),this.updateThickness()),this.model.trigger("object:ajax-loaded"),app.trigger("object:ajax-loaded")}else $.ajax({url:i,dataType:"text",context:this,cache:!1,beforeSend:function(){return this.localCache.exist(i)?(this.svgLoadedSuccess("<div>"+this.localCache.get(i).responseText+"</div>"),!1):this.localCache.pending(i)?(app.once("svg:loaded"+i.replace(/ /g,"-"),this.svgLoadedSuccess,this),!1):(this.localCache.addPending(i),!0)}.bind(this),complete:function(e,t){this.localCache.set(i,e,this.svgLoadedSuccess),app.trigger("svg:loaded"+i.replace(/ /g,"-"),"<div>"+this.localCache.get(i).responseText+"</div>")}.bind(this),success:this.svgLoadedSuccess,error:function(e){app.trigger("error",e),app.trigger("alertView:show",{content:"There was a network error while loading this icon, please refresh your browser and try again."})}})},svgLoadedSuccess:function(e){var t=this;this.$el.find("img").hide(),e=e.replace(/SVGID_/g,"SVGID_"+this.model.get("id")),e=$.parseXML(e.replace("<div>","").replace("</div>",""));var i=$('<div class="fake-doc">').append($(e).find("svg").eq(0));i=$("<a>").append(i);var o=i.html(),n=this.parseSize(o,"width"),r=this.parseSize(o,"height");if(this.model.get("changing")){s.isUndefined(this.model.get("temp"))&&this.model.set("temp",{width:this.model.get("width"),height:this.model.get("height"),colors:this.parseColors(this.el)});var a=[];s.each(this.parseColors($(o)[0]),function(e,i){a[i]=t.model.get("temp.colors")[i]&&""!==t.model.get("temp.colors")[i]?t.model.get("temp.colors")[i]:e}),this.model.set("colors",a);var l=n/r,d=this.model.get("temp.width")/this.model.get("temp.height");l>=d?this.model.set("height",this.model.get("temp.width")/l):this.model.set("width",this.model.get("temp.height")*l),this.model.unset("changing")}this.model.set({xml:$(o),svg:{width:n,height:r,src:this.model.get("svg.src")},svgHtml:o}),"Lines"===this.model.get("folder")&&this.model.set("svg.height",100),-1===this.model.get("svg.src").indexOf("AppliancesOutline")||"editor"===app.settings.get("editMode")||this.model.get("link")||$("#"+this.model.get("id")).css("pointer-events","none"),this.updateThickness(),this.model.get("pattern")&&(this.renderPattern(),this.updateThickness()),this.model.trigger("object:ajax-loaded"),app.trigger("object:ajax-loaded");var h=this.$el.parents("section.stage").attr("id");app.trigger(h+":change",this.model)},updateThickness:function(){this.model.get("thickness")&&this.$el.find("svg").eq(0).attr("height",this.model.get("thickness"))},render:function(){this._super(),s.isUndefined(this.model.get("xml"))?this.getSvgXml():(this.model.set("xml",$(this.model.get("svgHtml"))),this.setXml()),s.isUndefined(this.model.get("categories"))&&this.getCategories(),this.model.get("svg.src").match(/(Shape-1.svg)/)&&n.set(this.$el,{css:{"box-sizing":"border-box"}})},getCategories:function(){var e=this,t=this.model.get("svg.src").split("/")[this.model.get("svg.src").split("/").length-1].replace(".svg",""),i=this.model.get("folder")||this.model.get("svg.src").split("/")[this.model.get("svg.src").split("/").length-2];return t&&i?void $.ajax({url:"/actions/getSvg/"+i+"/"+t,success:function(t){var i;if("string"==typeof t){if(0!==t.indexOf("{"))return;i=JSON.parse(t).categories}else i=t.categories;i=JSON.parse(i.replace(new RegExp("\\]\\[","g"),",")),i&&e.model.set({categories:i},{silent:!0})},error:function(e,t){}}):!1},removeText:function(e){for(var t=this.$el.find("text"),i=t.length,s=0;i>s;s++)t.eq(s).remove()},parseText:function(e){var t=this.$el.find("text"),i=t.length,o=[];t.find("tspan").length>0&&(t=t.find("tspan"),i=t.length),this.$el.find("svg").css("position","absolute");for(var n=0;i>n;n++){var r=t.eq(n).position().top+this.model.get("y"),a=t.eq(n).position().left+this.model.get("x");isNaN(Number(t.eq(n).attr("x")))||(a+=Number(t.eq(n).attr("x")));var l=t.eq(n).css("fill"),d=t.eq(n).css("font-family"),h=t.eq(n).css("font-size").replace("px","");s.each(app.settings.get("fonts"),function(e){-1!==d.toLowerCase().indexOf(e.toLowerCase())&&(d=e)});var c="",g="",p="";-1!==d.toLowerCase().indexOf("italic")&&(c="font-style:italic;",p+=" visme-i "),-1!==d.toLowerCase().indexOf("bold")&&(g="font-weight:bold;",p+=" visme-b "),-1!==d.toLowerCase().indexOf("light")&&-1!==d.toLowerCase().indexOf("lato")&&(g="font-weight:300;",p=p.replace("visme-b","")),o.push({type:"text",name:t.eq(n).text(),x:a,y:r,text:'<span class="color-'+l+p+"\" style='color:"+l+";"+g+c+";'>"+t.eq(n).text()+"</span></div>",padding:{vertical:0,horizontal:0},lineHeight:1,font:{name:d,size:h,usedFonts:[d]},width:t.eq(n).width()+1,height:t.eq(n).height()}),t.eq(n).remove()}this.model.get("parseTextCallback.callback").call(this.model.get("parseTextCallback.scope"),o,this.model.get("parseTextCallback.done"))},parseColors:function(e){var t;if($(e).find('[id^="Color"]').length>0||$(e).find('[id^="Strokecolor"]').length>0){var i=[];for(t=0;3>=t;t++)$(e).find('[id^="Color'+(t+1)+'"]').length&&(i[t]=$(e).find('[id^="Color'+(t+1)+'"]').css("fill")||$(e).find('[id^="Color'+(t+1)+'"]').attr("fill")),$(e).find('[id^="Strokecolor'+(t+1)+'"]').length&&(i[t]=$(e).find('[id^="Strokecolor'+(t+1)+'"]').css("stroke")||$(e).find('[id^="Strokecolor'+(t+1)+'"]').attr("stroke"));return i}return!1},parsePatterns:function(e){var t=!1;return $(e).find('[id^="repeat"]').length>0&&(t=$(e).find('[id^="repeat"]').attr("width")?parseInt($(e).find('[id^="repeat"]').attr("width").replace("px","")):$(e).find('[id^="repeat"]').children().eq(0).attr("width")?parseInt($(e).find('[id^="repeat"]').children().eq(0).attr("width").replace("px","")):$(e).find("svg").attr("width")?parseInt($(e).find("svg").attr("width").replace("px","")):$(e).find('[id^="repeat"]').children().eq(0).attr("cx")?parseInt($(e).find('[id^="repeat"]').children().eq(0).attr("cx").replace("px","")):100),t},parseSize:function(e,t){return parseInt($(e).find("svg").attr(t).replace("px",""))},renderPattern:function(){var e=this.model.get("thickness")/this.model.get("svg.height");"Lines"!==this.model.get("folder")&&(e=1);var t=(this.model.get("stretch")?this.model.get("width")*this.model.get("svg.height")/this.model.get("height"):this.model.get("width"))-this.model.get("svg.width")*e,i=this.model.get("pattern");if(this.model.get("stretch")&&$.isNumeric(this.$el.find('[id^="repeat"]').first().attr("x"))){var s=1.1*(this.model.get("width")*this.model.get("svg.height")/this.model.get("height")-this.model.get("svg.width")+i)/i,o=-Math.ceil(Number(this.$el.find('[id^="repeat"]').first().attr("x"))*(s-1)+1);this.$el.find('[id^="repeat"]').attr("transform","translate("+o+", 0) scale("+s+",1 )")}else{var n=Math.ceil(t/(i*e)),r=this.$el.find('[id^="repeat"]').clone();r.attr("id","rclone");var a=this.$el.find('[id^="rclone"]').length,l=Number(this.$el.find('[id^="repeat"]').first().attr("x"));if(isNaN(l)&&(l=Number(this.$el.find('[id^="repeat"]').first().attr("cx"))),isNaN(l)&&(l=Number(this.$el.find('[id^="repeat"]').first().attr("width"))),isNaN(l)&&(l=i),a>n&&this.$el.find("svg").eq(0).find('[id^="rclone"]').eq(n).nextAll('[id^="rclone"]').remove(),n)for(var d=a;n>=d;d++){var h=r.clone();h.attr("id","rclone_"+d),h.attr("transform","translate("+(l+d*i)+")"),this.$el.find("svg").find('[id="rzone"]').length>0?this.$el.find("svg").find('[id="rzone"]').append(h):this.$el.find("svg").find('[id^="rclone"]').length>0?this.$el.find("svg").find('[id^="rclone"]').last().after(h):this.$el.find("svg").find('[id^="repeat"]').last().after(h)}}if(this.$el.find("#alignright").length>0){var c=this.$el.find("#alignright").attr("width");this.model.get("stretch")?this.$el.find("#alignright").attr("transform","translate("+Math.floor(this.model.get("width")*this.model.get("svg.height")/this.model.get("height")/e-this.model.get("svg.width"))+")"):this.$el.find("#alignright").attr("transform","translate("+Math.floor(this.model.get("width")/e-this.model.get("svg.width"))+")"),this.$el.find("#rzone").length>0&&(this.model.get("stretch")?this.$el.find("#rzone").attr("width",Math.ceil(this.model.get("width")*this.model.get("svg.height")/this.model.get("height")/e-c)):this.$el.find("#rzone").attr("width",Math.ceil(this.model.get("width")/e-c)))}this.$el.find("svg").eq(0).attr("width",this.model.get("width")),this.model.get("svg.height")&&this.model.get("pattern")>0&&this.$el.find("svg").get(0)&&(this.model.get("stretch")?this.$el.find("svg").get(0).setAttribute("viewBox","0 0 "+this.model.get("width")*this.model.get("svg.height")/this.model.get("height")+" "+this.model.get("svg.height")):this.$el.find("svg").get(0).setAttribute("viewBox","0 0 "+this.model.get("width")+" "+this.model.get("svg.height")))}})},{"../../objectView.js":80,underscore:52}],122:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["font","lineHeight","letterSpacing","text","padding","paddingHorizontal","paddingVertical","tableObject","fixedWidth","theme","newversion"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings-ic","tableEditor"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.settings=["colorPopup","spacingPopup","transformPopup"],this.activeMenuItem=null},tempAttributes:["forceStartEditorOnce"],validators:{text:{type:"string",params:{notblank:!0}},lineHeight:{type:"number",params:{min:0,max:3}},letterSpacing:{type:"number",params:{min:-10,max:80}},"padding.horizontal":{type:"number",params:{min:0,max:100}},"padding.vertical":{type:"number",params:{min:0,max:100}},borderWidth:{type:"number",params:{min:0,max:100}},borderRadius:{type:"number",params:{min:0,max:45}}},defaults:{type:"table",font:{name:"Arial",usedFonts:[]},theme:"theme1",padding:{vertical:10,horizontal:10},align:"left",lineHeight:1.2,letterSpacing:0,fixedWidth:!1,proportionLock:!1,borderStyle:"none",borderRadius:0,borderWidth:1,borderColor:"#000",backgroundColor:"transparent",tableObject:!0,text:"<table></table>",rows:0,cols:0,newversion:!1}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),s.defaults(n.prototype.tempAttributes,o.prototype.tempAttributes),t.exports=n},{"./../../objectModel.js":79,underscore:52}],123:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=e("../../../../helpers/fontLoader.js"),r=window.TweenMax,a=o.extend({template:"#table",groupHold:!1,textRenderingBuff:1,initialize:function(){s.bindAll(this,"setGroupHold","startEditor","stopEditor","initCellsWidth","initCellsHeight","resize"),this.backendRenderedProperties=this.backendRenderedProperties.concat("lineHeight","font.size","align","border","padding"),app.on("groupHold",this.setGroupHold),app.on("object:onclick",this.startEditor),app.bind("object:deselect-object object:new-selected",this.stopEditor),app.on("table:rewidth",this.initCellsWidth),this._super(),this.listenTo(this.model,"resize-end",this.resize),this.model.get("forceStartEditorOnce")&&(setTimeout(function(){this.startEditor(this.model)}.bind(this),500),this.model.set({forceStartEditorOnce:!1},{silent:!0}))},resize:function(){this.$textObject.find("table")&&(this.$textObject.find("table").width()>this.model.get("width")&&this.$textObject.find("tr td").css("width",""),this.$textObject.find("table").css({width:this.model.get("width")-2*this.model.get("padding.horizontal")-2,height:this.model.get("height")-2*this.model.get("padding.vertical")-2}),this.$textObject.find("table").attr("data-visme-style",this.$textObject.find("table").attr("style"))),this.model.set("text",this.$textObject.html(),{silent:!0})},initCellsWidth:function(e,t){this.initCellsHeight(e,t);var i,s,o=this.$vmTable||e,n=o.find("tr").first().find("td"),a=[],l=[];for(s=0;s<n.length;s++)i=n.eq(s).attr("style")||"",-1!==i.indexOf("width")&&-1===i.indexOf("width: auto")?a.push(n.eq(s)):l.push(n.eq(s));var d,h=0;for(s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("width")+7).split("%")[0]),h+=d;var c,g=100/parseFloat(n.length),p=0;if(t)for(s=0;s<n.length;s++)r.set(n.eq(s),{css:{width:g+"%"}});else if(!(h>99&&0===l.length))if(h>99){for(s=0;s<l.length;s++)r.set(l[s],{css:{width:g+"%"}}),p+=g;for(c=parseFloat(p)/a.length,s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("width")+7).split("%")[0]),d-c>1&&r.set(a[s],{css:{width:d-c+"%"}})}else for(c=parseFloat(100-h)/a.length,s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("width")+7).split("%")[0]),r.set(a[s],{css:{width:d+c+"%"}})},initCellsHeight:function(e,t){var i,s,o=this.$vmTable||e,n=o.find("tr"),a=[],l=[];for(s=0;s<n.length;s++)i=n.eq(s).attr("style")||"",-1!==i.indexOf("height")&&-1===i.indexOf("height: auto")?a.push(n.eq(s)):l.push(n.eq(s));var d,h=0;for(s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("height")+7).split("%")[0]),h+=d;var c,g=100/parseFloat(n.length),p=0;if(t)for(s=0;s<n.length;s++)r.set(n.eq(s),{css:{height:g+"%"}});else if(!(h>99&&0===l.length))if(h>99){for(s=0;s<l.length;s++)r.set(l[s],{css:{height:g+"%"}}),p+=g;for(c=parseFloat(p)/a.length,s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("height")+7).split("%")[0]),d-c>1&&r.set(a[s],{css:{height:d-c+"%"}})}else for(c=parseFloat(100-h)/a.length,s=0;s<a.length;s++)d=a[s].attr("style"),d=parseFloat(d.slice(d.indexOf("height")+7).split("%")[0]),r.set(a[s],{css:{height:d+c+"%"}})},setGroupHold:function(e){this.groupHold=e},startEditor:function(e){this.groupHold||this.model!==e||"table"!==e.get("type")||(app.trigger("textEditorPopup:show",this.model),this.$el.find(".vm-table").css("z-index",1))},stopEditor:function(e){this.groupHold||this.model===e?this.model===e&&"table"===e.get("type")&&this.$el.find(".vm-table").css("z-index",-1):this.$el.find(".vm-table").css("z-index",-1)},update:function(e,t){var i=s.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");if(s.has(this.model.changed,"theme")&&(this.$el.find("table").attr("data-theme",this.model.changed.theme),delete this.model.changed.theme),s.has(this.model.changed,"fixedWidth")&&delete this.model.changed.fixedWidth,s.has(this.model.changed,"tableObject")&&delete this.model.changed.tableObject,s.has(this.model.changed,"borderRadius")&&(r.set(this.$el,{borderRadius:this.model.changed.borderRadius+"px"}),delete this.model.changed.borderRadius),s.has(this.model.changed,"lineHeight")&&(r.set(this.$vmTable,{lineHeight:this.model.changed.lineHeight}),delete this.model.changed.lineHeight),s.has(this.model.changed,"letterSpacing")&&(r.set(this.$el.find(".vm-text"),{letterSpacing:this.model.get("letterSpacing")/10+"pt"}),delete this.model.changed.letterSpacing),s.has(this.model.changed,"padding")){var o=this.model.get("padding");r.set(this.$vmTable,{css:{"padding-bottom":o.vertical,"padding-top":o.vertical,"padding-left":o.horizontal,"padding-right":o.horizontal}}),r.set(this.$vmTable,{width:this.model.get("width")-2*this.model.get("padding.horizontal")-2*i,height:this.model.get("height")-2*this.model.get("padding.vertical")-2*i}),delete this.model.changed.padding}s.has(this.model.changed,"text")&&(this.$el.find(".vm-table").html(this.model.changed.text),delete this.model.changed.text,this.initCellsWidth()),s.has(this.model.changed,"font.usedFonts")&&delete this.model.changed["font.usedFonts"],s.has(this.model.changed,"font")&&(n.add(this.model.get("font.name")),s.each(this.model.get("font.usedFonts"),function(e){n.add(e)},this),r.set(this.$vmTable,{css:{fontSize:this.model.get("font.size")}}),delete this.model.changed["font.size"],delete this.model.changed["font.name"],delete this.model.changed["font.usedFonts"]),s.has(this.model.changed,"align")&&(this.$el.find(".vm-table").css("text-align",this.model.changed.align),delete this.model.changed.align),(s.has(this.model.changed,"borderStyle")||s.has(this.model.changed,"borderWidth"))&&r.set(this.$vmTable,{width:this.model.get("width")-2*this.model.get("padding.horizontal")-2*i}),this._super(e,t)},render:function(){this._super(),r.set(this.$el,{css:{"box-sizing":"border-box"}}),r.set(this.$el.find(".drag-helper"),{width:this.model.get("width")+this.extraDragSpace,height:this.model.get("height")+this.extraDragSpace,x:-this.extraDragSpace/2,y:-this.extraDragSpace/2}),r.set(this.$el.find(".drag-helper div"),{width:this.model.get("width"),height:this.model.get("height"),x:this.extraDragSpace/2,y:this.extraDragSpace/2}),this.$vmTable=this.$el.find(".vm-table"),this.$textObject=this.$el.find(".vm-text")}});s.defaults(a.prototype.events,o.prototype.events),t.exports=a},{"../../../../helpers/fontLoader.js":57,"../../objectView.js":80,underscore:52}],124:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["font","lineHeight","letterSpacing","text","padding","paddingHorizontal","paddingVertical","initList","textEffect","fontSize","placeholder","fontIndexes"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings-ic","textEditor"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.list=["listPopup"],this.subMenu.settings=["colorPopup","spacingPopup","transformPopup","borderPopup"],this.activeMenuItem=null},tempAttributes:["forceStartEditorOnce"],validators:{text:{type:"string",params:{notblank:!0}},lineHeight:{type:"number",params:{min:0,max:4}},letterSpacing:{type:"number",params:{min:-10,max:80}},"padding.horizontal":{type:"number",params:{min:0,max:100}},"padding.vertical":{type:"number",params:{min:0,max:100}},borderWidth:{type:"number",params:{min:0,max:100}},borderRadius:{type:"number",params:{min:0,max:45}}},defaults:{type:"text",font:{name:"Arial",usedFonts:[]},placeholder:!0,padding:{vertical:10,horizontal:10},borderStyle:"none",borderColor:"#000",align:"left",lineHeight:1.2,letterSpacing:0,fixedWidth:!1,proportionLock:!1,borderRadius:0,borderWidth:1,backgroundColor:"transparent"}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),s.defaults(n.prototype.tempAttributes,o.prototype.tempAttributes),t.exports=n},{"./../../objectModel.js":79,underscore:52}],125:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=e("../../../../helpers/fontLoader.js"),r=window.TweenMax,a=o.extend({template:"#text",groupHold:!1,initialize:function(){s.bindAll(this,"fitToTextSize","fitToTextSizeVertical","setGroupHold","startEditor","stopEditor","initList","proportionTextInGroup"),this.backendRenderedProperties=this.backendRenderedProperties.concat("padding","lineHeight","font.size","align","border","letterSpacing"),this.model.bind("change:lineHeight change:letterSpacing change:borderWidth change:borderStyle change:fixedWidth change:padding",this.fitToTextSizeVertical),this.model.bind("change:padding resize-end change:font.size change:font.name change:font.usedFonts",this.fitToTextSize),this.model.get("fixedWidth")||app.on("object:resize",function(){this.model.set("fixedWidth",!0)}.bind(this)),app.on("groupHold",this.setGroupHold),app.on("object:onclick",this.startEditor),app.bind("object:deselect-object object:new-selected",this.stopEditor),this.model.bind("group:text:proportion",this.proportionTextInGroup),this._super(),this.model.get("forceStartEditorOnce")&&(setTimeout(function(){this.startEditor(this.model)}.bind(this),500),this.model.set({forceStartEditorOnce:!1},{silent:!0})),app.settings.get("brandingFonts")&&s.each(JSON.parse(app.settings.get("brandingFonts")),function(e){n.addBrand(e)})},proportionTextInGroup:function(e){for(var t=this.model.get("text"),i=t.match(/font-size:((\s?)\d+(\.\d+)?)px/),s="";i;){var o=i[0],n=i[1],r=t.indexOf(i[0]);s+=t.substr(0,r),s+=o.replace(n,parseFloat(n*e).toFixed(2)),t=t.substr(r+i[0].length),i=t.match(/font-size:((\s?)\d+(\.\d+)?)px/)}s+=t,this.model.set("text",s);var a=this.model.get("padding.horizontal"),l=this.model.get("padding.vertical"),d=this.model.get("font.size");this.model.set("font.size",(d*e).toFixed(1)),this.model.set("padding",{horizontal:parseFloat((a*e).toFixed(1)),vertical:parseFloat((l*e).toFixed(1))})},INIT_BS:7,INIT_BI:0,INIT_TI:10,INIT_BA:5,initList:function(){var e={bulletSize:this.INIT_BS,bulletIndent:this.INIT_BI,TextIndent:this.INIT_TI,bulletAlign:21,newDrop:!0},t=app.settings.get("assetsStorage")+"bullets/Bullet-17.svg";app.trigger("texteditor:list:style",t,e)},isFForIE:function(){return-1!==navigator.platform.indexOf("Win")},setGroupHold:function(e){this.groupHold=e},startEditor:function(e){this.groupHold||this.model!==e||"text"!==e.get("type")||(this.initText(),app.trigger("textEditorPopup:show",this.model),this.$el.find(".vm-text").css("z-index",1),this.model.get("initList")&&(this.model.set({initList:!1},{silent:!0}),this.initList()))},stopEditor:function(e){this.groupHold||this.model===e?this.model===e&&"text"===e.get("type")&&this.$el.find(".vm-text").css("z-index",-1):this.$el.find(".vm-text").css("z-index",-1)},initText:function(){if(!this.model.get("fixedWidth")){var e=this,t=this.$el.find(".vm-text");t.one("paste",function(){e.model.set("fixedWidth",!0)}),t.css({width:"auto"})}},update:function(e,t){var i=s.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");if(s.has(this.model.changed,"borderStyle")&&(this.model.changed.borderWidth=this.model.attributes.borderWidth),s.has(this.model.changed,"borderRadius")&&(r.set(this.$el,{borderRadius:this.model.changed.borderRadius+"px"}),delete this.model.changed.borderRadius),s.has(this.model.changed,"lineHeight")&&(r.set(this.$vmText,{lineHeight:this.model.changed.lineHeight}),delete this.model.changed.lineHeight),s.has(this.model.changed,"letterSpacing")&&(r.set(this.$vmText,{letterSpacing:this.model.get("letterSpacing")/10+"pt"}),this.$vmText.find("*").css("letter-spacing",""),this.$vmText.find("li").length>0&&r.set(this.$vmText.find("li").children().eq(0),{letterSpacing:this.model.get("letterSpacing")/10+"pt"}),delete this.model.changed.letterSpacing),s.has(this.model.changed,"padding")){var o=this.model.get("padding");r.set(this.$vmText,{css:{"padding-bottom":o.vertical,"padding-top":o.vertical,"padding-left":o.horizontal,"padding-right":o.horizontal}}),delete this.model.changed.padding}s.has(this.model.changed,"fixedWidth")&&delete this.model.changed.fixedWidth,s.has(this.model.changed,"text")&&(""===$("<div>"+this.model.changed.text+"</div>").text()&&app.trigger("objectCollection:remove:view-model",[this.model]),this.$el.parents(".layout").length&&(this.model.changed.text=this.model.changed.text.replace("[P]",app.collections.slides.findWhere({id:this.$el.parents(".stage").attr("id")}).get("order")+1).replace("[Ps]",app.collections.slides.filter(function(e){return"Layout"!==e.get("type")}).length)),this.$el.find(".vm-text").html(this.model.changed.text),delete this.model.changed.text),s.has(this.model.changed,"font.usedFonts")&&delete this.model.changed["font.usedFonts"],s.has(this.model.changed,"font")&&(n.add(this.model.get("font.name")),s.each(this.model.get("font.usedFonts"),function(e){n.add(e)},this),this.model.get("font.size")&&this.$vmText&&r.set(this.$vmText,{css:{fontSize:this.model.get("font.size")}}),delete this.model.changed["font.size"],delete this.model.changed["font.name"],delete this.model.changed["font.usedFonts"]),s.has(this.model.changed,"align")&&(this.$el.find(".vm-text").css("text-align",this.model.changed.align),delete this.model.changed.align),s.has(this.model.changed,"width")&&"editor"!==app.settings.get("editMode")&&this.model.get("fixedWidth")&&(this.model.attributes.width=this.model.changed.width+this.textRenderingBuff),(s.has(this.model.changed,"borderStyle")||s.has(this.model.changed,"borderWidth"))&&r.set(this.$vmText,{width:this.model.get("width")-2*this.model.get("padding.horizontal")-2*i}),this._super(e,t)},textRenderingBuff:1,fitToTextSizeVertical:function(){var e=this,t=this.$el.find(".vm-text"),i=this.model.get("padding.vertical"),o=s.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");setTimeout(function(){var s=t.height()+2*(i+o);s>e.model.get("height")&&e.model.set("height",s)}.bind(this),500)},fitToTextSize:function(){var e=this,t=this.model.get("padding.horizontal"),i=this.model.get("padding.vertical"),o=s.isUndefined(this.model.get("borderStyle"))||"none"===this.model.get("borderStyle").toLowerCase()?0:this.model.get("borderWidth");setTimeout(function(){var s=e.$el.find(".vm-text"),n=s.height()+2*(i+o),r=s.width()+2*(t+o);e.model.set("width",r),n>e.model.get("height")&&e.model.set("height",n)}.bind(this),0)},render:function(){if(app.settings.get("brandingFonts")){var e=this;s.each(JSON.parse(app.settings.get("brandingFonts")),function(t){e.model.get("font.name")===t.fontPostscriptName&&e.model.set("font.name",t.fontName)})}this._super(),r.set(this.$el,{css:{"box-sizing":"border-box"}}),this.$vmText=this.$el.find(".vm-text"),0===this.model.get("height")&&this.fitToTextSizeVertical(),1!==this.model.get("codesample")||app.settings.get("Html5Download")||"editor"===app.settings.get("editMode")?1===this.model.get("codesample")&&setTimeout(Prism.highlightAll,1e3):$("#prismcss").length?s.isUndefined(window.Prism)||Prism.highlightAll():($("head").append($('<link rel="stylesheet" type="text/css" id="prismcss" />').attr("href","/js/tinymce/js/tinymce/plugins/codesample/css/prism.css")),$.getScript("/js/prism.js",function(){Prism.highlightAll()}))}});s.defaults(a.prototype.events,o.prototype.events),t.exports=a},{"../../../../helpers/fontLoader.js":57,"../../objectView.js":80,underscore:52}],126:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["value","percentValue","rangeValue","style"]),this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu),this.subMenu.effect=["opacityPopup"],this.activeMenuItem=null},validators:{render:{type:"string",params:{notblank:!0}}},defaults:{type:"thermometer",height:400,width:127.79,value:20,rangeValue:[0,100],percentValue:!0,textColor:"#414042",colors:["#414042","#1DAFBA","#FFFFFF"]}}));s.defaults(n.prototype.defaults,o.prototype.defaults),s.defaults(n.prototype.validators,o.prototype.validators),t.exports=n},{"./../../objectModel.js":79,underscore:52}],127:[function(e,t,i){var s,o=e("underscore"),n=e("../../objectView.js"),r=window.TweenMax,a=e("../../../../helpers/loadScript.js");t.exports=n.extend({template:"#thermometer",settings:{widgets:["valueRangePopup","colorPopup","textcolorPopup"]},options:{colorslabel:["Frame","Range","Progress Bar"]},initialize:function(){this.model.subMenu.settings=o.extend({},this.settings.widgets),this.model.subMenu.options=o.extend({},this.options),o.bindAll(this,"refreshIt","setStyle","setValue","setColors","setTextColor","d3loaded"),this.backendRenderedProperties=this.backendRenderedProperties.concat("style","textColor","colors"),app.on("loadscript:d3",this.d3loaded),this._super()},update:function(e,t){a("d3")&&this.d3loaded(),(o.has(this.model.changed,"value")||o.has(this.model.changed,"rangeValue")||o.has(this.model.changed,"percentValue"))&&this.setValue(),o.has(this.model.changed,"colors")&&this.setColors(),o.has(this.model.changed,"textColor")&&this.setTextColor(),this._super(e,t)},refreshIt:function(){this.setStyle(),this.setValue(),this.setColors(),this.setTextColor()},setStyle:function(){this.style=this.model.get("style"),this.$el.find(".svg-wrapper").attr("class","svg-wrapper svg-wrapper-thermometer svg-wrapper-"+this.model.get("style"))},d3loaded:function(){s=window.d3,this.setValue()},setValue:function(){if(s){var e=this.model.get("rangeValue")[0],t=this.model.get("rangeValue")[1],i=this.model.get("value");i>t?(this.model.set("value",t),i=t):e>i&&(this.model.set("value",e),i=e);var o=(i-e)/(t-e)*100;if("Download"===app.settings.get("project_type")||"editor"===app.settings.get("editMode"))if("Download"!==app.settings.get("project_type"))switch(this.model.get("style")){case"thermometer-1":r.set(this.$el.find(".thermometer-1 .ProgressBar"),{drawSVG:Math.round(o)+"%"});break;case"thermometer-2":r.set(this.$el.find(".thermometer-2 .ProgressBar"),{drawSVG:100-Math.round(o)+"%"}),r.set(this.$el.find(".thermometer-2 .arrow"),{y:167-2.45*Math.round(o)+"px"}),r.set(this.$el.find(".thermometer-2 .thermometerValue"),{y:167-2.45*Math.round(o)+"px"});break;case"thermometer-3":r.set(this.$el.find(".thermometer-3 .ProgressBar"),{drawSVG:"50% "+(o/2+50)+"%"}),r.set(this.$el.find(".thermometer-3 .ProgressBarBg"),{drawSVG:o/2+50+"% 100%"})}else{var n;switch(this.model.get("style")){case"thermometer-1":s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("y2",325-277*Math.round(o)/100);break;case"thermometer-2":s.select("#"+this.model.get("id")+" svg .ProgressBar").attr("y2",248*(1-Math.round(o)/100)+17),r.set(this.$el.find(".thermometer-2 .arrow"),{y:167-2.45*Math.round(o)+"px"}),
r.set(this.$el.find(".thermometer-2 .thermometerValue"),{y:167-2.45*Math.round(o)+"px"});break;case"thermometer-3":$("#"+this.model.get("id")+" svg .ProgressBarBg").remove(),$("#"+this.model.get("id")+" svg .ProgressBar").remove(),n=s.svg.arc().innerRadius(60).outerRadius(150).startAngle(3*Math.PI/2).endAngle(5*Math.PI/2),s.select("#"+this.model.get("id")+" svg").append("path").attr("d",n).attr("class","ProgressBarBg").attr("fill",this.model.get("colors")[1]),n=s.svg.arc().innerRadius(60).outerRadius(150).startAngle(3*Math.PI/2).endAngle(Math.PI*(Math.round(o)/100+1.5)),s.select("#"+this.model.get("id")+" svg").append("path").attr("d",n).attr("class","ProgressBar").attr("fill",this.model.get("colors")[2]),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBar"),{x:150,y:150}),r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarBg"),{x:150,y:150})}}var a=this.model.get("percentValue")?this.model.get("value")+"%":this.model.get("value");this.$el.find("."+this.model.get("style")+" .thermometerValue").text(a),this.$el.find("."+this.model.get("style")+" .MeasurementMin").text(this.model.get("rangeValue")[0]),this.$el.find("."+this.model.get("style")+" .MeasurementMax").text(this.model.get("rangeValue")[1]),this.$el.find("."+this.model.get("style")+" .thermometerValue").text(this.model.get("percentValue")?Math.round(o)+"%":this.model.get("value"));var l=this.$el.parents("section.stage").attr("id");app.trigger(l+":change",this.model)}},setColors:function(){switch(this.model.get("style")){case"thermometer-1":r.set(this.$el.find(".thermometer-1 .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".thermometer-1 .ProgressBarBg"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find(".thermometer-1 .ProgressBar"),{stroke:this.model.get("colors")[2]});break;case"thermometer-2":r.set(this.$el.find(".thermometer-2 .arrow"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".thermometer-2 .Background"),{fill:this.model.get("colors")[0]}),r.set(this.$el.find(".thermometer-2 .ProgressBarBg"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find(".thermometer-2 .ProgressBar"),{stroke:this.model.get("colors")[1]});break;case"thermometer-3":r.set(this.$el.find(".thermometer-3 .Background"),{fill:this.model.get("colors")[0]}),"Download"===app.settings.get("project_type")?(r.set(this.$el.find(".thermometer-3 .ProgressBarBg"),{fill:this.model.get("colors")[1]}),r.set(this.$el.find(".thermometer-3 .ProgressBar"),{fill:this.model.get("colors")[2]})):(r.set(this.$el.find(".thermometer-3 .ProgressBarBg"),{stroke:this.model.get("colors")[1]}),r.set(this.$el.find(".thermometer-3 .ProgressBar"),{stroke:this.model.get("colors")[2]}))}r.set(this.$el.find("."+this.model.get("style")+" .ProgressBarTank"),{fill:this.model.get("colors")[2],stroke:this.model.get("colors")[2]});var e=this.$el.parents("section.stage").attr("id");app.trigger(e+":change",this.model)},setTextColor:function(){r.set(this.$el.find("."+this.model.get("style")+" .thermometerValue"),{fill:this.model.get("textColor")})}})},{"../../../../helpers/loadScript.js":61,"../../objectView.js":80,underscore:52}],128:[function(e,t,i){var s=e("underscore"),o=e("./../../objectModel.js"),n=o.extend(s.extend({},{initialize:function(){this._super(),this.nonTweenable=this.nonTweenable.concat(["controls","autoplay","loop","mute","thumbnail","provider","videoLink","videoid","src"]),this.activeMenuItem=null,this.propertyMenuItems=this.propertyMenuItems.concat(".btn-settings"),this.subMenu=s.extend({},o.prototype.subMenu)},useVideoTemplate:function(){this.set("type","video")},useThumbTemplate:function(){this.set("type","video-thumb")},defaults:{type:"video-thumb",controls:!0,autoplay:!1,loop:!1,mute:!1,thumbnail:".images/video_placeholder.jpg",videoLink:"",provider:"",videoid:"",src:"",width:500,height:281},getVideoId:function(){}}));s.defaults(n.prototype.defaults,o.prototype.defaults),t.exports=n},{"./../../objectModel.js":79,underscore:52}],129:[function(e,t,i){var s=e("underscore"),o=e("../../objectView.js"),n=o.extend({youtubeSrc:"https://www.youtube.com/embed/",vimeoSrc:"https://player.vimeo.com/video/",args:"{videoid}?{startTime}&controls={controls}&loop={loop}&mute={mute}&enablejsapi=1",vimeoVideoTemplate:"#vimeo-video",youtubeVideoTemplate:"#youtube-video",vismeVideoTemplate:"#visme-video",thumbnailTemplate:"#video-thumb",backendRenderedProperties:["x","y","backgroundColor","opacity"],initialize:function(){this.template=this.getTemplate(),this._super(),this.backendRenderedProperties=this.backendRenderedProperties.concat("thumbnail"),this.player=this.$el.find("video")[0],s.bindAll(this,"stop","play","setVolume","setupVimeoAPI","setVimeoVideo"),this.model.get("autoplay")&&1!==app.settings.get("presentation_mode")&&("blockinfographic"===app.settings.get("project_type")?this.model.bind("timeline:play",this.play):app.bind("timeline:play timeline:no-animations-play",this.play)),1!==app.settings.get("presentation_mode")&&(app.bind("slide:transitionTo",this.stop),app.settings.bind("change:mute",this.setVolume))},isActiveSlide:function(){return this.$el.closest(".stage").css("opacity")>0},render:function(){this.model.attributes.src=this.generateSrc(),$("#content #"+this.model.get("id")).length>0&&$("#content #"+this.model.get("id")).find("iframe.ytplayer").attr("src",this.model.attributes.src),this._super()},afterRender:function(){if("Download"!==app.settings.get("project_type")){if("publish"===app.settings.get("editMode")&&1!==app.settings.get("presentation_mode"))if("youtube"===this.model.get("provider"))this.setupYoutubeAPI();else if("vimeo"===this.model.get("provider"))this.setupVimeoAPI();else if("visme"===this.model.get("provider")||"vismeold"===this.model.get("provider")){this.$el.find("video").get(0).pause(),this.$el.find("video").get(0).mute=!0,this.$el.find("video").get(0).addEventListener("ended",function(){app.trigger("video:ended",app.views.slidesView.currentSlideIndex)},!1);var e=this.model.get("startTime");if(e){var t=60*e.minute+e.second;this.$el.find("video").get(0).addEventListener("loadedmetadata",function(){t>this.duration?this.currentTime=this.duration:this.currentTime=t},!1)}this.$el.on("click","video",function(e){var t=e.pageY-$(this).offset().top,i=parseFloat($(this).height());return t>.92*i?void 0:(this.paused?this.play():this.pause(),!1)})}this._super()}},setupYoutubeAPI:function(){if(!$("#youtube-api-script").length){var e=document.createElement("script");$(e).attr("id","youtube-api-script"),e.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=function(){window.players={};for(var e=function(e){console.log("state changed : "+e.data),e.data===YT.PlayerState.ENDED&&app.trigger("video:ended",app.views.slidesView.currentSlideIndex),!app.settings.get("is_mobile")||e.data!==YT.PlayerState.PAUSED&&e.data!==YT.PlayerState.ENDED||$("#controls.mobile-controls").fadeIn("fast")},t=function(e){$(e.target.getIframe()).hasClass("muted")?e.target.mute():e.target.unMute()},i=0;i<$(".ytplayer").length;i++){var o=$(".ytplayer")[i].id.replace("ytvel",""),n={};n[o]=new YT.Player($(".ytplayer")[i].id,{events:{onReady:t,onStateChange:e}}),s.extend(window.players,n)}}}},setupVimeoAPI:function(){if(s.isUndefined(window.Vimeo)?this.listenTo(app,"vimeo:api-script-loaded",this.setVimeoVideo):this.setVimeoVideo(),!$("#vimeo-api-script").length){var e=document.createElement("script");$(e).attr("id","vimeo-api-script");var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),e.onload=function(){app.trigger("vimeo:api-script-loaded")}.bind(this),e.src="https://player.vimeo.com/api/player.js"}},setVimeoVideo:function(){var e=this.$el.find("iframe");this.player=new Vimeo.Player(e[0]);var t=function(){this.player.getPaused().then(function(){this.player.pause()}.bind(this)),this.model.get("mute")&&this.player.setVolume(0)["catch"](function(e){switch(e.name){case"RangeError":}})}.bind(this),i=function(){this.isActiveSlide()&&app.trigger("video:ended",app.views.slidesView.currentSlideIndex)}.bind(this);this.player.ready().then(function(){t(),this.player.on("finish",i),this.model.get("loop")&&this.player.setLoop(!0)["catch"](function(e){})}.bind(this))},dblclick:function(){app.trigger("videoPopup:show",this.model)},generateSrc:function(){var e=""+this.args,t=this.model.get("startTime"),i=0;if("youtube"===this.model.get("provider"))e=this.youtubeSrc+e,this.model.get("loop")&&(e+="&playlist="+this.model.get("videoid")),i=s.isUndefined(t)?0:60*t.minute+t.second,e=e.replace("{startTime}","start="+i),e+="&rel=0";else if("vimeo"===this.model.get("provider"))e=this.vimeoSrc+e,t?(i=t.minute+"m"+t.second+"s",e=e.replace("?{startTime}&","#t="+i+"?")):e=e.replace("{startTime}&",""),e=e.replace("enablejsapi","api"),e=e.replace("controls={controls}&",""),e=e.replace("mute={mute}&",""),e=e+"&player_id=vplayer_"+this.model.get("id");else{if("vismeold"===this.model.get("provider")){var o="//ec2-50-17-186-69.compute-1.amazonaws.com/getvideo.php?id=";return e=-1!==this.model.get("src").indexOf("ec")?this.model.get("src"):o+this.model.get("link.target")+"&t=v&f=.mp4"}e=e.replace("{startTime}&","")}return s.each(["videoid","controls","loop","mute"],function(t){var i="";i="videoid"===t?this.model.get(t):this.model.get(t)?"1":"0",e=e.replace("{"+t+"}",i)},this),e},updateHeight:function(){var e=this.$el.find("img, iframe");e.attr("height",this.model.get("height")),e.attr("width",this.model.get("width")),e.css({height:this.model.get("height"),width:this.model.get("width")})},update:function(e,t){(s.has(this.model.changed,"height")||s.has(this.model.changed,"width"))&&this.updateHeight(),s.has(this.model.changed,"thumbnail")&&this.$el.find("img").attr("src",this.model.changed.thumbnail),this._super(e,t)},getTemplate:function(){var e=app.settings.get("editMode"),t=this.thumbnailTemplate;return"publish"===e&&"Download"!==app.settings.get("project_type")&&1!==app.settings.get("presentation_mode")&&("youtube"===this.model.get("provider")?t=this.youtubeVideoTemplate:"vimeo"===this.model.get("provider")?t=this.vimeoVideoTemplate:"visme"===this.model.get("provider")?t=this.vismeVideoTemplate:"vismeold"===this.model.get("provider")&&(t=this.vismeVideoTemplate)),t},stop:function(e){if($("#"+this.model.get("id")).parents(".stage").attr("id")!==e.model.get("id")&&"Download"!==app.settings.get("type"))if("youtube"===this.model.get("provider")){var t=this.model.get("id"),i=$("#"+t).find(".ytplayer")[0];$(i).length&&i.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}else if("vimeo"===this.model.get("provider")){var s=this.model.get("id"),o=$("#"+s).find(".vplayer")[0];o.contentWindow.postMessage('{"method":"pause","value":""}',"*")}else $("#"+this.model.get("id")).find("video").length&&$("#"+this.model.get("id")).find("video").get(0).pause()},setVolume:function(){var e=app.settings.get("mute"),t=0;if("youtube"===this.model.get("provider")){var i=this.model.get("id"),s=$("#"+i).find(".ytplayer")[0];e?s.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"*"):s.contentWindow.postMessage('{"event":"command","func":"unMute","args":""}',"*")}else if("vimeo"===this.model.get("provider")){e||(t=1);var o=this.model.get("id"),n=$("#"+o);n.find("iframe")[0].contentWindow.postMessage('{"method":"setVolume","value":'+t+"}","*")}else e||(t=1),$("#"+this.model.get("id")).find("video").length&&($("#"+this.model.get("id")).find("video").get(0).volume=t)},play:function(e){if("blockinfographic"===app.settings.get("project_type")||this.isActiveSlide()&&$("#"+this.model.get("id")).parents(".stage").attr("id")===e.get("id")&&this.$el.is(":visible")&&!(this.$el.css("opacity")<=0))if("youtube"===this.model.get("provider")){var t=this.model.get("id"),i=$("#"+t).find(".ytplayer")[0],o=this.model.get("startTime"),n=s.isUndefined(o)?0:60*o.minute+o.second;i.contentWindow.postMessage('{"event":"command","func":"seekTo","args":['+n+", true]}","*"),i.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}else"vimeo"===this.model.get("provider")?$("#"+this.model.get("id")).find("iframe")[0].contentWindow.postMessage('{"method":"play","value":""}',"*"):$("#"+this.model.get("id")).find("video").get(0).play()}});s.defaults(n.prototype.events,o.prototype.events),t.exports=n},{"../../objectView.js":80,underscore:52}],130:[function(e,t,i){var s=window.TweenMax;t.exports=function(e,t,i){var o=1,n=e.get("animation.enter.delay"),r=0,a=0,l=10;if("blockinfographic"===app.settings.get("project_type")){if("Fly from Top"===e.get("animation.enter.name"))return a=Math.abs(e.get("width")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("height")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{y:-(e.get("height")+a)/2,opacity:0}),void t.to($("#content #"+e.get("id")),o,{y:e.get("y"),opacity:e.get("opacity")/100},n);if("Fly from Bottom"===e.get("animation.enter.name"))return a=Math.abs(e.get("width")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("height")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{y:i.get("height")+(a-e.get("height"))/2,opacity:0}),void t.to($("#content #"+e.get("id")),o,{y:e.get("y"),opacity:e.get("opacity")/100},n)}switch(e.get("animation.enter.name")){case"Fly from Left":r=Math.abs(e.get("height")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("width")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{x:-(e.get("width")+r)/2-l}),t.to($("#content #"+e.get("id")),o,{x:e.get("x")},n);break;case"Fly from Right":r=Math.abs(e.get("height")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("width")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{x:app.settings.get("slideWidth")+(r-e.get("width"))/2+l}),t.to($("#content #"+e.get("id")),o,{x:e.get("x")},n);break;case"Fly from Top":a=Math.abs(e.get("width")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("height")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{y:-(e.get("height")+a)/2-l}),t.to($("#content #"+e.get("id")),o,{y:e.get("y")},n);break;case"Fly from Bottom":a=Math.abs(e.get("width")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("height")*Math.cos(e.get("rotation")*(Math.PI/180))),s.set($("#content #"+e.get("id")),{y:app.settings.get("slideHeight")+(a-e.get("height"))/2+l}),t.to($("#content #"+e.get("id")),o,{y:e.get("y")},n);break;case"Fade In":s.set($("#content #"+e.get("id")),{opacity:0}),t.to($("#content #"+e.get("id")),o,{opacity:e.get("opacity")/100},n);break;case"Pop Out":s.set($("#content #"+e.get("id")),{scale:[0,0]}),t.to($("#content #"+e.get("id")),o,{scale:[1,1]},n);break;case"Custom animation":app.trigger("error","old animation detected");break;case"None":0!==n&&(s.set($("#content #"+e.get("id")),{css:{opacity:0}}),t.to($("#content #"+e.get("id")),.1,{css:{opacity:e.get("opacity")/100}},n));break;default:if(n>=0){var d=function(){};"audio"===e.get("type")&&(d=function(){e.set("state","play")}),t.to($("#content #"+e.get("id")),.1,{onComplete:function(){d()}},n)}}}},{}],131:[function(e,t,i){t.exports=function(){function e(e,t){var i,s=Number(e.get("animation.enter.delay"));console.log($("#"+e.get("id")).find("audio")[0].readyState),app.settings.get("is_mobile")===!0?(e.get("duration")&&(i=s+e.get("duration"),t.to($("#content #"+e.get("id")),0,{x:-e.get("width")},i)),t.ready=!0):$("#"+e.get("id")).find("audio")[0].readyState>=3||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(i=s+$("#"+e.get("id")).find("audio")[0].duration,t.to($("#content #"+e.get("id")),0,{x:-e.get("width")},i),$("#"+e.get("id")).closest(".stage").trigger("timeline:ready"),t.ready=!0):(t.ready=!1,e.bind("oncanplay",function(){console.log($("#"+e.get("id")).find("audio")[0].readyState),i=s+$("#"+e.get("id")).find("audio")[0].duration,t.to($("#content #"+e.get("id")),0,{x:-e.get("width")},i),e.unbind("oncanplay"),$("#"+e.get("id")).closest(".stage").trigger("timeline:ready"),t.ready=!0}))}return{setUp:function(t,i,s){var o,n,r="audio"===t.get("type")?0:1,a=0,l=Number(t.get("animation.enter.delay"));"audio"===t.get("type")?t.get("loop")?a=l+216e3:e(t,i):a=l+Number(t.get("animation.exit.delay")),"audio"!==t.get("type")&&(a=Number(t.get("animation.enter.delay"))+1+Number(t.get("animation.exit.delay")));var d="audio"===t.get("type")?"Fly to Left":t.get("animation.exit.name");if("blockinfographic"===app.settings.get("project_type")){if("Fly to Top"===d)return n=Math.abs(t.get("width")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("height")*Math.cos(t.get("rotation")*(Math.PI/180))),void i.to($("#content #"+t.get("id")),r,{y:-(t.get("height")+n)/2,opacity:0},a);if("Fly to Bottom"===d)return n=Math.abs(t.get("width")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("height")*Math.cos(t.get("rotation")*(Math.PI/180))),void i.to($("#content #"+t.get("id")),r,{y:s.get("height")+(n-t.get("height"))/2,opacity:0},a)}switch(d){case"None":0!==Number(t.get("animation.exit.delay"))&&i.to($("#content #"+t.get("id")),.1,{css:{opacity:0}},a);break;case"Fly to Left":o=Math.abs(t.get("height")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("width")*Math.cos(t.get("rotation")*(Math.PI/180))),i.to($("#content #"+t.get("id")),r,{x:-(t.get("width")+o)/2},a);break;case"Fly to Right":o=Math.abs(t.get("height")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("width")*Math.cos(t.get("rotation")*(Math.PI/180))),i.to($("#content #"+t.get("id")),r,{x:app.settings.get("slideWidth")+(o-t.get("width"))/2},a);break;case"Fly to Top":n=Math.abs(t.get("width")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("height")*Math.cos(t.get("rotation")*(Math.PI/180))),i.to($("#content #"+t.get("id")),r,{y:-(t.get("height")+n)/2},a);break;case"Fly to Bottom":n=Math.abs(t.get("width")*Math.sin(t.get("rotation")*(Math.PI/180)))+Math.abs(t.get("height")*Math.cos(t.get("rotation")*(Math.PI/180))),i.to($("#content #"+t.get("id")),r,{y:app.settings.get("slideHeight")+(n-t.get("height"))/2},a);break;case"Fade Out":i.to($("#content #"+t.get("id")),r,{css:{opacity:0}},a);break;case"Pop Away":i.to($("#content #"+t.get("id")),r,{scale:[0,0]},a)}}}}()},{}],132:[function(e,t,i){t.exports=function(e,t){function i(e){var t=$("<div></div>"),s=e.contents().clone();return s.each(function(){if(3===this.nodeType){for(var e="",s=this.wholeText,o=0;o<s.length;o++)e+=" "===s[o]?"<span>&nbsp;</span>":"<span class='letter'>"+s[o]+"</span>";t.append($(e))}else $(this).html(i($(this))),t.append($(this))}),t.html()}var s=e.get("animation.enter.delay");$("#content #"+e.get("id")+" .vm-text").html(i($("#content #"+e.get("id")+" .vm-text")));var o=$("#content #"+e.get("id")+" .vm-text .letter");switch(e.set("width",e.get("width")+1),e.get("textEffect")){case"wave":t.staggerFrom(o,.48,{alpha:0},.06,s),t.staggerFrom(o,.96,{rotationY:"-270deg",top:60,transformOrigin:"50% 50% -80",ease:"Back.easeOut"},.06,s);break;case"impact":o.css("opacity",0),t.to(o,0,{scale:[3,3],rotationY:"-270deg",opacity:0},s),t.staggerTo(o,1,{scale:[1,1],rotationY:0,opacity:1,ease:"Back.easeOut"},.06,s);break;case"typewriter":o.css("opacity",0),t.set(o,{top:-5,opacity:0},0),t.staggerTo(o,.2,{top:0,opacity:1,ease:"Back.easeOut"},.06,s)}}},{}],133:[function(e,t,i){var s=e("underscore"),o=window.TweenMax;t.exports=function(e,t){var i,n=0;e.get("animation.enter.delay")?n=e.get("animation.enter.delay")+1:"None"!==e.get("animation.enter.name")&&(n=1);var r,a,l,d=function(e){var t=[Math.round(i)+"%",Math.round(i)+"%"];return{offset:t[e]}},h=function(e){var t=[100-Math.round(i)+"%",100-Math.round(i)+"%"];return{offset:t[e]}},c=function(e,t){var i=parseInt(e.slice(1),16),s=Math.round(2.55*t),o=(i>>16)+s,n=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>n?1>n?0:n:255)+(255>r?1>r?0:r:255)).toString(16).slice(1)},g=e.get("type");if("progressbar"===g||"radials"===g||"thermometer"===g){if(r=e.get("rangeValue")[0],a=e.get("rangeValue")[1],l=e.get("value"),i=(l-r)/(a-r)*100,"progressbar"===g){if("progressbar-1"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-1 .ProgressBar"),{drawSVG:"0%"}),t.to($("#"+e.get("id")).find(".progressbar-1 .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1 .ProgressBarBg"),{drawSVG:"0% 100%"}),t.to($("#"+e.get("id")).find(".progressbar-1 .ProgressBarBg"),1,{drawSVG:Math.round(i)+"% 100%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1 .Background"),{x:"0px"}),t.to($("#"+e.get("id")).find(".progressbar-1 .Background"),1,{x:2.59*Math.round(i)+"px",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1 .progressbarValue"),{x:"0px"}),t.to($("#"+e.get("id")).find(".progressbar-1 .progressbarValue"),1,{x:2.59*Math.round(i)+"px",ease:"Bounce.easeOut"},n)),"progressbar-1v"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-1v .ProgressBar"),{drawSVG:"0%"}),t.to($("#"+e.get("id")).find(".progressbar-1v .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1v .ProgressBarBg"),{drawSVG:"0% 100%"}),t.to($("#"+e.get("id")).find(".progressbar-1v .ProgressBarBg"),1,{drawSVG:Math.round(i)+"% 100%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1v .Background"),{y:"259px"}),t.to($("#"+e.get("id")).find(".progressbar-1v .Background"),1,{y:259-2.59*Math.round(i)+"px",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-1v .progressbarValue"),{y:"259px"}),t.to($("#"+e.get("id")).find(".progressbar-1v .progressbarValue"),1,{y:259-2.59*Math.round(i)+"px",ease:"Bounce.easeOut"},n)),"progressbar-4"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-4 .arrow"),{x:"0px"}),t.to($("#"+e.get("id")).find(".progressbar-4 .arrow"),1,{x:2.82*Math.round(i)+"px",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-4 .progressbarValue"),{x:"0px"}),t.to($("#"+e.get("id")).find(".progressbar-4 .progressbarValue"),1,{x:2.82*Math.round(i)-(i>80?56:0)+"px",ease:"Bounce.easeOut"},n)),"progressbar-4v"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-4v .arrow"),{y:"282px"}),t.to($("#"+e.get("id")).find(".progressbar-4v .arrow"),1,{y:282-2.82*Math.round(i)+"px",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-4v .progressbarValue"),{y:"282px"}),t.to($("#"+e.get("id")).find(".progressbar-4v .progressbarValue"),1,{y:282-2.82*Math.round(i)+"px",ease:"Bounce.easeOut"},n)),"progressbar-6"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-6 .arrow"),{x:"-322px"}),t.to($("#"+e.get("id")).find(".progressbar-6 .arrow"),1,{x:3.22*Math.round(i)-322+"px",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-6 .ProgressBar"),{drawSVG:"0%"}),t.to($("#"+e.get("id")).find(".progressbar-6 .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-6 .progressbarValue"),{x:"-322px"}),t.to($("#"+e.get("id")).find(".progressbar-6 .progressbarValue"),1,{x:3.22*Math.round(i)-322+"px",ease:"Bounce.easeOut"},n)),"progressbar-8"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-8 .ProgressBar"),{drawSVG:"0%"}),o.set($("#"+e.get("id")).find(".progressbar-8 .ProgressBarCap"),{y:272.4}),t.to($("#"+e.get("id")).find(".progressbar-8 .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n),t.to($("#"+e.get("id")).find(".progressbar-8 .ProgressBarCap"),1,{y:2.724*(100-Math.round(i)),ease:"Bounce.easeOut"},n)),"progressbar-9"!==e.get("style")&&"progressbar-10"!==e.get("style")&&($("#"+e.get("id")).find("."+e.get("style")+" .path").find(".step-2, .step-3").attr("offset","0%"),t.insert(new o.staggerTo($("#"+e.get("id")).find("."+e.get("style")+" .path").find(".step-2, .step-3"),1,{cycle:{attr:d},ease:"Bounce.easeOut"}),n)),"progressbar-11"===e.get("style")){var p=c(e.get("colors")[0],-40),u=c(e.get("colors")[1],-40),f=c(e.get("colors")[2],-40);o.set($("#"+e.get("id")+" .level-1"),{fill:p}),o.set($("#"+e.get("id")+" .level-2"),{fill:p}),o.set($("#"+e.get("id")+" .level-3"),{fill:p}),o.set($("#"+e.get("id")+" .level-4"),{fill:p}),o.set($("#"+e.get("id")+" .level-5"),{fill:u}),o.set($("#"+e.get("id")+" .level-6"),{fill:u}),o.set($("#"+e.get("id")+" .level-7"),{fill:u}),o.set($("#"+e.get("id")+" .level-8"),{fill:f}),o.set($("#"+e.get("id")+" .level-9"),{fill:f}),o.set($("#"+e.get("id")+" .level-10"),{fill:f}),t.insert(new o.staggerTo($("#"+e.get("id")).find("."+e.get("style")+" rect"),.3,{cycle:{fill:function(t){return 4>t?i>=10*(t+1)?e.get("colors")[0]:c(e.get("colors")[0],-40):7>t?i>=10*(t+1)?e.get("colors")[1]:c(e.get("colors")[1],-40):i>=10*(t+1)?e.get("colors")[2]:c(e.get("colors")[2],-40)}},ease:"Power4.easeOut"},.1),n)}"progressbar-12"===e.get("style")&&(o.set($("#"+e.get("id")).find(".progressbar-12 .ProgressBar"),{drawSVG:"0%"}),t.to($("#"+e.get("id")).find(".progressbar-12 .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n),o.set($("#"+e.get("id")).find(".progressbar-12 .progressbarValue"),{x:"-322px"}),t.to($("#"+e.get("id")).find(".progressbar-12 .progressbarValue"),1,{x:3.22*Math.round(i)-322+"px",ease:"Bounce.easeOut"},n))}else if("radials"===g){var m="100px 100px";"radial-6"===e.get("style")&&(m="137.4px 197.9px"),"radial-5"===e.get("style")&&($("#"+e.get("id")).find("."+e.get("style")).find(".step-2, .step-3").attr("offset","100%"),t.insert(new o.staggerTo($("#"+e.get("id")).find("."+e.get("style")).find(".step-2, .step-3"),1,{cycle:{attr:h},ease:"Bounce.easeOut"}),n));var v;v=app.settings.get("is_mobile")?270.1:270,o.set($("#"+e.get("id")).find("."+e.get("style")+" .ProgressBar"),{drawSVG:"0%",rotation:v,svgOrigin:m}),t.to($("#"+e.get("id")).find("."+e.get("style")+" .ProgressBar"),1,{drawSVG:"0% "+Math.round(i)+"%",ease:"Bounce.easeOut"},n)}else if("thermometer"===g)switch(e.get("style")){case"thermometer-1":o.set($("#"+e.get("id")).find(".thermometer-1 .ProgressBar"),{drawSVG:"0%"}),t.to($("#"+e.get("id")).find(".thermometer-1 .ProgressBar"),1,{drawSVG:Math.round(i)+"%",ease:"Bounce.easeOut"},n);break;case"thermometer-2":o.set($("#"+e.get("id")).find(".thermometer-2 .ProgressBar"),{drawSVG:"100%"}),o.set($("#"+e.get("id")).find(".thermometer-2 .arrow"),{y:"167px"}),o.set($("#"+e.get("id")).find(".thermometer-2 .thermometerValue"),{y:"167px"}),t.to($("#"+e.get("id")).find(".thermometer-2 .ProgressBar"),1,{drawSVG:100-Math.round(i)+"%",ease:"Bounce.easeOut"},n),t.to($("#"+e.get("id")).find(".thermometer-2 .arrow"),1,{y:167-2.45*Math.round(i)+"px",ease:"Bounce.easeOut"},n),t.to($("#"+e.get("id")).find(".thermometer-2 .thermometerValue"),1,{y:167-2.45*Math.round(i)+"px",ease:"Bounce.easeOut"},n);break;case"thermometer-3":o.set($("#"+e.get("id")).find(".thermometer-3 .ProgressBar"),{drawSVG:"50% 50%"}),o.set($("#"+e.get("id")).find(".thermometer-3 .ProgressBarBg"),{drawSVG:"50% 100%"}),t.to($("#"+e.get("id")).find(".thermometer-3 .ProgressBar"),1,{drawSVG:"50% "+(i/2+50)+"%",ease:"Bounce.easeOut"},n),t.to($("#"+e.get("id")).find(".thermometer-3 .ProgressBarBg"),1,{drawSVG:i/2+50+"% 100%",ease:"Bounce.easeOut"},n)}}else e.tweenAnimParam1=0,e.set("animParam1",0),s.isUndefined(e.get("arrParam"))?t.fromTo(e,1,{tweenAnimParam1:0},{tweenAnimParam1:e.get("param1"),onUpdateParams:["{self}","tweenAnimParam1"],onUpdate:function(e){e&&e.target.set("animParam1",Number(e.target.tweenAnimParam1))},ease:"Bounce.easeOut"},n):(e.tweenArrParam=0,e.set("arrParam",0),t.fromTo(e,1,{tweenArrParam:0},{tweenArrParam:e.get("param1"),onUpdateParams:["{self}","tweenArrParam"],onUpdate:function(e){e&&e.target.set("arrParam",Number(e.target.tweenArrParam))},ease:"Bounce.easeOut"},n)),s.isUndefined(e.get("param2"))||(e.tweenAnimParam2=0,e.set("animParam2",0),t.fromTo(e,1,{tweenAnimParam2:0},{tweenAnimParam2:e.get("param2"),onUpdateParams:["{self}","tweenAnimParam2"],onUpdate:function(e){e&&e.target.set("animParam2",Number(e.target.tweenAnimParam2))},ease:"Bounce.easeOut"},n)),s.isUndefined(e.get("param2"))||(e.tweenAnimParam2=0,e.set("animParam2",0),t.fromTo(e,1,{tweenAnimParam2:0},{tweenAnimParam2:e.get("param2"),onUpdateParams:["{self}","tweenAnimParam2"],onUpdate:function(e){e&&e.target.set("animParam2",Number(e.target.tweenAnimParam2))},ease:"Bounce.easeOut"},n)),s.isUndefined(e.get("param3"))||(e.tweenAnimParam3=0,e.set("animParam3",0),t.fromTo(e,1,{tweenAnimParam3:0},{tweenAnimParam3:e.get("param3"),onUpdateParams:["{self}","tweenAnimParam3"],onUpdate:function(e){e&&e.target.set("animParam3",Number(e.target.tweenAnimParam3))},ease:"Bounce.easeOut"},n))}},{underscore:52}],134:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("skrollr"),r=e("./fullscreen.js"),a=e("./animations/enterAnimations.js"),l=e("./animations/exitAnimations.js"),d=e("./animations/textAnimations.js"),h=e("./animations/widgetAnimations.js");t.exports=s.View.extend(o.extend({},{el:"#controls",events:{"click #fullscreen":"fullScreenClick","click #sound":"soundClick"},initialize:function(){o.bindAll(this,"setupAnimation","toggleFullScreen"),app.bind("slides:loaded",this.setupAnimation),"embed"!==app.settings.get("mode")&&this.listenTo(app,"slide:find",this.scrollToBlock),app.trigger("addToJobQueue",function(){!o.isUndefined(app.settings.get("is_mobile"))&&app.settings.get("is_mobile")||(this.sk=n.init({forceHeight:!1,smoothScrolling:!0,easing:"outCubic"})),this.bindScrollEvent(),setTimeout(function(){this.animateVisibleObjects()}.bind(this),500)}.bind(this),"loaded"),r.init(this.toggleFullScreen),this.setBackgroundMusic(),this.$el.find("#sound").css("margin-left","20px")},setBackgroundMusic:function(){this.bmusicView=null,this.bmusicModel=null;var e=app.settings.get("background_music");if(e&&"number"!=typeof e){var t=e.indexOf("audio")>-1?app.settings.get("assetsStorage"):app.settings.get("audioStorage");app.settings.get("Html5Download")&&e.indexOf("audio")>-1&&(t="https://dh7fnycu2r4y5.cloudfront.net/");var i=app.settings.get("background_music_volume"),s=o.isUndefined(i)||null===i?100:parseInt(app.settings.get("background_music_volume"));this.bmusicModel=new app.models.objects.audio({name:"Background Music",loop:0!==parseInt(app.settings.get("is_loop_background_music")),hash:e,volume:s,is_bmusic:!0,audioStorage:t}),this.bmusicView=new app.views.objects.audio({model:this.bmusicModel})}},setupAnimation:function(){var e=this;e.exitAnimationsSetUp=l.setUp,setTimeout(function(){"Download"!==app.settings.get("project_type")&&o.each(app.collections.slides.models,function(t){t.layoutObjectsCollection&&t.layoutObjectsCollection.each(function(e){$("#"+e.get("id")).show()}),t.objectCollection.each(function(e){this.applyAnimation(e,t),this.setParallaxAnimation(e,t)}.bind(e))},e),app.trigger("slide:timeline:setup-done"),e.bmusicModel&&e.bmusicModel.set("state","play")},500)},applyAnimation:function(e,t){var i=e.get("type");e.timeline=new TimelineLite({paused:!0,defaultEase:"Quad.easeOut"}),a(e,e.timeline,t),this.exitAnimationsSetUp(e,e.timeline,t),"text"===i&&e.get("textEffect")&&d(e,e.timeline),$("#"+e.get("id")).length&&$("#"+e.get("id")).css("display","block"),"infogrWidget"!==i&&"progressbar"!==i&&"radials"!==i&&"thermometer"!==i||h(e,e.timeline)},setParallaxAnimation:function(e,t){if("publish"===app.settings.get("editMode")&&"player"===app.settings.get("mode")||"preview"===app.settings.get("mode")){var i=e.get("type"),s=.7,n=t.get("order")===app.collections.slides.length-1,r=100,a=-100;if("infogrWidget"!==i&&"progressbar"!==i&&"radials"!==i&&"thermometer"!==i&&"chart"!==i&&o.isUndefined(e.get("textEffect"))&&"None"===e.get("animation.enter.name")&&0===e.get("animation.enter.delay")&&o.isUndefined($("#"+e.get("id")).attr("data-opacity"))&&!(e.get("width")>s*app.settings.get("slideWidth")&&e.get("height")>s*t.get("height"))){var l=Math.abs(e.get("width")*Math.sin(e.get("rotation")*(Math.PI/180)))+Math.abs(e.get("height")*Math.cos(e.get("rotation")*(Math.PI/180)));
n&&(r=150,a=0),$("#"+e.get("id")).attr("data-"+(l+r)+"-bottom","opacity:0;margin-top:100px;"),$("#"+e.get("id")).attr("data-"+a+"-bottom","opacity:"+e.get("opacity")/100+";margin-top:0px;")}}},scrollToBlock:function(e){var t=app.collections.slides.get(e),i=$("#"+t.get("id")).offset().top,s=window.innerHeight,o=app.settings.get("slideWidth"),n=t.get("height"),r=1;app.settings.get("is_responsive")&&(r=.9*$(window).width()/o);var a=i+n*r/2-s/2;a=a>0?a:0,$("body,html").animate({scrollTop:a},500)},animateVisibleObjects:function(e){var t=app.collections.slides.models,i=$(window).scrollTop(),s=window.innerHeight,n=1,r=this;(1===app.settings.get("is_responsive")&&"embed"!==app.settings.get("mode")||app.settings.get("is_mobile"))&&(n=.9*$(window).width()/Number(app.settings.get("slideWidth"))),o.each(t,function(e){var t=e.get("id"),o=$(".infoblock#"+t).offset();o.top-i<=s&&e.objectCollection.each(function(e){e.get("scrollAnimated")!==!0&&o.top-i+e.get("y")*n<=s&&(e.timeline.totalDuration()&&e.timeline.play(),r.playOffTimlineObj(e),e.set({scrollAnimated:!0},{silent:!0}))}.bind(r))},r)},playOffTimlineObj:function(e){"video"!==e.get("type")&&"countdown"!==e.get("type")&&"chart"!==e.get("type")||e.trigger("timeline:play")},bindScrollEvent:function(){this.maxScrollTop=$(window).scrollTop();var e=function(){var e=$(window).scrollTop();e>this.maxScrollTop&&(this.maxScrollTop=e,this.animateVisibleObjects())}.bind(this),t=o.throttle(e,100);$(window).bind("scroll",t)},soundClick:function(e){var t=$(e.currentTarget);if(t.toggleClass("inactive"),app.settings.set("mute",t.hasClass("inactive")),this.bmusicModel)if(t.hasClass("inactive")){var i=this.bmusicModel.get("volume");this.lastBmusicVolume=null!==i&&i>=0?i:null!==this.lastBmusicVolume&&this.lastBmusicVolume>=0?this.lastBmusicVolume:100,this.bmusicModel.set("volume",0)}else this.bmusicModel.set("volume",this.lastBmusicVolume)},fullScreenClick:function(){app.settings.get("fullscreen")?($("#at4-share").show(),r.exit(),$("#wrapper").removeClass("fullscreen")):($(".ui-standard-el").hide(),$(".at4-share-outer").hide(),$("#wrapper").addClass("fullscreen"),r.enter(),$("#at4-share").hide())},toggleFullScreen:function(e){app.settings.set("fullscreen",e),e||($(".ui-standard-el").show(),$(".at4-share-outer").show()),setTimeout(function(){this.sk.forceReflow(),$(window).trigger("resize")}.bind(this),1e3)}}))},{"./animations/enterAnimations.js":130,"./animations/exitAnimations.js":131,"./animations/textAnimations.js":132,"./animations/widgetAnimations.js":133,"./fullscreen.js":137,backbone:"backbone",skrollr:"skrollr",underscore:52}],135:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("./../../helpers/gradient.js"),r=window.TweenMax,a=e("./presenterMixin.js");t.exports=s.View.extend(o.extend({},a,{el:"#content",resizeTimeout:!1,footerTimeout:!1,initLoading:!0,initialize:function(){o.bindAll(this,"windowResize","hideFooter","iFrameMessage","bindMobileEvent","bindWindowResize","setPreNotes","startPreTimer"),this.$footer=$(".bottom-controls"),this.$controls=$(".bottom-controls").find("#controls-container");var e=this;this.$footer.bind("mouseenter",function(){e.showFooter()}),this.$footer.bind("mouseleave",function(){e.toggleControls()}),this.removeBrand(),this.windowResize(),this.isEmbedded()&&this.hideFooter(),this.isMobile()?(this.$el.css("overflow","hidden"),this.bindMobileEvent()):this.bindWindowResize(),this.isPreNotes()&&this.setPresenterMode(),setTimeout(function(){$(document).width()>$(window).width()&&this.windowResize()}.bind(this),500)},hideFooter:function(){this.footerTimeout||(this.footerTimeout=setTimeout(function(){this.$controls.fadeOut("fast"),this.footerTimeout=!1}.bind(this),800))},toggleControls:function(){(this.isFullScreenMode()||this.isEmbedded())&&this.hideFooter()},showFooter:function(){this.footerTimeout&&(clearTimeout(this.footerTimeout),this.footerTimeout=!1),this.$controls.is(":visible")||this.$controls.fadeIn()},renderCustomBackground:function(e){if(o.isEmpty(e.value)||-1!==e.value.indexOf("background")||(e=JSON.parse(e.value)),!o.isNull(e.type)&&"gradient"===e.type){var t=$("#wrapper").width(),i=$("#wrapper").height(),s=document.createElement("canvas");$(s).css({width:t,height:i}),$(s).attr({width:t,height:i}),n(s,t,i,e.value);var r=s.toDataURL();$("body").css("background","url("+r+")")}},bindMobileEvent:function(){$(window).on("orientationchange",function(e){setTimeout(function(){this.windowResize()}.bind(this),500)}.bind(this)),this.isEmbedded()&&app.bind("iframe-message",this.iFrameMessage)},bindWindowResize:function(){$(window).resize(function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.windowResize()}.bind(this),300)}.bind(this))},iFrameMessage:function(e){console.log(e),o.isUndefined(e)||"embed-iframe"===e.type&&(this.iFrameWidth=e.width,this.iFrameHeight=e.height)},removeBrand:function(){o.contains(app.settings.get("permissions"),"player:watermarkRemoveBranding")&&$(".bottom-controls").find("#logosmall").hide()},isFullScreenMode:function(){return!o.isUndefined(app.settings.get("fullscreen"))&&app.settings.get("fullscreen")},isResponsive:function(){return!o.isUndefined(app.settings.get("is_responsive"))&&app.settings.get("is_responsive")},isEmbedded:function(){return!o.isUndefined(app.settings.get("mode"))&&"embed"===app.settings.get("mode")},isPreview:function(){return!o.isUndefined(app.settings.get("mode"))&&"preview"===app.settings.get("mode")},isMobile:function(){return!o.isUndefined(app.settings.get("is_mobile"))&&app.settings.get("is_mobile")},isPreNotes:function(){return"presentation"===app.settings.get("project_type")&&!o.isUndefined(app.settings.get("presentation_mode"))&&1===app.settings.get("presentation_mode")},ratioThreshold:1.8,windowResize:function(){var e=this.isResponsive(),t=this.isFullScreenMode(),i=this.isEmbedded(),s=this.isPreview(),o=this.isMobile(),n=Number(app.settings.get("slideWidth")),a=Number(app.settings.get("slideHeight")),l=0,d=app.settings.get("project_type"),h=this.isPreNotes();if("Download"===app.settings.get("type")){var c=n;app.settings.get("bleed")&&1!==app.settings.get("isblockinfographic")&&(c+=64),this.$el.css({width:c,height:"auto"})}else{var g=$("#slide-panel").find(".slide-zone"),p=g.width(),u=g.height(),f=Math.min(p/n,u/a);r.set($("#slide-panel").find("section"),{scaleX:f,scaleY:f,y:-(a*f)/2,transformOrigin:"0% 0%"});var m,v,b,y,w=$(".bottom-controls").height(),x=$("#logos").is(":visible")?Number($("#logos").height()):0;if(h&&!i){var k=$(".presentation-clock").is(":visible")?Number($(".presentation-clock").height()):0,T=$(".presentation-notes").is(":visible")?Number($(".presentation-notes").height()):0,S=Math.min($(window).width()/1500*30,30);if($(".slide-index-text").css("font-size",S+"px"),b=Number($(window).height())-x-w-k-T,y=(b-2*$(".current-slide-div").height())/a,y*n<.55*$(window).width())m=y,$(".current-slide-div").css("margin-top",0),$(".next-slide-div").css("margin-top",m*a*.175+"px");else{m=.55*$(window).width()/n;var C=(b-m*a)/2-$(".slide-index-text").height();$(".current-slide-div").css({"margin-top":C});var P=C+m*a*.175;$(".next-slide-div").css({"margin-top":P})}$(".current-slide-div").css({width:m*n,"margin-left":-m*n/2}),$(".next-slide-div").css({width:m*n*.65,"margin-left":-m*n*.65/2}),this.$el.css({width:$(window).width(),height:b+w}),r.to($(".stage"),.5,{position:"absolute",scaleX:m,scaleY:m,left:"30%",top:b/2})}else if(t){m=$(window).width()/n;var j=m*a;v=a/n,v<this.ratioThreshold&&"infographic"!==d&&"blockinfographic"!==d?(l=$(window).height(),m=j>l?l/a:$(window).width()/n):l=j,setTimeout(function(){$("body").css("overflow","auto"),r.set($("#content"),{css:{height:l,width:$(window).width()}})},0),"blockinfographic"===app.settings.get("project_type")&&r.to($("#infoblock_wrapper"),0,{width:$(window).width(),height:l,marginLeft:-($(window).width()/2),marginTop:-(l/2)}),r.to($(".stage"),.5,{position:"absolute",scaleX:m,scaleY:m,left:"50%",top:"50%"}),this.$controls.fadeOut("fast")}else if(i){var M,I,A,_,O,B,z=this,R=this.iFrameHeight?this.iFrameHeight:$(window).height();if(this.initLoading){if("infographic"===d||"blockinfographic"===d)for(I=$(".player-loading-overlay .infographic"),A='<div class="loader-row clearfix">'+I.find(".loader-row").html()+"</div>",_=I.find(".loader-row").outerHeight(),O=I.find(".loader-header").outerHeight(),B=I.find(".loader-footer").outerHeight(),M=5;(R-O-B)/_>M;M++)I.find(".loader-content").append(A);else if("presentation"===d)for(I=$(".player-loading-overlay .presentation"),A='<div class="loader-row clearfix">'+I.find(".loader-row").html()+"</div>",_=I.find(".loader-row").outerHeight(),M=1;(R-_)/_>M;M++)I.append(A);this.initLoading=!1}"infographic"!==d&&"blockinfographic"!==d||R>2e3&&($(".player-loading-overlay .sk-cube-grid").css("top","500px"),$(".player-loading-overlay span").css("top","500px")),z.$el.css({width:Math.min($(document).width(),$(window).width()),height:$(window).height()}),$("body").css("overflow","hidden"),setTimeout(function(){o&&z.iFrameWidth&&z.iFrameHeight?(z.$el.css({width:z.iFrameWidth,height:z.iFrameHeight}),m=parseInt(z.iFrameWidth)/n,z.iFrameWidth=null,z.iFrameHeight=null):(z.$el.css({width:Math.min($(document).width(),$(window).width()),height:$(window).height()}),m=Math.min($(document).width(),$(window).width())/n),m=Math.ceil(1e3*m)/1e3+1/n,r.to($(".stage"),0,{position:"absolute",scaleX:m,scaleY:m,left:"50%",top:"50%"}),"blockinfographic"===app.settings.get("project_type")&&r.to($("#infoblock_wrapper"),0,{width:n*m,height:a*m,marginLeft:-(n*m/2),marginTop:-(a*m/2)})},30)}else e&&!s||o||h?(v=a/n,w||(w=20),b=Number($(window).height())-x-w,y=b/a,v<this.ratioThreshold&&"infographic"!==d&&"blockinfographic"!==d?(m=y*n<.9*$(window).width()?y:.9*$(window).width()/n,this.$el.css({width:$(window).width(),height:b+w}),r.to($(".stage"),.5,{position:"absolute",scaleX:m,scaleY:m,left:"50%",top:b/2})):(m=.9*$(window).width()/n,l=a*m,this.$el.css({width:$(window).width(),height:l+w}),r.to($(".stage"),0,{position:"absolute",scaleX:m,scaleY:m,left:"50%",top:a*m/2}),"blockinfographic"===app.settings.get("project_type")&&r.to($("#infoblock_wrapper"),0,{width:n*m,height:a*m,scaleX:1,scaleY:1,marginLeft:-(n*m/2),marginTop:-((a*m+w)/2)}))):(l=a>$(window).height()-w-x?a+w:$(window).height()-x,this.$el.css({width:Math.max($(window).width(),n),height:l}),"blockinfographic"===app.settings.get("project_type")?(r.to($("#infoblock_wrapper"),.5,{width:n,height:a,scaleX:1,scaleY:1,marginLeft:-(n/2),marginTop:-((a+w)/2)}),r.to($(".stage"),.5,{scaleX:1,scaleY:1})):r.to($(".stage"),.5,{scaleX:1,scaleY:1,marginLeft:-(n/2),marginTop:-((a+w)/2)}));$("#profile-content").css("width",Math.min($(window).width()-100,1e3)),$(".publ_h2, .pname").css("width",Math.min($(window).width()-200,900)),$("#disqus_thread").css("width",Math.min($(window).width()-100,1e3))}this.renderCustomBackground({value:app.settings.get("background")})}}))},{"./../../helpers/gradient.js":58,"./presenterMixin.js":139,backbone:"backbone",underscore:52}],136:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("./fullscreen.js");t.exports=s.View.extend(o.extend({},{el:"#controls",inactiveClass:"inactive",autotransitionTimeout:!1,events:{"click #next-slide":"nextClick","click #prev-slide":"prevClick","click #play":"playClick","click #fullscreen":"fullScreenClick","click #sound":"soundClick","click #download":"downloadClick","click #btn-presentation-notes":"openPreNotes","click #btn-internal-pre-notes":"openInternalPreNotes"},initialize:function(){this.$currentSlide=this.$el.find("span:eq(0)"),this.$slidesConter=this.$el.find("span:eq(1)"),this.$nextButton=this.$el.find("#next-slide"),this.$prevButton=this.$el.find("#prev-slide"),this.$playButton=this.$el.find("#play"),o.bindAll(this,"setSlidesCounter","setCurrentSlide","playStarted","playPaused","updateProgressBar","toggleFullScreen","proceedAutoadvance","keyPress","touchstart","touchend","touchmove","playOverlayClick","playClick"),this.$timelineSlider=$("#timeline"),this.$timelineSlider.slider({value:0,min:0,animate:!0,max:1,step:.01,range:"min",slide:function(e,t){app.trigger("timeline:set-progress",t.value)}}),app.bind("slide:transitionTo",this.setCurrentSlide),app.bind("slides:rendered",this.setSlidesCounter),app.bind("slide:complete-animations",this.proceedAutoadvance),app.bind("timeline:progress",this.updateProgressBar),app.bind("timeline:play backgroundMusic:play",this.playStarted),app.bind("timeline:pause",this.playPaused),$("#play-overlay").length&&$("#play-overlay").bind("click",this.playOverlayClick),n.init(this.toggleFullScreen),this.setBackgroundMusic(),$(document).on("keydown",this.keyPress),$(document).on("touchstart",this.touchstart),$(document).on("touchend",this.touchend),$(document).on("touchmove",this.touchmove),"embed"===app.settings.get("mode")&&this.$el.find("#btn-presentation-notes").hide(),app.settings.get("is_mobile")===!0&&this.setMobileControls()},setBackgroundMusic:function(){this.bmusicView=null,this.bmusicModel=null;var e=app.settings.get("background_music");if(e&&"number"!=typeof e){var t=e.indexOf("audio")>-1?app.settings.get("assetsStorage"):app.settings.get("audioStorage");app.settings.get("Html5Download")&&e.indexOf("audio")>-1&&(t="https://dh7fnycu2r4y5.cloudfront.net/");var i=app.settings.get("background_music_volume"),s=o.isUndefined(i)||null===i?100:parseInt(app.settings.get("background_music_volume"));this.bmusicModel=new app.models.objects.audio({name:"Background Music",loop:0!==parseInt(app.settings.get("is_loop_background_music")),hash:e,volume:s,is_bmusic:!0,audioStorage:t}),this.bmusicView=new app.views.objects.audio({model:this.bmusicModel})}},swipeX:0,swipeY:0,swipeThreshold:100,swipeAllowedTime:500,swipeStartTime:0,touchstart:function(e){var t=e.originalEvent.changedTouches[0];this.swipeX=t.pageX,this.swipeY=t.pageY,this.swipeStartTime=(new Date).getTime()},touchend:function(e){var t=e.originalEvent.changedTouches[0],i=Math.abs(t.pageX-this.swipeX),s=(new Date).getTime()-this.swipeStartTime,o=s<=this.swipeAllowedTime,n=i>=this.swipeThreshold,r=Math.abs(t.pageY-this.swipeY)<=100,a=this.swipeX>t.pageX;o&&r&&n&&(a?this.nextClick():this.prevClick())},touchmove:function(e){return!0},keyPress:function(e){switch(e.which){case 37:case 33:return clearTimeout(this.autotransitionTimeout),this.autotransitionTimeout=!1,app.trigger("slide:prev"),!1;case 39:case 34:return clearTimeout(this.autotransitionTimeout),this.autotransitionTimeout=!1,app.trigger("slide:next"),!1;case 190:return this.toggleContentVisibility(e),!1;case 27:return 1===app.settings.get("presentation_mode")?window.close():this.playClick(),!1}},toggleContentVisibility:function(e){0===$("input:focus").length&&("hidden"!==$("#content").css("visibility")?$("#content").css("visibility","hidden"):$("#content").css("visibility","visible"))},isLastSlide:function(){return $("#next-slide").hasClass("inactive")},proceedAutoadvance:function(e){!app.settings.get("auto_advance")||this.autotransitionTimeout||$("#play-overlay").length||(this.isLastSlide()?parseFloat(app.settings.get("loop_presentation"))>0&&(this.autotransitionTimeout=setTimeout(function(){this.autotransitionTimeout=!1,app.trigger("slide:next")}.bind(this),1e3*app.settings.get("loop_presentation"))):"timer"===e.get("transition.type")?this.autotransitionTimeout=setTimeout(function(){this.autotransitionTimeout=!1,app.trigger("slide:next")}.bind(this),1e3*parseFloat(e.get("transition.duration"))):e.get("transition.type")||(this.autotransitionTimeout=setTimeout(function(){this.autotransitionTimeout=!1,app.trigger("slide:next")}.bind(this),1e3*app.settings.get("loop_presentation"))))},playOverlayClick:function(){$("#play-overlay").remove(),app.trigger("timeline:set-play"),this.bmusicModel&&this.bmusicModel.set("state","play")},toggleFullScreen:function(e){app.settings.set("fullscreen",e),e||($(".ui-standard-el").show(),$(".at4-share-outer").show())},fullScreenClick:function(){app.settings.get("fullscreen")?($("#at4-share").show(),n.exit(),$("#wrapper").removeClass("fullscreen")):($(".ui-standard-el").hide(),$(".at4-share-outer").hide(),$("#wrapper").addClass("fullscreen"),n.enter(),$("#at4-share").hide())},playClick:function(){$("#play").hasClass("pause-mode")?app.trigger("timeline:set-pause","pauseClicked"):(app.settings.get("is_mobile")===!0&&($("#play").addClass("loading-to-play"),this.mobileControlTimer&&clearTimeout(this.mobileControlTimer)),app.trigger("timeline:set-play"))},downloadClick:function(){return app.trigger("player-download:show"),!1},playStarted:function(e){"bgmusic"!==e&&this.$playButton.addClass("pause-mode"),o.isNull(this.bmusicModel)||"play"===this.bmusicModel.get("state")||this.playBMusic(),app.settings.get("is_mobile")===!0&&($("#play").removeClass("loading-to-play"),$("#controls.mobile-controls").fadeOut("fast"),this.mobileControlTimer&&clearTimeout(this.mobileControlTimer))},playBMusic:function(){$("body").children("#"+this.bmusicModel.get("id")).find("audio")[0].readyState>=3||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?this.bmusicModel.set("state","play"):this.bmusicModel.bind("oncanplay",function(){this.set("state","play")})},updateProgressBar:function(e){this.$timelineSlider.slider("value",e),this.updateViewedProgress(),1===e&&this.setViewedInterval()},updateViewedProgress:function(){if($("#time-viewed").length>0&&$(".ui-slider-handle").length>0){var e=$("#time-viewed"),t=Math.ceil($(".ui-slider-handle").offset().left-e.offset().left);e.css("width",Math.min(100*t/$(".timeline-container").width(),96)+"%")}},setViewedInterval:function(){window.viewedInterval||(window.viewedInterval=setInterval(this.updateViewedProgress,50),setTimeout(this.removeViewedInterval,5e3))},removeViewedInterval:function(){clearInterval(window.viewedInterval),delete window.viewedInterval},playPaused:function(e){this.setViewedInterval(),o.isNull(this.bmusicModel)&&this.$playButton.removeClass("pause-mode"),o.isNull(this.bmusicModel)||"play"!==this.bmusicModel.get("state")||(this.$playButton.removeClass("pause-mode"),"pauseClicked"===e&&this.bmusicModel.set("state","pause"))},setSlidesCounter:function(e){this.maxSlides=e.filter(function(e){return"Layout"!==e.get("type")}).length,this.$slidesConter.text(this.maxSlides)},setCurrentSlide:function(e){var t=parseInt(e.index);0===t?this.$prevButton.addClass(this.inactiveClass):this.$prevButton.removeClass(this.inactiveClass),t+1===this.maxSlides?this.$nextButton.addClass(this.inactiveClass):this.$nextButton.removeClass(this.inactiveClass),this.$currentSlide.text(e.index+1)},nextClick:function(){this.$nextButton.hasClass("inactive")||"loaded"!==app.settings.get("state")||(clearTimeout(this.autotransitionTimeout),this.autotransitionTimeout=!1,app.trigger("slide:next"))},prevClick:function(){"loaded"===app.settings.get("state")&&(clearTimeout(this.autotransitionTimeout),this.autotransitionTimeout=!1,app.trigger("slide:prev"))},soundClick:function(e){var t=$(e.currentTarget);if(t.toggleClass("inactive"),app.settings.set("mute",t.hasClass("inactive")),this.bmusicModel)if(t.hasClass("inactive")){var i=this.bmusicModel.get("volume");this.lastBmusicVolume=null!==i&&i>=0?i:null!==this.lastBmusicVolume&&this.lastBmusicVolume>=0?this.lastBmusicVolume:100,this.bmusicModel.set("volume",0)}else this.bmusicModel.set("volume",this.lastBmusicVolume)},openPreNotes:function(e){if(app.settings.get("Html5Download"))window.open("js/index-presenter.html"+window.location.hash,"Presentation Mode","width=1000,height=800");else{var t=window.location.pathname;t=1===t.indexOf("embed")?"/presenterview"+t.substr(6,t.length):"/presenterview"+t.substr(9,t.length),window.open(window.location.origin+t+window.location.hash,"Presentation Mode","width=1000,height=800")}},openInternalPreNotes:function(e){var t=window.location.pathname;t=1===t.indexOf("embed")?"/presenterview2"+t.substr(6,t.length):"/presenterview2"+t.substr(9,t.length),window.open(window.location.origin+t+window.location.hash,"Presentation Mode","width=1000,height=800")},setMobileControls:function(){$(".bottom-controls").css("height","20px"),$(".bottom-controls").find("#thumbnails").css("bottom","20px"),$(".bottom-controls").find(".timeline-container").css("bottom","0px"),$(".stage").click(function(e){0===$(e.target).closest($(".linked")).length&&(0===$(e.target).closest("a").length||o.isUndefined($(e.target).closest("a")[0].href))&&($("#controls.mobile-controls").is(":visible")?(clearTimeout(this.mobileControlTimer),this.mobileControlTimer=setTimeout(function(){$("#controls.mobile-controls").fadeOut()}.bind(this),3e3)):($("#controls.mobile-controls").fadeIn(),this.mobileControlTimer=setTimeout(function(){$("#controls.mobile-controls").fadeOut()}.bind(this),3e3)))}.bind(this)),$("#controls.mobile-controls").click(function(){clearTimeout(this.mobileControlTimer),this.mobileControlTimer=setTimeout(function(){$("#controls.mobile-controls").fadeOut()}.bind(this),3e3)}.bind(this))}}))},{"./fullscreen.js":137,backbone:"backbone",underscore:52}],137:[function(e,t,i){var s=e("underscore");t.exports={onChangeCallback:!1,init:function(e){this.onChangeCallback=e,s.bindAll(this,"onChange"),document.addEventListener("webkitfullscreenchange",this.onChange,!1),document.addEventListener("mozfullscreenchange",this.onChange,!1),document.addEventListener("fullscreenchange",this.onChange,!1),document.addEventListener("MSFullscreenChange",this.onChange,!1)},onChange:function(e){this.onChangeCallback.call(this,!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement))},enter:function(){var e=document.documentElement,t=e.requestFullscreen||e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;t.call(e)},exit:function(){var e=document,t=e.exitFullscreen||e.webkitExitFullScreen||e.msExitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen;t.call(e)}}},{underscore:52}],138:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("../../helpers/color.js"),r=window.TweenMax;t.exports=s.View.extend(o.extend({},{initialize:function(){o.bindAll(this,"checkLinks","checkObjectLinkIn","checkObjectLinkOut","checkTextLinkIn","textLink","checkTextLinkOut"),app.bind("object:click",this.checkLinks),app.bind("object:mouseenter",this.checkObjectLinkIn),app.bind("object:mouseleave",this.checkObjectLinkOut),$(".vm-text a").click(this.textLink),$("#content").on("click",".vm-text a",this.textLink),$("#content").on("mouseleave",".vm-text a",this.checkTextLinkOut),$("#content").on("mouseenter",".vm-text a",this.checkTextLinkIn)},isObjectTextLink:function(e){var t=$(e.target).closest("a")[0].href.split(":"),i=t[0];return"object"===i&&2===t.length?t[1]:!1},isSlideTextLink:function(e){var t=$(e.target).closest("a")[0].href.split(":"),i=t[0];return 2!==t.length||"slide"!==i&&"slde"!==i?!1:t[1]},textLink:function(e){var t=this.isSlideTextLink(e);t?this.gotoSlide(t):t=this.isObjectTextLink(e),t&&e.preventDefault()},checkTextLinkIn:function(e){var t=this.isObjectTextLink(e);t&&this.fadeObjectIn($("#"+t,'section[style*="opacity: 1"]'))},checkTextLinkOut:function(e){var t=this.isObjectTextLink(e);t&&this.fadeObjectOut($("#"+t,'section[style*="opacity: 1"]'))},checkLinks:function(e){var t=e.get("link");if(t){var i=t.type;switch(i){case"hyperlink":var s=t.target;(o.isUndefined(t.linkTo)||"website"===t.linkTo)&&s.toLowerCase().indexOf("http://")<0&&s.toLowerCase().indexOf("https://")<0&&(s="http://"+s),"newWindow"===t.options[0]?this.openInNewWindow(s):this.openInSameWindow(s);break;case"slide":case"slde":o.isUndefined(t.options)&&(t.options=["0","play"]);var n=function(){app.trigger("timeline:set-time",t.options)};this.gotoSlide(t.target,n);break;case"object":if("Click"===t.options[0])if($.isArray(t.target)){var r=t.target;o.each(r,function(e){0===parseFloat($("#"+e,'section[style*="opacity: 1"]').css("opacity"))?this.fadeObjectIn($("#"+e,'section[style*="opacity: 1"]')):this.fadeObjectOut($("#"+e,'section[style*="opacity: 1"]'))},this)}else 0===parseFloat($("#"+t.target,'section[style*="opacity: 1"]').css("opacity"))?this.fadeObjectIn($("#"+t.target,'section[style*="opacity: 1"]')):this.fadeObjectOut($("#"+t.target,'section[style*="opacity: 1"]'))}}},checkObjectLinkOut:function(e){var t=e.get("link");if(t&&("svg"!==e.get("type")||o.isUndefined(e.get("originalColors"))||e.set("colors",e.get("originalColors")),"Hover"===t.options[0]&&"object"===t.type))if($.isArray(t.target)){var i=t.target;o.each(i,function(e){this.fadeObjectOut($("#"+e,'section[style*="opacity: 1"]'))},this)}else this.fadeObjectOut($("#"+t.target,'section[style*="opacity: 1"]'))},checkObjectLinkIn:function(e){var t=e.get("link");if(t){if($("#"+e.get("id")).css("cursor","pointer"),"svg"===e.get("type")){var i=e.get("colors");if(!o.isUndefined(i)&&i.length>0){var s=[];o.isUndefined(e.get("originalColors"))&&e.set("originalColors",i,{silent:!0}),o.each(i,function(e){s.push(n.shadeColor(e,-.1))}),e.set("colors",s)}}if("object"===t.type&&"Hover"===t.options[0])if($.isArray(t.target)){var r=t.target;o.each(r,function(e){this.fadeObjectIn($("#"+e,'section[style*="opacity: 1"]'),"hover")},this)}else this.fadeObjectIn($("#"+t.target,'section[style*="opacity: 1"]'),"hover")}else"text"===e.get("type")},openInNewWindow:function(e){window.open(e,"_blank")},openInSameWindow:function(e){this.isEmbedded()&&this.isResponsive()?window.parent.postMessage({event:"hyperlink",target:"same_window",args:e},"*"):window.location=e},fadeObjectIn:function(e,t){var i=o.isUndefined(e.attr("data-opacity"))?1:e.attr("data-opacity")/100;r.to(e,.7,{css:{opacity:i,display:"block"},ease:"Power1.easeOut"}),"hover"!==t&&e.css("pointer-events","auto")},fadeObjectOut:function(e){e.css("pointer-events","none"),r.to(e,.7,{css:{opacity:0},ease:"Power1.easeOut"})},gotoSlide:function(e,t){"blockinfographic"===app.settings.get("project_type")?app.trigger("slide:find",e):$('section[style*="opacity: 1"]').attr("id")!==e&&app.trigger("slide:find",e,t)},isEmbedded:function(){return!o.isUndefined(app.settings.get("mode"))&&"embed"===app.settings.get("mode")},isResponsive:function(){return!o.isUndefined(app.settings.get("embed_responsive"))&&app.settings.get("embed_responsive")}}))},{"../../helpers/color.js":55,backbone:"backbone",underscore:52}],139:[function(e,t,i){var s=window.TweenMax,o=e("underscore"),n=e("./../../helpers/fontLoader.js"),r=e("perfect-scrollbar");t.exports={setPresenterMode:function(){app.bind("slide:transitionTo",this.setPreNotes),this.listenTo(app,"timeline:play",this.startPreTimer),this.listenTo(app,"timeline:no-animations-play",this.startPreTimer),$(".presentation_water").hide(),this.$el.css("overflow","hidden"),$(".bottom-controls").addClass("pre-notes-on"),r.initialize($(".pre-notes-content-container").get(0)),$(".pre-notes-content-container").mouseenter(function(){r.update($(".pre-notes-content-container").get(0))}.bind(this)),this.setRealTime(),$(".pause-clock").click(function(e){this.pauseResumeClock(e)}.bind(this)),$(".reset-clock").click(function(e){this.resetClock(e)}.bind(this)),$(".smaller-text").click(function(e){this.decreaseNotesSize(e)}.bind(this)),$(".larger-text").click(function(e){this.increaseNotesSize(e)}.bind(this));var e=this;$(".presentation-notes").resizable({handles:"n",minHeight:100,resize:function(t,i){e.windowResize()}})},noteTextProportion:1,DECREASE_PROPORTION:.8,INCREASE_PROPORTION:1.2,decreaseNotesSize:function(e){this.noteTextProportion*=this.DECREASE_PROPORTION,this.changeNotesTextSize(this.DECREASE_PROPORTION)},increaseNotesSize:function(e){this.noteTextProportion*=this.INCREASE_PROPORTION,this.changeNotesTextSize(this.INCREASE_PROPORTION)},changeNotesTextSize:function(e){var t=$(".pre-notes-content").html();if(!(t.length<1)){$(".pre-notes-content").find(".pre-note-fontsize").length<1&&$(".pre-notes-content").html('<div class="pre-note-fontsize">'+t+"</div>");var i=$(".pre-notes-content").children().css("font-size");$(".pre-notes-content").children().css("font-size",i);for(var s=$(".pre-notes-content").html(),o=s.match(/font-size:((\s?)\d+(\.\d+)?)px/),n="";o;){var r=o[0],a=o[1],l=s.indexOf(o[0]);n+=s.substr(0,l),n+=r.replace(a,parseFloat(a*e).toFixed(2)),s=s.substr(l+o[0].length),o=s.match(/font-size:((\s?)\d+(\.\d+)?)px/)}n+=s,$(".pre-notes-content").html(n)}},setPreNotes:function(e){var t=e.index,i=e.model;if($(".next-slide-preview").remove(),this.$el.find(".total-slide-number").html(this.$el.find(".stage").length),this.$el.find(".current-slide-index").html(t+1),this.$el.find(".stage").length>t){var s=i.get("presentationNotes.text");s?($(".pre-notes-content").html(i.get("presentationNotes.text")),this.changeNotesTextSize(this.noteTextProportion),this.loadNoteFonts()):$(".pre-notes-content").html("")}this.$el.find(".stage").length>t+1?(!o.isUndefined(e.initLoading)&&e.initLoading?setTimeout(function(){this.appendNextSlidePreview(t),this.removePreviewAnim(t)}.bind(this),500):(this.appendNextSlidePreview(t),this.removePreviewAnim(t)),$(".end-presentation").hide(),$(".next-slide-text").show()):($(".end-presentation").show(),$(".next-slide-text").hide()),!o.isUndefined(e.initLoading)&&e.initLoading||(app.settings.get("Html5Download")?window.opener.postMessage('{ "type": "gotoSlide", "index": "'+e.index+'"}',"*"):window.opener.crossWindowOperation({type:"navigateSlide",data:e}))},appendNextSlidePreview:function(e){var t=this.$el.find(".stage").eq(++e);this.$el.find(".next-slide-index").html(e+1);var i=t.clone();i.addClass("next-slide-preview");var s=i.attr("id");i.attr("id","preview-"+s),o.each(i.find(".el"),function(e){var t=$(e).attr("id");$(e).attr("id","preview-"+t)}),i.find("iframe").length>0&&o.each(i.find("video"),function(e){e.pause()}),$("#content").append(i)},removePreviewAnim:function(e){var t=this.$el.find(".next-slide-preview"),i=app.collections.slides.models[++e],n=i.objectCollection.models;o.each(n,function(e){s.set(t.find("#preview-"+e.get("id")),{x:e.get("x"),y:e.get("y"),opacity:o.isUndefined(e.get("opacity"))?1:e.get("opacity"),rotation:o.isUndefined(e.get("rotation"))?0:e.get("rotation")}),o.isUndefined(e.get("textEffect"))||s.set(t.find("#preview-"+e.get("id")),{opacity:o.isUndefined(e.get("opacity"))?1:e.get("opacity")})})},loadNoteFonts:function(){var e=[];$($(".pre-notes-content").html()).find("font[face]").each(function(){$.inArray($(this).attr("face"),e)<0&&e.push($(this).attr("face").replace(new RegExp('"',"g"),""))}),$($(".pre-notes-content").html()).find("span").each(function(){$.inArray($(this).css("font-family"),e)<0&&e.push($(this).css("font-family").replace(new RegExp('"',"g"),""))}),o.each(e,function(e){n.add(e)},this)},setRealTime:function(){var e=function(){var e=new Date,t=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),o="";12>t?o="AM":(t-=12,o="PM"),10>s&&(s="0"+parseInt(s)),10>i&&(i="0"+parseInt(i)),10>t&&(t="0"+parseInt(t)),$(".realtime-hour").html(t),$(".realtime-minute").html(i),$(".realtime-second").html(s),$(".realtime-period").html(o)};this.realTimer=setInterval(function(){e()},500)},startPreTimer:function(){if(!this.timerClock){var e=$(".timer-second").html(),t=$(".timer-minute").html(),i=$(".timer-hour").html();this.timerClock=setInterval(function(){e=parseInt(e)+1,e%60===0&&(e=0,t=parseInt(t)+1,t%60===0&&(t=0,i=parseInt(i)+1)),10>e&&(e="0"+parseInt(e)),10>t&&(t="0"+parseInt(t)),10>i&&(i="0"+parseInt(i)),$(".timer-hour").html(i),$(".timer-minute").html(t),$(".timer-second").html(e)},1e3)}},pauseResumeClock:function(e){$(e.target).hasClass("paused")?(this.startPreTimer(),$(e.target).removeClass("paused"),$(e.target).html("Pause")):($(e.target).addClass("paused"),clearInterval(this.timerClock),this.timerClock=!1,$(e.target).html("Resume"))},resetClock:function(e){$(".timer-hour").html("00"),$(".timer-minute").html("00"),$(".timer-second").html("00"),clearInterval(this.timerClock),this.timerClock=!1,this.startPreTimer()}}},{"./../../helpers/fontLoader.js":57,"perfect-scrollbar":31,underscore:52}],140:[function(e,t,i){var s=e("underscore"),o=e("./animations/enterAnimations.js"),n=e("./animations/exitAnimations.js"),r=e("./animations/textAnimations.js"),a=e("./animations/widgetAnimations.js");
t.exports={initHook:function(){s.bindAll(this,"setupTimeline","transitionComplete","play","pause","progress","completeAnimation","setProgress","volume","seekToTime"),app.bind("slide:transition-complete",this.transitionComplete),app.settings.bind("change:mute",this.volume),app.bind("timeline:set-time",this.seekToTime),app.bind("slides:loaded",this.setupTimeline),app.bind("timeline:set-progress",this.setProgress),app.bind("timeline:set-play",this.play),app.bind("timeline:set-pause",this.pause),this.timeline=new TimelineLite({paused:!0,defaultEase:"Quad.easeOut",onUpdate:this.progress,onComplete:this.completeAnimation})},methods:{setupTimeline:function(){var e=this;e.exitAnimationsSetUp=n.setUp,setTimeout(function(){"Download"!==app.settings.get("project_type")&&(e.model.layoutObjectsCollection&&e.model.layoutObjectsCollection.each(function(e){$("#"+e.get("id")).show()}),e.model.objectCollection.each(function(e){this.applyAnimation(e)}.bind(e))),app.trigger("slide:timeline:setup-done")},500)},applyAnimation:function(e){var t=e.get("type");o(e,this.timeline,this.model),this.exitAnimationsSetUp(e,this.timeline,this.model),"text"===t&&e.get("textEffect")&&r(e,this.timeline),$("#"+e.get("id")).length&&$("#"+e.get("id")).css("display","block"),"infogrWidget"!==t&&"progressbar"!==t&&"radials"!==t&&"thermometer"!==t||a(e,this.timeline)},transitionComplete:function(e){this.selected&&!this.timeline.totalDuration()?($("#play").addClass("inactive"),$("#timeline").hide()):this.selected&&($("#timeline").show(),$("#play").removeClass("inactive"),app.settings.get("is_autoplay_animation")||app.settings.get("is_mobile")!==!0||$("#controls.mobile-controls").show()),$("#play-overlay").length||(s.isUndefined(e)?app.settings.get("is_autoplay_animation")&&this.play():e())},hasBackgroundMusic:function(){var e=app.settings.get("background_music");return e&&"number"!=typeof e},play:function(){s.isUndefined(this.timeline.ready)||this.timeline.ready?this.timeLinePlay():this.$el.on("timeline:ready",function(){this.timeLinePlay(),this.$el.off("timeline:ready"),this.timeline.ready=!0}.bind(this))},timeLinePlay:function(){if(this.hasBackgroundMusic()&&app.trigger("backgroundMusic:play","bgmusic"),this.selected&&this.timeline.totalDuration())if(1===this.timeline.progress()&&this.setProgress(0),app.settings.get("is_mobile")===!0){var e=this.getAudioOnSlide();e?(e.set("state","play"),$("#"+e.get("id")).find("audio")[0].readyState>=3?(this.timeline.play(),app.trigger("timeline:play",this.model)):e.on("oncanplay",function(){this.timeline.play(),app.trigger("timeline:play",this.model)}.bind(this))):(this.timeline.play(),app.trigger("timeline:play",this.model))}else this.timeline.play(),this.audioApply("play"),app.trigger("timeline:play",this.model);else this.selected&&(this.timeline.totalDuration()||app.trigger("timeline:no-animations-play",this.model),app.trigger("slide:complete-animations",this.model))},progress:function(){app.trigger("timeline:progress",this.timeline.progress())},pause:function(e){this.timeline.pause(),this.audioApply("pause"),"pauseClicked"===e?app.trigger("timeline:pause",e):app.trigger("timeline:pause")},completeAnimation:function(){this.pause(),app.settings.get("is_mobile")?this.selected&&this.timeline.totalDuration()&&app.trigger("slide:complete-animations",this.model):!this.selected||1!==$("#timeline").slider("value")&&$("#timeline").length||app.trigger("slide:complete-animations",this.model)},setProgress:function(e){this.pause(),this.timeline.progress(e),this.audioApply("seek",this.timeline._time)},seekToTime:function(e){this.pause(),e[0]>this.timeline._duration?this.timeline.progress(1):this.timeline.time(e[0]),this.audioApply("seek",this.timeline._time),"stop"===e[1]?this.pause():this.play()},audioApply:function(e,t){s.each(this.objectsCollectionView.subViews,function(i){if("audio"===i.model.get("type"))switch(e){case"seek":i.timelineSeek(t);break;case"pause":i.model.set("state","pause");break;case"play":i.model.get("animation.enter.delay")<=this.timeline._time&&i.model.set("state","play");break;case"stop":i.model.set("state","stop");break;case"volume":t?i.model.set("volume",this.lastVolume):(this.lastVolume=i.model.get("volume")||this.lastVolume||100,i.model.set("volume",0))}},this)},volume:function(){this.audioApply("volume",!app.settings.get("mute"))},getAudioOnSlide:function(){var e=!1;return s.each(this.objectsCollectionView.subViews,function(t){return"audio"===t.model.get("type")?void(e=t.model):void 0},this),e}}}},{"./animations/enterAnimations.js":130,"./animations/exitAnimations.js":131,"./animations/textAnimations.js":132,"./animations/widgetAnimations.js":133,underscore:52}],141:[function(e,t,i){var s=e("underscore"),o=window.TweenMax;t.exports={initHook:function(){s.bindAll(this,"transitionTo"),app.bind("slide:transitionTo",this.transitionTo),app.settings.get("is_mobile")===!0||"onclick"!==this.model.get("transition.type")&&"render"!==app.settings.get("mode")&&"Download"!==app.settings.get("project_type")?"video"===this.model.get("transition.type")&&app.bind("video:ended",function(e){this.selected&&"video"===this.model.get("transition.type")&&this.$el.closest(".stage").attr("id")===this.model.collection.at(e).get("id")&&app.trigger("slide:next")}.bind(this)):$("#content").on("click","section#"+this.model.get("id"),function(e){if(1!==$(e.target).closest($(".linked")).length&&!this.clickedOnChart(e)){if($(e.target).closest("a").length>0&&$(e.target).closest("a")[0].href){var t=$(e.target).closest("a")[0].href.match(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);if(t)return!0;var i=$(e.target).closest("a")[0].href.split(":");if(2===i.length&&("slide"===i[0]||"slde"===i[0]))return!0}app.trigger("slide:next")}}.bind(this))},methods:{clickedOnChart:function(e){return $(e.target).parents(".amcharts-funnel-item").length>0||$(e.target).parents(".amcharts-pie-item").length>0},transitionTo:function(e){var t=this.getTransition(this.model.get("transition.effect"),e.direction),i=1;"render"!==app.settings.get("mode")&&"Download"!==app.settings.get("project_type")||(t=this.getTransition("show"),i=0),"none"===this.model.get("transition.effect")&&(i=.01,t=this.getTransition("show")),this.model.get("id")!==e.model.get("id")||this.selected?this.selected&&(this.selected=!1,this.$el.css({"pointer-events":"none"}),o.to(this.$el,i,t.current)):(this.selected=!0,this.$el.css({"pointer-events":"auto"}),s.isUndefined(e.callback)?(o.fromTo(this.$el,i,t.from,t.to),app.trigger("timeline:set-progress",0)):o.fromTo(this.$el,i,t.from,s.extend(t.to,{onComplete:function(){app.trigger("slide:transition-complete",e.callback)}})))},getTransition:function(e,t){var i={},s=function(){app.trigger("slide:transition-complete")};switch(e){case"scroll":i.from={x:app.settings.get("slideWidth")*t,autoAlpha:0,display:"block"},i.to={x:0,autoAlpha:1,onComplete:s,ease:"Power3.easeOut",display:"block"},i.current={x:-app.settings.get("slideWidth")*t,autoAlpha:0,ease:"Power3.easeOut",display:"block"};break;case"flip":i.from={rotationY:180,autoAlpha:0,display:"block"},i.to={rotationY:0,autoAlpha:1,onComplete:s,ease:"Power3.easeOut",display:"block"},i.current={rotationY:180,autoAlpha:0,ease:"Power3.easeOut"};break;case"shuffle":i.from={autoAlpha:0,display:"block",transformPerspective:500,y:100},i.to={y:0,autoAlpha:1,onComplete:s,ease:"Power3.easeOut",display:"block"},i.current={autoAlpha:0,display:"block",transformPerspective:500,y:100,ease:"Power3.easeOut"};break;case"show":i.from={autoAlpha:0,display:"block"},i.to={autoAlpha:1,onComplete:s,ease:"Power3.easeOut"},i.current={autoAlpha:0,ease:"Power3.easeOut",display:"block"};break;default:i.from={autoAlpha:0,display:"block"},i.to={autoAlpha:1,onComplete:s,ease:"Power3.easeOut"},i.current={autoAlpha:0,ease:"Power3.easeOut",display:"block"}}return i}}}},{underscore:52}],142:[function(e,t,i){var s=e("underscore");t.exports={currentSlideIndex:0,hookListeners:function(){s.bindAll(this,"nextSlide","prevSlide","gotoSlide","findSlide","hashchange"),app.bind("slide:next",this.nextSlide),app.bind("slide:prev",this.prevSlide),app.bind("slide:find",this.findSlide),app.bind("slide:change",this.gotoSlide),window.onhashchange=this.hashchange},hashchange:function(){var e=Number(window.location.hash.replace("#s",""));e=Math.max(e-1,0),s.isUndefined(this.collection.filter(function(e){return"Layout"!==e.get("type")})[e])&&(e=0),app.trigger("slide:change",e)},gotoSlide:function(e,t){if(e=parseInt(e),this.currentSlideIndex!==e||!$("#"+this.collection.at(e).get("id")).is(":visible")){var i=1;e<this.currentSlideIndex&&(i=-1),this.currentSlideIndex=e,$("#"+this.collection.at(e).get("id")).hasClass("rendered")||app.settings.get("presentation_mode")?app.trigger("slide:transitionTo",{model:this.collection.filter(function(e){return"Layout"!==e.get("type")})[this.currentSlideIndex],index:this.currentSlideIndex,direction:i,callback:t}):(app.trigger("startLoading"),setTimeout(function(){for(var t=$(".rendered").eq(0).css("transform"),s=e;e+20>s&&s>e-20;s+=i)s>0&&s<this.collection.length&&!$("#"+this.collection.at(s).get("id")).hasClass("rendered")?(this.renderOne(this.collection.at(s)),this.views[this.collection.at(s).get("id")].setupTimeline(),this.views[this.collection.at(s).get("id")].$el.css("transform",t)):app.trigger("slide:timeline:setup-done");app.trigger("addToJobQueue",function(){app.trigger("slide:change",e)}.bind(this),"loaded")}.bind(this),0)),window.location.hash="s"+(this.currentSlideIndex+1)}},nextSlide:function(){if("loaded"===app.settings.get("state")){if(1===this.collection.length)return app.trigger("timeline:set-play"),!1;this.currentSlideIndex===this.collection.filter(function(e){return"Layout"!==e.get("type")}).length-1&&(this.currentSlideIndex=-1),this.gotoSlide(this.currentSlideIndex+1)}},prevSlide:function(){return"loaded"===app.settings.get("state")?0===this.currentSlideIndex?!1:void this.gotoSlide(this.currentSlideIndex-1):void 0},findSlide:function(e,t){var i=this.collection.get(e);i&&this.currentSlideIndex!==this.collection.indexOf(i)&&this.gotoSlide(i.get("order"),t)}}},{underscore:52}],143:[function(e,t,i){var s=e("./windowView.js"),o=e("underscore"),n=window.TweenMax;t.exports=s.extend(o.extend({},{el:"#editor-loading-overlay",initialize:function(){o.bindAll(this,"loadingDone","checkLoading","startLoading"),app.on("startLoading",this.startLoading),"Download"!==app.settings.get("project_type")&&"publish"===app.settings.get("editMode")?"blockinfographic"===app.settings.get("project_type")?app.on("slide:timeline:setup-done",this.loadingDone):app.on("slide:timeline:setup-done",this.checkLoading):this.loadingDone()},render:function(){return this},checkLoading:function(){o.isUndefined(this.slideNum)&&(app.settings.get("presentation_mode")?this.slideNum=app.collections.slides.length:this.slideNum=Math.min(20,app.collections.slides.length)),0===--this.slideNum&&this.loadingDone()},loadingDone:function(){setTimeout(function(){n.to(this.$el,.2,{autoAlpha:0,onComplete:function(){this.$el.css({width:0,height:0})}.bind(this)}),app.settings.set("state","loaded")}.bind(this),0)},startLoading:function(){app.settings.set("state","loading"),this.$el.parent("#content").length||(this.$el.appendTo($("#content")),this.$el.css("z-index",1)),this.slideNum=20,n.to(this.$el,0,{autoAlpha:1,onComplete:function(){this.$el.css({width:"100%",height:"100%"})}.bind(this)})}}))},{"./windowView.js":144,underscore:52}],144:[function(e,t,i){var s=e("backbone"),o=window.TweenMax,n=e("underscore"),r=e("./../../helpers/localStorage.js");t.exports=s.View.extend({events:{"click .close i, .close":"hide","click .video_apply":"doneButton"},initialize:function(e){n.bindAll(this,"show","hide","bodyCloseEvent","onDragStop","savePosition","checkBoundary"),this.loadDefaultOptions(e),this.render(),this.listenTo(app,this.viewName+":show",this.show),this.listenTo(app,this.viewName+":hide",this.hide),this.ignoreElements||(this.ignoreElements=""),this.ignoreElements+=" .cpicker .color-picker-div #color-picker #color-picker-limited",this.draggable&&this.$el.draggable(this.dragoptions),this.$overlay=$("#popup-overlay");var t=this.getLocalStorageId();n.isUndefined(t)||"chartPopup"===this.viewName||"mapPopup"===this.viewName||this.loadLocalSettings(t)},getLocalStorageId:function(){return this.$el.attr("id")},loadLocalSettings:function(e){var t=app.settings.get("project_id"),i=r.get(t,e+"-top"),s=r.get(t,e+"-left");return i&&s&&!n.isUndefined(e)?(o.set(this.$el,{left:s,top:i}),!0):!1},loadDefaultOptions:function(e){e=e||{},this.dragoptions=n.isUndefined(e.dragoptions)?{}:e.dragoptions,this.overlay=n.isUndefined(e.overlay)?!0:e.overlay,this.draggable=n.isUndefined(e.draggable)?!0:e.draggable,this.positionSavable=n.isUndefined(e.positionSavable)?this.draggable:e.positionSavable,this.animateShow=n.isUndefined(e.animateShow)?"show":e.animateShow,this.animateHide=n.isUndefined(e.animateHide)?"hide":e.animateHide,this.dragoptions.stop=this.onDragStop,this.dragoptions.drag=this.onDrag,n.isUndefined(this.dragtarget)||(this.dragoptions.handle=this.dragtarget)},render:function(){return this},onDrag:function(){},savePosition:function(e){r.add(app.settings.get("project_id"),e+"-top",this.$el.position().top),r.add(app.settings.get("project_id"),e+"-left",this.$el.position().left)},hide:function(){if($("body").unbind("mousedown",this.bodyCloseEvent),this.overlay&&this.hideOverLay(),"scaleOut"===this.animateHide){var e=this;o.to(this.$el,.1,{scale:[.8,.8],opacity:0,onComplete:function(){e.$el.hide()}})}else this.$el[this.animateHide]();this.$el.hasClass("properties_section")&&"link_section"!==this.$el.attr("id")&&"frames_section"!==this.$el.attr("id")&&app.trigger("object:history-update",{action:"setting"})},show:function(e){this.overlay&&this.showOverlay(),"scaleIn"===this.animateShow?(this.$el.show(),o.fromTo(this.$el,.1,{scale:[.8,.8],opacity:0},{scale:[1,1],opacity:1})):this.$el[this.animateShow](),$("body").bind("mousedown",this.bodyCloseEvent)},showOverlay:function(){o.set(this.$overlay,{css:{width:"100%",height:"100%"}}),o.to(this.$overlay,.4,{opacity:.4})},hideOverLay:function(){var e=this;o.to(this.$overlay,.4,{opacity:0,onComplete:function(){e.$overlay.css({width:"0%",height:"0%"})}})},showCenter:function(){var e=window.innerWidth/2-this.$el.innerWidth()/2,t=window.innerHeight/2-this.$el.height()/2;o.set(this.$el,{css:{left:e,top:t}}),this.$el.show()},bodyCloseEvent:function(e){if($(".visme-window").length&&"TEXTAREA"!==$(e.target)[0].tagName)return e.preventDefault(),!0;var t=1===$(e.target).closest(this.$el).length||$("#alert-window").is(":visible");n.each(this.ignoreElements.split(" "),function(i){1===$(e.target).closest(i).length&&(t=!0)}),t||this.hide()},checkBoundary:function(e){var t;t=n.isUndefined(e)?this.$el:this.$el.find(e);var i=t.height(),s=t.width(),a=parseInt(t.css("margin-left")),l=parseInt(t.css("margin-top")),d=this.getLocalStorageId(),h=r.get(app.settings.get("project_id"),d+"-top"),c=r.get(app.settings.get("project_id"),d+"-left");h&&h+l>=$(window).height()-i?o.set(this.$el,{top:$(window).height()-i-l}):0>h+l&&o.set(this.$el,{top:-l}),c&&c+a>=$(window).width()-s?o.set(this.$el,{left:$(window).width()-s-a}):0>c+a&&o.set(this.$el,{left:-a})},onDragStop:function(){var e=this.getLocalStorageId();this.positionSavable&&!n.isUndefined(e)&&(this.savePosition(e),this.checkBoundary())},disableDrag:function(){this.$el.draggable("disable")},enableDrag:function(){this.$el.draggable("enable")}})},{"./../../helpers/localStorage.js":62,backbone:"backbone",underscore:52}],145:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("./slideModel.js"),r=e("../mixin/collection/ordinalMixin.js"),a=s.Collection.extend(o.extend({},r,{defaults:{},model:n,initialize:function(e,t){this.eventType="slideCollection",this.sortKey="order",o.bindAll(this,"defineReadyPromise"),app.bind("slides:rendered",this.defineReadyPromise)},toJSON:function(e){var t=this._super(e);return e&&e.saving&&(t=t.filter(function(e){return"temp"!==e.type})),t=o.sortBy(t,function(e){return e.order})},defineReadyPromise:function(){$.when.apply($,this.getPromises()).done(function(){app.trigger("slides:loaded")})},getPromises:function(){var e=[],t=this.models.length;if(t>19&&!app.settings.get("presentation_mode")&&(t=19),"editor"===app.settings.get("editMode")&&this.models[0])return this.models[0].getPromises();for(var i=0;t>i;++i){var s=this.models[i];e=e.concat(s.getPromises())}return e}}));t.exports=a},{"../mixin/collection/ordinalMixin.js":68,"./slideModel.js":147,backbone:"backbone",underscore:52}],146:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("./slideView.js"),r=window.TweenMax,a=e("./../../helpers/localStorage.js");t.exports=s.View.extend({el:"#content",views:{},initialize:function(){o.bindAll(this,"renameAudioClip","removeSlide","render","renderOne","selectSlide"),this.listenTo(this.collection,"add",this.renderOne),this.listenTo(this.collection,"reset",this.render),this.listenTo(app,"slideCollection:remove:model-view",this.removeSlide),app.listenTo(app,"audio-library:clip:rename",this.renameAudioClip),app.bind("slide:select",this.selectSlide),this.render(),this.hookListeners&&this.hookListeners()},selectSlide:function(e){o.isUndefined(this.views[e.get("id")])&&(this.renderOne(e),this.views[e.get("id")].selectSlide(e)),app.trigger("slide:new-selected",e)},renameAudioClip:function(e,t){for(var i=this.collection.models,s=0;s<i.length;++s)for(var o=i[s],n=o.objectCollection,r=0;r<n.length;++r){var a=n.models[r];"audio"===a.get("type")&&a.get("delete_key")===t&&a.set("name",e)}},createSlideView:function(e){return new n({model:e})},getSlideEl:function(e){return e.el},renderOne:function(e){if("Layout"!==e.get("type")||"Download"!==app.settings.get("project_type")){$(".content_borders").removeClass("empty_p"),app.settings.set("pauseSlideThumbnailsUpdate",!0);var t=this.createSlideView(e);if(this.views[e.get("id")]=t,this.views[e.get("id")].render(),this.$el.find("#sl"+e.get("id")).length)r.set(this.views[e.get("id")].$el,{scale:app.settings.get("zoom")});else if("blockinfographic"===app.settings.get("project_type")){var i=e.collection.findWhere({order:e.get("order")-1});i&&this.$el.find("section#"+i.get("id")).length?"editor"===app.settings.get("editMode")?this.$el.find("section#"+i.get("id")).parents(".infoblock-wrap").after(this.getSlideEl(this.views[e.get("id")])):this.$el.find("section#"+i.get("id")).after(this.getSlideEl(this.views[e.get("id")])):"editor"===app.settings.get("editMode")?this.$el.append(this.getSlideEl(this.views[e.get("id")])):this.$el.find("#infoblock_wrapper").append(this.getSlideEl(this.views[e.get("id")]))}else{$(this.getSlideEl(this.views[e.get("id")])).hide(),r.set(this.views[e.get("id")].$el,{scale:app.settings.get("zoom")});var s=e.collection.findWhere({order:e.get("order")-1});s&&this.$el.find("section#"+s.get("id")).length?this.$el.find("section#"+s.get("id")).after(this.getSlideEl(this.views[e.get("id")])):this.$el.append(this.getSlideEl(this.views[e.get("id")])),this.views[e.get("id")].centerSlide()}o.each(e.objectCollection.models,function(e){e.trigger("object:render:after")},this),"editor"===app.settings.get("editMode")&&app.settings.trigger("change:grid.*")}},render:function(){if("editor"===app.settings.get("editMode")&&"blockinfographic"!==app.settings.get("project_type")){if(0===this.collection.length)return app.settings.set("state","loaded"),$("#gear-loader").hide(),$(".content_borders").addClass("empty_p"),void r.to($(".content_borders"),.5,{alpha:1});var e=app.settings.get("project_id"),t=a.get(e,"slide-active")&&this.collection.length>a.get(e,"slide-active")?a.get(e,"slide-active"):0,i=this.collection.at(t);if(!i||o.isUndefined(i))return;this.renderOne(i),r.set($(this.getSlideEl(this.views[i.get("id")])),{scale:[1,1],x:-50,alpha:0}),setTimeout(function(){$("#gear-loader").hide(),$(this.getSlideEl(this.views[i.get("id")])).css("display","block"),r.to($(".content_borders"),.5,{alpha:1}),r.to($(this.getSlideEl(this.views[i.get("id")])),.5,{scale:app.settings.get("zoom"),alpha:1,x:0,onComplete:function(){app.settings.set("state","loaded"),app.trigger("slide:request-selecting-slide",i)}})}.bind(this),300),app.trigger("slides:rendered",this.collection)}else{for(var s=0;s<("blockinfographic"===app.settings.get("project_type")||app.settings.get("presentation_mode")||"Download"===app.settings.get("type")?this.collection.length:20)&&s<this.collection.length;s++)this.renderOne(this.collection.at(s));app.trigger("slides:rendered",this.collection),"blockinfographic"===app.settings.get("project_type")&&($("#gear-loader").hide(),setTimeout(function(){app.trigger("toolbar:update-position")},500))}return this},removeSlide:function(e){this.views[e.get("id")]&&this.views[e.get("id")].remove(),this.checkRemainSlides()},checkRemainSlides:function(){0===this.collection.filter(function(e){return"Layout"!==e.get("type")}).length&&app.trigger("project:empty")}})},{"./../../helpers/localStorage.js":62,"./slideView.js":149,backbone:"backbone",underscore:52}],147:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=e("../../helpers/gradientCss.js"),r=e("../objects/objectCollection.js"),a=e("../mixin/model/attributeValidatorMixin.js"),l=e("../../helpers/color.js"),d=e("../../helpers/uniqueId.js");s.DeepModel=e("backbone-deep-model"),t.exports=s.DeepModel.extend(o.extend({},a,{validators:{width:{type:"number",params:{min:1,max:9999}},height:{type:"number",params:{min:1,max:9999}}},defaults:{id:null,name:null,type:"regular",order:-1,width:1e3,height:800,hidden:!1,editable:!0,transition:{effect:"fade",duration:.5,type:"onclick"},background:{blur:0,brightness:0,colorOverlay:0,contrast:0,filter:"no-filter",scale:100,flipX:!1,flipY:!1,color:["#ffffff"],height:0,hue:0,opacity:100,saturate:0,type:"solid",width:0,x:-5,y:-5}},setSlibObjAttr:function(e){return o.each(e,function(e){e.onLibSlide=!0}),e},getSlideLayout:function(){},getSlideLibrary:function(){return $.ajax({type:"GET",url:"/actions/getSlideLibrary/"+app.settings.get("project_id")+"/"+(this.get("projectId")?this.get("projectId"):this.get("project").id),async:!1,success:function(e){var t=JSON.parse(e.data.pd.data).slides[0];delete t.id,t.type="temp",t.editable=!1,t.order=this.get("order"),t.transition=this.get("transition"),t.libraryGroupId=this.get("id"),t.hidden=this.get("hidden"),t.objects=this.setSlibObjAttr(t.objects),t.name=e.data.p.title,this.set("synced",!0),this.set("project",e.data.p),this.set("libraryGroupId",this.get("id")),this.set("name",e.data.p.title);var i="loading"===app.settings.get("state");app.trigger("addToJobQueue",function(){app.trigger("slideCollection:add",t,void 0,{noSelect:i})},"loaded")}.bind(this),error:function(){}}).responseText},getSlideGroupLibrary:function(){return $.ajax({type:"GET",url:"/actions/getSlideLibraryGroup/"+app.settings.get("project_id")+"/"+this.get("projectId"),async:!1,success:function(e){var t,i=this.get("order");o.each(e.data,function(e){var s=JSON.parse(e.data).slides[0];t=e.name,s.libraryGroupId=this.get("id"),s.type="temp",s.editable=!1,s.transition=this.get("transition"),s.hidden=this.get("hidden"),s.objects=this.setSlibObjAttr(s.objects),s.order=++i,delete s.id;var o="loading"===app.settings.get("state");app.trigger("addToJobQueue",function(){app.trigger("slideCollection:add",s,void 0,{noSelect:o})},"loaded")},this),this.set("project",{title:t}),this.set("synced",!0),this.set("libraryGroupId",this.get("id"))}.bind(this)}).responseText},synchronizeSlide:function(){if(!this.get("synced"))switch(this.get("type")){case"Library":this.getSlideLibrary();break;case"LibraryGroup":if(!this.get("projectId")){this.set("type","Library"),this.getSlideLibrary();break}this.getSlideGroupLibrary()}},requiresSync:function(){return"Library"===this.get("type")||"LibraryGroup"===this.get("type")},getPromises:function(){return this.objectCollection.getPromises()},getBackgroundModel:function(e){var t,i={bgtype:"solid",colors:["white"]};switch(this.get("background.tile")>0&&this.set({"background.type":"tile"},{silent:!0}),this.get("background.type")){case"solid":this.get("background.hash")&&(-1!==this.get("background.hash").indexOf("transparent")?"editor"===app.settings.get("editMode")?i.colors[0]="url(/images/transparent.gif)":i.colors[0]="transparent":-1!==this.get("background.hash").indexOf("rgb")?(i.color=this.get("background.hash"),i.colors[0]=this.get("background.hash")):i.colors[0]="#"+this.get("background.hash"));break;case"gradient":var s=n(this.get("background.hash")).split(";"),r=["white"];$.each(s,function(e,t){t=$.trim(t),""!==t&&(r+="background:"+t+";")}.bind(this)),i.bgtype="gradient",i.backgrounds=r;break;case"image":this.get("background.hash")&&this.get("background.ext")&&(i={filter:this.get("background.filter"),flipX:this.get("background.flipX"),flipY:this.get("background.flipY"),hue:this.get("background.hue"),contrast:this.get("background.contrast"),colorOverlay:this.get("background.colorOverlay"),blur:this.get("background.blur"),scale:this.get("background.scale"),saturate:this.get("background.saturate"),brightness:this.get("background.brightness"),opacity:this.get("background.opacity")>=0?this.get("background.opacity"):100,colors:[this.get("background.colorOverlayColor")?"#"+this.get("background.colorOverlayColor"):"#000"]},i.src=this.get("background.hash")+"."+this.get("background.ext"),i.bgtype="image",t="blockinfographic"===app.settings.get("project_type")?$("#"+this.get("id")).height():app.settings.get("slideHeight"),this.get("background.width")&&this.get("background.height")?(i.width=this.get("background.width"),i.height=this.get("background.height")):(i.width=app.settings.get("slideWidth"),i.height=t),o.isUndefined(this.get("background.x"))||o.isUndefined(this.get("background.y"))?(i.x=0,i.y=0):(i.x=this.get("background.x"),i.y=this.get("background.y")));break;case"library-image":i.src="themes/"+this.get("background.url"),i.bgtype="tile",i.scale=100,i.backgrounds="background:url("+app.settings.get("usersDataStorage")+i.src+")";break;case"tile":i.bgtype="tile",i.scale=this.get("background.scale");var a=app.settings.get("usersDataStorage")+this.get("background.hash")+"."+this.get("background.ext");i.backgrounds="background:url("+a+") repeat;background-size: "+this.get("background.scale")+"%, "+this.get("background.scale")+"%";break;case"none":i.bgtype="solid","editor"===app.settings.get("editMode")?i.colors[0]="url(/images/transparent.gif)":i.colors[0]="transparent";break;case"loading":i.bgtype="loading"}return i},toJSON:function(e){return o.extend(this.attributes,{objects:this.objectCollection.toJSON()})},initialize:function(e){o.isNull(this.get("id"))?this.set("id",d.uniqueId("sl","slide")):d.notifyIdCounter(this.get("id"),"slide"),this.get("name")||this.set("name","Slide "+(this.get("order")+1)),"Library"!==this.get("type")&&"LibraryGroup"!==this.get("type")||this.set("libraryGroupId",this.get("id")),e.objectCollection&&(this.objectCollection=e.objectCollection),this.objectCollection&&e.objectCollection||(this.objectCollection=new r(this.get("objects"))),o.bindAll(this,"updateTransitions","requiresSync","getSlideLibrary","getSlideGroupLibrary","updateSize","updateSlideBackgroundByPalette","undoSlideBackground","clearDefaultSlideBackground","searchAndReplaceSlideBgColor"),app.on("update-transitions",this.updateTransitions),app.on("slide:update:palette",this.updateSlideBackgroundByPalette),this.bind("slide:update:palette",this.updateSlideBackgroundByPalette),app.on("slide:undo:palette",this.undoSlideBackground),app.on("slide:clearDefault:palette",this.clearDefaultSlideBackground),app.on("slide:color:replace",this.searchAndReplaceSlideBgColor),"blockinfographic"!==app.settings.get("project_type")&&app.settings.bind("change:slideHeight change:slideWidth",this.updateSize)},updateTransitions:function(e){this.set("transition",e)},updateSize:function(){this.set("width",app.settings.get("slideWidth")),this.set("height",app.settings.get("slideHeight"))},updateSlideBackgroundByPalette:function(e){var t=o.clone(this.toJSON());o.isUndefined(t.paletteIndexes)||0!==t.paletteIndexes[0]&&(o.isUndefined(this.get("defaultBackground"))&&this.set("defaultBackground",this.get("background")),this.set("background.colors",[e[t.paletteIndexes[0]-1]]),"solid"===t.background.type&&this.set("background.hash",e[t.paletteIndexes[0]-1].replace("#","")),"image"===t.background.type&&this.set("background.colorOverlayColor",e[t.paletteIndexes[0]-1].replace("#","")))},undoSlideBackground:function(){var e=this.get("background"),t=this.get("defaultBackground");if(!o.isUndefined(t)){this.set("background.colors",t.colors);var i="solid"===t.type?"#"+t.hash:t.colorOverlayColor;"solid"===e.type&&this.set("background.hash",i.replace("#","")),"image"===e.type&&this.set("background.colorOverlayColor",i)}},clearDefaultSlideBackground:function(){o.isUndefined(this.get("defaultBackground"))||this.unset("defaultBackground")},searchAndReplaceSlideBgColor:function(e,t){e=l.standard(e),t=l.standard(t);var i=this.get("background");o.isUndefined(i.colors)||l.standard(i.colors[0])===e&&this.set("background.colors",[t]),o.isUndefined(i.hash)||l.standard("#"+i.hash)===e&&this.set("background.hash",t.replace("#","")),o.isUndefined(i.colorOverlayColor)||l.standard(i.colorOverlayColor)===e&&this.set("background.colorOverlayColor",t)}},{SLIDETYPE:{regular:"regular",library:"library",group:"group"}}))},{"../../helpers/color.js":55,"../../helpers/gradientCss.js":59,"../../helpers/uniqueId.js":64,"../mixin/model/attributeValidatorMixin.js":69,"../objects/objectCollection.js":77,backbone:"backbone","backbone-deep-model":1,underscore:52}],148:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=window.TweenMax,r=e("../mixin/view/scrollBarMixin.js"),a=e("../objects/types/background/backgroundView.js"),l=e("../objects/types/background/backgroundModel.js");t.exports=s.View.extend(o.extend({},r,{el:"#slide-panel",template:"#slide-panel-template",controlsHover:!1,controlsTimeout:0,events:{"click .slide-zone":"changeSlide"},currentThumbsIndex:0,initialize:function(e){if(app.collections.slides.models.length>25)return $("#thumbnails").remove(),!1;if(o.bindAll(this,"updateSlidePreviewObject","updateBackground","removeSlidePreviewObject","onControlsHover","onControlsBlur","updateCurrentThumb","updateThumbs","thumbsLeft","thumbsRight"),this.slideWidth=e.slideWidth,this.slideHeight=e.slideHeight,this.render(),this.$el.find(".slide-zone").length>1){this.$el.closest(".bottom-controls").on("mouseenter",this.onControlsHover).on("mouseleave",this.onControlsBlur);var t=this;$(window).on("resize",function(){setTimeout(function(){t.updateThumbs()},0)})}app.bind("slide:transitionTo",this.updateCurrentThumb)},updateBackground:function(e){this.$section=this.$el.find(".slide#thumb-"+e.get("id")).find("section");var t=188,i=106,s=this.slideWidth,o=this.slideHeight,r=Math.min(t/s,i/o);$(".slide section").css({position:"relative",top:"50%"}),this.model=e;var d=this.model.getBackgroundModel(),h=new a({model:new l(d)});this.$section.parent(".section_wrap").prepend(h.$el),1===app.settings.get("presentation_mode")&&app.settings.get("Html5Download")||n.set([this.$section,this.$section.parent(".section_wrap").find(".slide-background svg")],{scaleX:r,scaleY:r,transformOrigin:"0% 0%"}),n.set(this.$section.parent(".section_wrap").find(".crop_wrapper"),{x:d.x*r,y:d.y*r}),n.set(this.$section,{y:-(o*r)/2}),app.bind(e.get("id")+":change",this.updateSlidePreviewObject)},updateSlidePreviewObject:function(e){var t=e.get("id"),i=$("#"+t),s=i.closest("section"),r=e.get("type");if("audio"!==r&&s.find("#"+t).length){this.removeSlidePreviewObject(e);var a;if("video"!==r?a=i.clone():(a=$('<div class="el"></div>'),a.attr("style",i.attr("style"))),"video"===r){if(o.isUndefined(e.get("thumbnail")))return;a.find("iframe").remove(),o.each(a.find("video"),function(e){e.pause()}),a.find("video").remove();var l=document.createElement("img");l.setAttribute("src",e.get("thumbnail")),a.prepend(l)}a.removeAttr("id"),
a.attr("id","m-"+t),a.removeClass("selected"),a.css("display","block"),$("#small-"+s.attr("id")).append(a),a.find("canvas").length>0&&a.find("canvas")[0].getContext("2d").drawImage(i.find("canvas")[0],0,0),"progressbar"!==r&&"radials"!==r&&"thermometer"!==r||a.find("linearGradient").length>0&&a.find("linearGradient").removeAttr("id"),n.set($("#small-"+s.attr("id")+" #m-"+t),{x:e.get("x"),y:e.get("y"),opacity:o.isUndefined(e.get("opacity"))?1:e.get("opacity"),rotation:o.isUndefined(e.get("rotation"))?0:e.get("rotation")}),o.isUndefined(e.get("textEffect"))||n.set($("#small-"+s.attr("id")+" #m-"+t+" .letter"),{opacity:o.isUndefined(e.get("opacity"))?1:e.get("opacity")})}},removeSlidePreviewObject:function(e){var t=e.get("id");$("#m-"+t).remove()},renderOne:function(e){var t=o.template($(this.template).html(),e.toJSON());this.$el.append(t),this.slideId=$(t).find(".slide").attr("id"),this.updateBackground(e)},render:function(){return this.collection.each(function(e){"Layout"!==e.get("type")&&this.renderOne(e)},this),this.updateThumbs(),$("#thumbnails").fadeOut(),this},changeSlide:function(e){var t=$(e.currentTarget);t.hasClass("active")||app.trigger("slide:change",t.index())},onControlsHover:function(){return app.settings.get("fullscreen")||!o.isUndefined(app.settings.get("mode"))&&"embed"===app.settings.get("mode")?($("#thumbnails").is(":visible")||$("#thumbnails").show(),void setTimeout(function(){this.updateThumbs()}.bind(this),0)):void(this.controlsTimeout?(clearTimeout(this.controlsTimeout),this.controlsTimeout=!1):$("#thumbnails").is(":visible")||($("#thumbnails").fadeIn("fast"),this.updateThumbs()))},onControlsBlur:function(){app.settings.get("fullscreen")||!o.isUndefined(app.settings.get("mode"))&&"embed"===app.settings.get("mode")||this.controlsTimeout||(this.controlsTimeout=setTimeout(function(){$("#thumbnails").fadeOut("fast"),this.controlsTimeout=!1}.bind(this),1e3))},updateCurrentThumb:function(e){var t=0;t=o.isUndefined(e)?app.views.slidesView.currentSlideIndex:e.index;var i=$("#slide-panel").find(".slide-zone");i.removeClass("active"),i.eq(t).addClass("active"),parseInt($("#slide-container").width())-parseInt($("#slide-panel").css("margin-left"))<(t+2)*$(".slide-zone").width()?this.thumbsRight():-parseInt($("#slide-panel").css("margin-left"))>t*$(".slide-zone").width()&&this.thumbsLeft()},updateThumbs:function(){if("none"!==$("#thumbnails").css("display")){var e=$("#slide-panel"),t=e.find(".slide-zone"),i=(t.width()+20)*t.length+40;e.width(i),i>$("#slide-container").width()-70?this.showThumbsArrows():this.hideThumbsArrows(),this.updateCurrentThumb()}},showThumbsArrows:function(){var e=$("#thumbnails");e.find("#slide-container").width("calc(100% - 70px)"),e.find(".thumbs-arrows").show(),e.find("#thumb-left").on("click",this.thumbsLeft),e.find("#thumb-right").on("click",this.thumbsRight),this.updateArrowsState()},hideThumbsArrows:function(){this.currentThumbsIndex=0;var e=$("#thumbnails");e.find("#slide-panel").css("margin-left","0"),e.find("#slide-container").width("100%"),e.find(".thumbs-arrows").hide(),e.find("#thumb-left").off("click"),e.find("#thumb-right").off("click"),this.updateArrowsState()},thumbsLeft:function(){if(0!==this.currentThumbsIndex){this.currentThumbsIndex--;var e=$("#slide-panel"),t=e.find(".slide-zone").eq(0).width()+7,i=3*-t*this.currentThumbsIndex;e.css("margin-left",i),setTimeout(this.updateArrowsState,600)}},thumbsRight:function(){this.currentThumbsIndex++;var e=$("#slide-panel"),t=e.find(".slide-zone").eq(0).width()+7,i=3*-t,s=i*this.currentThumbsIndex,o=-e.width()+$("#slide-container").width();return i>s-o?void this.currentThumbsIndex--:(e.css("margin-left",s),void setTimeout(this.updateArrowsState,600))},updateArrowsState:function(){var e=$("#thumbnails"),t=parseInt(e.find("#slide-panel").css("margin-left"),10),i=-e.find("#slide-panel").width()+$("#slide-container").width();e.find(".thumbs-arrows").removeClass("inactive"),0===t&&e.find("#thumb-left").addClass("inactive"),i>t&&e.find("#thumb-right").addClass("inactive")}}))},{"../mixin/view/scrollBarMixin.js":74,"../objects/types/background/backgroundModel.js":85,"../objects/types/background/backgroundView.js":86,backbone:"backbone",underscore:52}],149:[function(e,t,i){var s=e("backbone"),o=e("underscore"),n=window.TweenMax,r=e("../objects/objectCollectionView.js"),a=e("../objects/objectCollection.js"),l=e("./../../helpers/manageMediaAssets.js"),d=e("../objects/types/background/backgroundView.js"),h=e("../objects/types/background/backgroundModel.js");t.exports=s.View.extend(o.extend({},l,{template:"#slide-template",initHooks:[],needLayoutUpdate:!1,initialize:function(){this.selected=!1,o.bindAll(this,"selectSlide","addObject","update","updateSlideAttr","renderLayout","slideUpdated","scheduleUpdateLayout","setLayout","updateBackgroundData","setGraspWrap","zoomSlide"),app.bind("project:change",this.slideUpdated),this.model.bind("change",this.update),app.bind("slide:new-selected",this.selectSlide),app.bind("slide:update-layout",this.renderLayout),app.bind("slide:schedule-update-layout",this.scheduleUpdateLayout),"Layout"!==this.model.get("type")&&app.bind("slide:set-layout",this.setLayout),"blockinfographic"!==app.settings.get("project_type")&&app.settings.bind("change:slideHeight change:slideWidth",this.updateSlideAttr),this.model.bind("slide:zoom",this.zoomSlide),this.initHooks.length&&o.each(this.initHooks,function(e){e.call(this)},this)},setLayout:function(e){"Layout"!==this.model.get("type")&&(this.model.set("slideLayout",e),this.selected?this.renderLayout(this.model):this.scheduleUpdateLayout(e))},slideUpdated:function(){"Layout"===this.model.get("type")&&app.trigger("slide:schedule-update-layout",this.model.get("id"))},scheduleUpdateLayout:function(e){this.model.get("slideLayout")===e&&(this.needLayoutUpdate=!0)},hideLinkObject:function(){var e=this.model.objectCollection,t=o.filter(e.models,function(e){return!o.isUndefined(e.get("link"))&&e.get("link")&&"object"===e.get("link").type&&!o.isUndefined(e.get("link").target)});t.length>0&&o.each(t,function(t){if($.isArray(t.get("link").target)){var i=t.get("link").target;o.each(i,function(t){if(e.get(t)){var i=e.get(t).get("id");if(o.isUndefined($("#"+i).attr("data-opacity"))){var s=e.get(t).get("opacity");$("#"+i).attr("data-opacity",s)}e.get(t).set("opacity",0),$("#"+i).css("pointer-events","none")}},this)}else if(e.get(t.get("link").target)){var s=t.get("link").target,n=e.get(s).get("id");if(o.isUndefined($("#"+n).attr("data-opacity"))){var r=e.get(s).get("opacity");$("#"+n).attr("data-opacity",r)}e.get(s).set("opacity",0),$("#"+n).css("pointer-events","none")}});var i=o.filter(e.models,function(e){return"text"===e.get("type")}),s=/(\s)href="(.+?(?=\"))/g;o.each(i,function(t){for(var i=t.get("text"),n=s.exec(i);null!==n;){if("object"===n[2].split(":")[0]){var r=n[2].split(":")[1];if(r){var a=e.get(r).get("id");if(o.isUndefined($("#"+a).attr("data-opacity"))){var l=e.get(r).get("opacity");$("#"+a).attr("data-opacity",l)}e.get(r).set("opacity",0),$("#"+a).css("pointer-events","none")}}n=s.exec(i)}})},updateSlideAttr:function(e){(o.has(e.changed,"slideHeight")||o.has(e.changed,"slideWidth"))&&(this.setGraspWrap(),this.centerSlide())},resizeHandleEl:".sgrasp_arrows",render:function(){if($("#"+this.model.get("id")).length)this.setElement($("#"+this.model.get("id")).get(0));else{var e=o.template($(this.template).html(),this.model.toJSON());this.setElement(e)}return"blockinfographic"===app.settings.get("project_type")?this.setUpBlock():(this.$stage=this.$el,this.centerSlide(),this.initResizeHandle()),this.objectsCollectionView=new r({collection:this.model.objectCollection,slideEl:this.$el.find("article"),layout:this.model.get("layout"),slideType:this.model.get("type")}),this.$article=this.$el.find("article"),this.model.get("editable")||this.$article.addClass("noneditable"),this.applyBackground(),this.$el.find("#blockPaletteIndex").length>0&&this.$el.find("#blockPaletteIndex").bind("change",function(e){this.paletteIndexInputSlide(e)}.bind(this)),this.model.trigger("change",this.model),this.renderLayout(this.model),"temp"===this.model.get("type")&&n.to(this.$el,.5,{scale:app.settings.get("zoom")}),this.$stage.addClass("rendered"),"player"!==app.settings.get("mode")&&"preview"!==app.settings.get("mode")&&"embed"!==app.settings.get("mode")||"Download"===app.settings.get("project_type")||this.hideLinkObject(),this},renderLayout:function(e){if(this.model.get("slideLayout")&&this.model.get("id")===e.get("id")&&"Layout"!==this.model.get("type")){if(this.$el.find(".layout").remove(),"none"===this.model.get("slideLayout"))return;if(!app.collections.slides.findWhere({id:this.model.get("slideLayout")}))return;this.$el.find("article").prepend('<div class="layout noneditable"></div>'),this.model.layoutObjectsCollection=new a(app.collections.slides.findWhere({id:this.model.get("slideLayout")}).toJSON().objects),this.objectsLayoutCollectionView=new r({collection:this.model.layoutObjectsCollection,slideEl:this.$el.find(".layout"),resetIds:!0})}},needsResizeHandle:function(){return"infographic"===app.settings.get("type").toLowerCase()},infographMinHeight:100,initResizeHandle:function(){if(this.needsResizeHandle()){this.$resizeEl=this.$el.find(this.resizeHandleEl).parent(),this.setGraspWrap();var e=this;this.$resizeEl.show(),this.$el.find(this.resizeHandleEl).draggable({axis:"y",start:function(t){e.startResizeY=t.pageY,app.trigger("object:deselect-object"),$("#sgrasp_height span").html(app.settings.get("slideHeight")),e.$el.find("#sgrasp_height").fadeIn()},drag:function(t){var i=(t.pageY-e.startResizeY)/app.settings.get("zoom"),s=app.settings.get("slideHeight"),o=Math.round(i+parseFloat(s));$("#sgrasp_height span").html(o+" px")},stop:function(t){var i=(t.pageY-e.startResizeY)/app.settings.get("zoom"),s=app.settings.get("slideHeight"),o=Math.round(i+parseFloat(s));o=Math.max(e.infographMinHeight,o),app.settings.set("slideHeight",o),$(this).css("top","-12px"),e.$el.find("#sgrasp_height").fadeOut(),app.trigger("zoom:fit-content-size")}})}},setGraspWrap:function(){this.needsResizeHandle()&&this.$resizeEl.css({width:app.settings.get("slideWidth")})},updateBackgroundData:function(e){var t={x:e.get("x"),y:e.get("y"),brightness:e.get("brightness"),filter:e.get("filter"),flipX:e.get("flipX"),flipY:e.get("flipY"),hue:e.get("hue"),contrast:e.get("contrast"),colorOverlay:e.get("colorOverlay"),blur:e.get("blur"),saturate:e.get("saturate"),width:e.get("width"),height:e.get("height"),opacity:e.get("opacity"),type:e.get("bgtype"),scale:e.get("scale")};"solid"===e.get("bgtype")&&(t.hash=e.get("colors")[0].replace("#","")),"image"===e.get("bgtype")&&(t.colorOverlayColor=e.get("colors")[0].replace("#","")),this.model.set({background:t}),app.trigger("save:non-force")},applyBackground:function(){var e=this.model.getBackgroundModel();this.bgView?this.bgView.model.set(e):(this.bgView=new d({model:new h(e)}),this.bgView.model.on("change",this.updateBackgroundData),"editor"===app.settings.get("editMode")&&"blockinfographic"===app.settings.get("project_type")&&this.model.bind("change:height change:width",function(){this.bgView.resetImageSize()}.bind(this)),this.bgView.updateFilters(!0),this.$el.find("article").prepend(this.bgView.$el),app.settings.get("bleed")&&("solid"===e.bgtype&&-1===e.colors[0].indexOf("transparent")?this.$el.find("article").css("background-color",e.colors[0]):this.$el.find("article").css("background-color","white")))},update:function(){if(o.has(this.model.changed,"width")||o.has(this.model.changed,"height")){var e=this.model.get("width"),t=this.model.get("height");n.set(this.$article,{css:{height:t,width:e}}),n.set(this.$stage,{css:{height:t,width:e}}),delete this.model.changed.width,delete this.model.changed.height}o.has(this.model.changed,"background")&&(app.trigger("slide:change:background",this.model.changed.background),this.applyBackground(),delete this.model.changed.background),o.has(this.model.changed,"grid")&&this.toggleGrid()},centerSlide:function(){$(".stage").css({"margin-left":-($(".stage").width()/2),"margin-top":-($(".stage").height()/2)}),app.trigger("center-slide")},selectSlide:function(e){if("loading"!==app.settings.get("state")||"editor"!==app.settings.get("editMode")){var t=e.get("id");this.model.get("id")!==t||this.selected?this.selected&&this.model.get("id")!==t&&("blockinfographic"!==app.settings.get("project_type")&&this.hide(),this.$stage.removeClass("active"),this.selected=!1,this.stopListening()):(this.$stage.addClass("active"),"blockinfographic"!==app.settings.get("project_type")&&"none"===this.$el.css("display")&&this.show("fade"),this.selected=!0,this.listenTo(app,"slide-background:save",this.saveSlideBackground),this.listenTo(app,"slide-background:restore",this.restoreSlideBackground),this.listenTo(app,"active-slide:change",this.updateAttribute),this.listenTo(app,"active-slide:tileMode",this.changeTileMode),this.listenTo(app,"drop-object",this.addObject),setTimeout(function(){app.trigger("object:deselect-object")},0),this.needLayoutUpdate&&(this.needLayoutUpdate=!1,this.renderLayout(this.model)))}},saveSlideBackground:function(){this.savedSlideBg=$.extend(!0,{},this.model.get("background"))},restoreSlideBackground:function(){this.updateAttribute("background",this.savedSlideBg)},updateAttribute:function(e,t){this.model.set(e,t)},addObject:function(e,t){if("group"===e.type){var i=app.settings.get("blocksAdded")||0;app.settings.set("blocksAdded",i+1),"left:bottom"===e.position&&(e.x=0,"blockinfographic"===app.settings.get("project_type")?e.y=this.model.get("height")-e.height:e.y=app.settings.get("slideHeight")-e.height),this.objectsCollectionView.collection.parseGroup(e,function(){})}else e=this.objectsCollectionView.collection.add(e),e&&(app.trigger("object:new-selected",e[0]),o.isArray(app.settings.get("templatePalette"))&&"map"!==e[0].get("type")&&"chart"!==e[0].get("type")&&e[0].trigger("object:update:palette",app.settings.get("templatePalette")));!o.isUndefined(t)&&o.isFunction(t.callBack)&&e&&t.callBack(e[0])},show:function(e){"editor"===app.settings.get("editMode")?(this.$el.css("opacity",1),this.$el.show()):n.to(this.$el,0,{autoAlpha:1,display:"block",transformPerspective:0,y:0})},hide:function(e){this.$el.hide()},changeTileMode:function(e){var t=this.model.get("background");o.isUndefined(t)?this.model.set("background",{tile:e.tile,scale:e.scale}):(this.model.get("background").tile=e.tile,this.model.get("background").scale=e.scale),this.applyBackground()},manageSwatchAssets:function(e){var t=app.settings.get("project_id");if(this.model.get("background")&&"image"===this.model.get("background").type&&l["delete"](t,this.model.get("background").id,0),"image"===e.type){var i={asset_id:e.id,type:"swatch",project_id:t};l.add(t,i)}},paletteIndexInputSlide:function(e){var t=[0,0,0,0,0];this.model.get("paletteIndexes")&&(t=JSON.parse(JSON.stringify(this.model.get("paletteIndexes")))),t[0]=Number($(e.currentTarget).val()),this.model.unset("paletteIndexes"),this.model.set("paletteIndexes",t)},zoomSlide:function(){n.to(this.$el,.5,{scale:app.settings.get("zoom")})}}))},{"../objects/objectCollection.js":77,"../objects/objectCollectionView.js":78,"../objects/types/background/backgroundModel.js":85,"../objects/types/background/backgroundView.js":86,"./../../helpers/manageMediaAssets.js":63,backbone:"backbone",underscore:52}]},{},[53])(53)});